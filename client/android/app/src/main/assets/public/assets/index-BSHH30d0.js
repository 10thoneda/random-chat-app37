var lC=Object.defineProperty;var cC=(t,e,n)=>e in t?lC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>cC(t,typeof e!="symbol"?e+"":e,n);function uC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var v_={exports:{}},lh={},x_={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc=Symbol.for("react.element"),hC=Symbol.for("react.portal"),fC=Symbol.for("react.fragment"),pC=Symbol.for("react.strict_mode"),mC=Symbol.for("react.profiler"),gC=Symbol.for("react.provider"),yC=Symbol.for("react.context"),vC=Symbol.for("react.forward_ref"),xC=Symbol.for("react.suspense"),wC=Symbol.for("react.memo"),bC=Symbol.for("react.lazy"),Lv=Symbol.iterator;function _C(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var w_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b_=Object.assign,__={};function fa(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||w_}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function E_(){}E_.prototype=fa.prototype;function jg(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||w_}var Ag=jg.prototype=new E_;Ag.constructor=jg;b_(Ag,fa.prototype);Ag.isPureReactComponent=!0;var Vv=Array.isArray,T_=Object.prototype.hasOwnProperty,Pg={current:null},S_={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)T_.call(e,r)&&!S_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:fc,type:t,key:i,ref:a,props:s,_owner:Pg.current}}function EC(t,e){return{$$typeof:fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===fc}function TC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fv=/\/+/g;function Af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TC(""+t.key):e.toString(36)}function Ru(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case fc:case hC:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Af(a,0):r,Vv(s)?(n="",t!=null&&(n=t.replace(Fv,"$&/")+"/"),Ru(s,e,n,"",function(d){return d})):s!=null&&(Rg(s)&&(s=EC(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Fv,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Vv(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Af(i,l);a+=Ru(i,e,n,c,s)}else if(c=_C(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Af(i,l++),a+=Ru(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function su(t,e,n){if(t==null)return t;var r=[],s=0;return Ru(t,r,"","",function(i){return e.call(n,i,s++)}),r}function SC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Ou={transition:null},kC={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Ou,ReactCurrentOwner:Pg};function N_(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:su,forEach:function(t,e,n){su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!Rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=fa;de.Fragment=fC;de.Profiler=mC;de.PureComponent=jg;de.StrictMode=pC;de.Suspense=xC;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kC;de.act=N_;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b_({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Pg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)T_.call(e,c)&&!S_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:fc,type:t.type,key:s,ref:i,props:r,_owner:a}};de.createContext=function(t){return t={$$typeof:yC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gC,_context:t},t.Consumer=t};de.createElement=k_;de.createFactory=function(t){var e=k_.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:vC,render:t}};de.isValidElement=Rg;de.lazy=function(t){return{$$typeof:bC,_payload:{_status:-1,_result:t},_init:SC}};de.memo=function(t,e){return{$$typeof:wC,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ou.transition;Ou.transition={};try{t()}finally{Ou.transition=e}};de.unstable_act=N_;de.useCallback=function(t,e){return Qt.current.useCallback(t,e)};de.useContext=function(t){return Qt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Qt.current.useEffect(t,e)};de.useId=function(){return Qt.current.useId()};de.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Qt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};de.useRef=function(t){return Qt.current.useRef(t)};de.useState=function(t){return Qt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Qt.current.useTransition()};de.version="18.3.1";x_.exports=de;var v=x_.exports;const jr=hc(v),NC=uC({__proto__:null,default:jr},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC=v,IC=Symbol.for("react.element"),jC=Symbol.for("react.fragment"),AC=Object.prototype.hasOwnProperty,PC=CC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RC={key:!0,ref:!0,__self:!0,__source:!0};function C_(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)AC.call(e,r)&&!RC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:IC,type:t,key:i,ref:a,props:s,_owner:PC.current}}lh.Fragment=jC;lh.jsx=C_;lh.jsxs=C_;v_.exports=lh;var o=v_.exports,I_={exports:{}},Sn={},j_={exports:{}},A_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Q){var ne=q.length;q.push(Q);e:for(;0<ne;){var ce=ne-1>>>1,he=q[ce];if(0<s(he,Q))q[ce]=Q,q[ne]=he,ne=ce;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],ne=q.pop();if(ne!==Q){q[0]=ne;e:for(var ce=0,he=q.length,Se=he>>>1;ce<Se;){var Je=2*(ce+1)-1,Nn=q[Je],ue=Je+1,Pe=q[ue];if(0>s(Nn,ne))ue<he&&0>s(Pe,Nn)?(q[ce]=Pe,q[ue]=ne,ce=ue):(q[ce]=Nn,q[Je]=ne,ce=Je);else if(ue<he&&0>s(Pe,ne))q[ce]=Pe,q[ue]=ne,ce=ue;else break e}}return Q}function s(q,Q){var ne=q.sortIndex-Q.sortIndex;return ne!==0?ne:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,p=null,m=3,y=!1,b=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=q)r(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function R(q){if(E=!1,N(q),!b)if(n(c)!==null)b=!0,De(M);else{var Q=n(d);Q!==null&&Ct(R,Q.startTime-q)}}function M(q,Q){b=!1,E&&(E=!1,k(x),x=-1),y=!0;var ne=m;try{for(N(Q),p=n(c);p!==null&&(!(p.expirationTime>Q)||q&&!A());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,m=p.priorityLevel;var he=ce(p.expirationTime<=Q);Q=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),N(Q)}else r(c);p=n(c)}if(p!==null)var Se=!0;else{var Je=n(d);Je!==null&&Ct(R,Je.startTime-Q),Se=!1}return Se}finally{p=null,m=ne,y=!1}}var V=!1,j=null,x=-1,S=5,_=-1;function A(){return!(t.unstable_now()-_<S)}function P(){if(j!==null){var q=t.unstable_now();_=q;var Q=!0;try{Q=j(!0,q)}finally{Q?I():(V=!1,j=null)}}else V=!1}var I;if(typeof w=="function")I=function(){w(P)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ee=Z.port2;Z.port1.onmessage=P,I=function(){ee.postMessage(null)}}else I=function(){C(P,0)};function De(q){j=q,V||(V=!0,I())}function Ct(q,Q){x=C(function(){q(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,De(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ne=m;m=Q;try{return q()}finally{m=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ne=m;m=q;try{return Q()}finally{m=ne}},t.unstable_scheduleCallback=function(q,Q,ne){var ce=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ce+ne:ce):ne=ce,q){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,q={id:h++,callback:Q,priorityLevel:q,startTime:ne,expirationTime:he,sortIndex:-1},ne>ce?(q.sortIndex=ne,e(d,q),n(c)===null&&q===n(d)&&(E?(k(x),x=-1):E=!0,Ct(R,ne-ce))):(q.sortIndex=he,e(c,q),b||y||(b=!0,De(M))),q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(q){var Q=m;return function(){var ne=m;m=Q;try{return q.apply(this,arguments)}finally{m=ne}}}})(A_);j_.exports=A_;var OC=j_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC=v,Tn=OC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P_=new Set,Rl={};function Wi(t,e){Qo(t,e),Qo(t+"Capture",e)}function Qo(t,e){for(Rl[t]=e,t=0;t<e.length;t++)P_.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,MC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uv={},zv={};function LC(t){return Op.call(zv,t)?!0:Op.call(Uv,t)?!1:MC.test(t)?zv[t]=!0:(Uv[t]=!0,!1)}function VC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FC(t,e,n,r){if(e===null||typeof e>"u"||VC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Og=/[\-:]([a-z])/g;function Dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Og,Dg);kt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Og,Dg);kt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Og,Dg);kt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mg(t,e,n,r){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FC(e,n,s,r)&&(n=null),r||s===null?LC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=DC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iu=Symbol.for("react.element"),bo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Lg=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),Vg=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),Fg=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),D_=Symbol.for("react.offscreen"),$v=Symbol.iterator;function $a(t){return t===null||typeof t!="object"?null:(t=$v&&t[$v]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Pf;function sl(t){if(Pf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pf=e&&e[1]||""}return`
`+Pf+t}var Rf=!1;function Of(t,e){if(!t||Rf)return"";Rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sl(t):""}function UC(t){switch(t.tag){case 5:return sl(t.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return t=Of(t.type,!1),t;case 11:return t=Of(t.type.render,!1),t;case 1:return t=Of(t.type,!0),t;default:return""}}function Vp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case bo:return"Portal";case Dp:return"Profiler";case Lg:return"StrictMode";case Mp:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O_:return(t.displayName||"Context")+".Consumer";case R_:return(t._context.displayName||"Context")+".Provider";case Vg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fg:return e=t.displayName||null,e!==null?e:Vp(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return Vp(t(e))}catch{}}return null}function zC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vp(e);case 8:return e===Lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $C(t){var e=M_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ou(t){t._valueTracker||(t._valueTracker=$C(t))}function L_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=M_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fp(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V_(t,e){e=e.checked,e!=null&&Mg(t,"checked",e,!1)}function Up(t,e){V_(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zp(t,e.type,n):e.hasOwnProperty("defaultValue")&&zp(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zp(t,e,n){(e!=="number"||dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var il=Array.isArray;function Oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(il(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function F_(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var au,z_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(au=au||document.createElement("div"),au.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=au.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BC=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){BC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function $_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function B_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(t,e){if(e){if(HC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function qp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wp=null;function Ug(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gp=null,Do=null,Mo=null;function Gv(t){if(t=gc(t)){if(typeof Gp!="function")throw Error($(280));var e=t.stateNode;e&&(e=fh(e),Gp(t.stateNode,t.type,e))}}function H_(t){Do?Mo?Mo.push(t):Mo=[t]:Do=t}function q_(){if(Do){var t=Do,e=Mo;if(Mo=Do=null,Gv(t),e)for(t=0;t<e.length;t++)Gv(e[t])}}function W_(t,e){return t(e)}function G_(){}var Df=!1;function K_(t,e,n){if(Df)return t(e,n);Df=!0;try{return W_(t,e,n)}finally{Df=!1,(Do!==null||Mo!==null)&&(G_(),q_())}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Kp=!1;if(Vr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Kp=!1}function qC(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ml=!1,hd=null,fd=!1,Qp=null,WC={onError:function(t){ml=!0,hd=t}};function GC(t,e,n,r,s,i,a,l,c){ml=!1,hd=null,qC.apply(WC,arguments)}function KC(t,e,n,r,s,i,a,l,c){if(GC.apply(this,arguments),ml){if(ml){var d=hd;ml=!1,hd=null}else throw Error($(198));fd||(fd=!0,Qp=d)}}function Gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kv(t){if(Gi(t)!==t)throw Error($(188))}function QC(t){var e=t.alternate;if(!e){if(e=Gi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kv(s),t;if(i===r)return Kv(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Y_(t){return t=QC(t),t!==null?X_(t):null}function X_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=X_(t);if(e!==null)return e;t=t.sibling}return null}var J_=Tn.unstable_scheduleCallback,Qv=Tn.unstable_cancelCallback,YC=Tn.unstable_shouldYield,XC=Tn.unstable_requestPaint,Ye=Tn.unstable_now,JC=Tn.unstable_getCurrentPriorityLevel,zg=Tn.unstable_ImmediatePriority,Z_=Tn.unstable_UserBlockingPriority,pd=Tn.unstable_NormalPriority,ZC=Tn.unstable_LowPriority,e1=Tn.unstable_IdlePriority,ch=null,ir=null;function eI(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(ch,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:rI,tI=Math.log,nI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var lu=64,cu=4194304;function ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function md(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ol(l):(i&=a,i!==0&&(r=ol(i)))}else a=n&~s,a!==0?r=ol(a):i!==0&&(r=ol(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),s=1<<n,r|=t[n],e&=~s;return r}function sI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Kn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=sI(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Yp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t1(){var t=lu;return lu<<=1,!(lu&4194240)&&(lu=64),t}function Mf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function oI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function n1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r1,Bg,s1,i1,o1,Xp=!1,uu=[],bs=null,_s=null,Es=null,Ml=new Map,Ll=new Map,as=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yv(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Ha(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gc(e),e!==null&&Bg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lI(t,e,n,r,s){switch(e){case"focusin":return bs=Ha(bs,t,e,n,r,s),!0;case"dragenter":return _s=Ha(_s,t,e,n,r,s),!0;case"mouseover":return Es=Ha(Es,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ml.set(i,Ha(Ml.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ll.set(i,Ha(Ll.get(i)||null,t,e,n,r,s)),!0}return!1}function a1(t){var e=_i(t.target);if(e!==null){var n=Gi(e);if(n!==null){if(e=n.tag,e===13){if(e=Q_(n),e!==null){t.blockedOn=e,o1(t.priority,function(){s1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wp=r,n.target.dispatchEvent(r),Wp=null}else return e=gc(n),e!==null&&Bg(e),t.blockedOn=n,!1;e.shift()}return!0}function Xv(t,e,n){Du(t)&&n.delete(e)}function cI(){Xp=!1,bs!==null&&Du(bs)&&(bs=null),_s!==null&&Du(_s)&&(_s=null),Es!==null&&Du(Es)&&(Es=null),Ml.forEach(Xv),Ll.forEach(Xv)}function qa(t,e){t.blockedOn===e&&(t.blockedOn=null,Xp||(Xp=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,cI)))}function Vl(t){function e(s){return qa(s,t)}if(0<uu.length){qa(uu[0],t);for(var n=1;n<uu.length;n++){var r=uu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&qa(bs,t),_s!==null&&qa(_s,t),Es!==null&&qa(Es,t),Ml.forEach(e),Ll.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)a1(n),n.blockedOn===null&&as.shift()}var Lo=Qr.ReactCurrentBatchConfig,gd=!0;function uI(t,e,n,r){var s=_e,i=Lo.transition;Lo.transition=null;try{_e=1,Hg(t,e,n,r)}finally{_e=s,Lo.transition=i}}function dI(t,e,n,r){var s=_e,i=Lo.transition;Lo.transition=null;try{_e=4,Hg(t,e,n,r)}finally{_e=s,Lo.transition=i}}function Hg(t,e,n,r){if(gd){var s=Jp(t,e,n,r);if(s===null)Wf(t,e,r,yd,n),Yv(t,r);else if(lI(s,t,e,n,r))r.stopPropagation();else if(Yv(t,r),e&4&&-1<aI.indexOf(t)){for(;s!==null;){var i=gc(s);if(i!==null&&r1(i),i=Jp(t,e,n,r),i===null&&Wf(t,e,r,yd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wf(t,e,r,null,n)}}var yd=null;function Jp(t,e,n,r){if(yd=null,t=Ug(r),t=_i(t),t!==null)if(e=Gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yd=t,null}function l1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JC()){case zg:return 1;case Z_:return 4;case pd:case ZC:return 16;case e1:return 536870912;default:return 16}default:return 16}}var ps=null,qg=null,Mu=null;function c1(){if(Mu)return Mu;var t,e=qg,n=e.length,r,s="value"in ps?ps.value:ps.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Mu=s.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function du(){return!0}function Jv(){return!1}function kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?du:Jv,this.isPropagationStopped=Jv,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),e}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wg=kn(pa),mc=Fe({},pa,{view:0,detail:0}),hI=kn(mc),Lf,Vf,Wa,uh=Fe({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wa&&(Wa&&t.type==="mousemove"?(Lf=t.screenX-Wa.screenX,Vf=t.screenY-Wa.screenY):Vf=Lf=0,Wa=t),Lf)},movementY:function(t){return"movementY"in t?t.movementY:Vf}}),Zv=kn(uh),fI=Fe({},uh,{dataTransfer:0}),pI=kn(fI),mI=Fe({},mc,{relatedTarget:0}),Ff=kn(mI),gI=Fe({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),yI=kn(gI),vI=Fe({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=kn(vI),wI=Fe({},pa,{data:0}),ex=kn(wI),bI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EI[t])?!!e[t]:!1}function Gg(){return TI}var SI=Fe({},mc,{key:function(t){if(t.key){var e=bI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_I[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kI=kn(SI),NI=Fe({},uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tx=kn(NI),CI=Fe({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),II=kn(CI),jI=Fe({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),AI=kn(jI),PI=Fe({},uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RI=kn(PI),OI=[9,13,27,32],Kg=Vr&&"CompositionEvent"in window,gl=null;Vr&&"documentMode"in document&&(gl=document.documentMode);var DI=Vr&&"TextEvent"in window&&!gl,u1=Vr&&(!Kg||gl&&8<gl&&11>=gl),nx=" ",rx=!1;function d1(t,e){switch(t){case"keyup":return OI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function MI(t,e){switch(t){case"compositionend":return h1(e);case"keypress":return e.which!==32?null:(rx=!0,nx);case"textInput":return t=e.data,t===nx&&rx?null:t;default:return null}}function LI(t,e){if(Eo)return t==="compositionend"||!Kg&&d1(t,e)?(t=c1(),Mu=qg=ps=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u1&&e.locale!=="ko"?null:e.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VI[t.type]:e==="textarea"}function f1(t,e,n,r){H_(r),e=vd(e,"onChange"),0<e.length&&(n=new Wg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Fl=null;function FI(t){T1(t,0)}function dh(t){var e=ko(t);if(L_(e))return t}function UI(t,e){if(t==="change")return e}var p1=!1;if(Vr){var Uf;if(Vr){var zf="oninput"in document;if(!zf){var ix=document.createElement("div");ix.setAttribute("oninput","return;"),zf=typeof ix.oninput=="function"}Uf=zf}else Uf=!1;p1=Uf&&(!document.documentMode||9<document.documentMode)}function ox(){yl&&(yl.detachEvent("onpropertychange",m1),Fl=yl=null)}function m1(t){if(t.propertyName==="value"&&dh(Fl)){var e=[];f1(e,Fl,t,Ug(t)),K_(FI,e)}}function zI(t,e,n){t==="focusin"?(ox(),yl=e,Fl=n,yl.attachEvent("onpropertychange",m1)):t==="focusout"&&ox()}function $I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dh(Fl)}function BI(t,e){if(t==="click")return dh(e)}function HI(t,e){if(t==="input"||t==="change")return dh(e)}function qI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:qI;function Ul(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Op.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function ax(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lx(t,e){var n=ax(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ax(n)}}function g1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y1(){for(var t=window,e=dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dd(t.document)}return e}function Qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WI(t){var e=y1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g1(n.ownerDocument.documentElement,n)){if(r!==null&&Qg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lx(n,i);var a=lx(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GI=Vr&&"documentMode"in document&&11>=document.documentMode,To=null,Zp=null,vl=null,em=!1;function cx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;em||To==null||To!==dd(r)||(r=To,"selectionStart"in r&&Qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Ul(vl,r)||(vl=r,r=vd(Zp,"onSelect"),0<r.length&&(e=new Wg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=To)))}function hu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var So={animationend:hu("Animation","AnimationEnd"),animationiteration:hu("Animation","AnimationIteration"),animationstart:hu("Animation","AnimationStart"),transitionend:hu("Transition","TransitionEnd")},$f={},v1={};Vr&&(v1=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function hh(t){if($f[t])return $f[t];if(!So[t])return t;var e=So[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v1)return $f[t]=e[n];return t}var x1=hh("animationend"),w1=hh("animationiteration"),b1=hh("animationstart"),_1=hh("transitionend"),E1=new Map,ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(t,e){E1.set(t,e),Wi(e,[t])}for(var Bf=0;Bf<ux.length;Bf++){var Hf=ux[Bf],KI=Hf.toLowerCase(),QI=Hf[0].toUpperCase()+Hf.slice(1);Qs(KI,"on"+QI)}Qs(x1,"onAnimationEnd");Qs(w1,"onAnimationIteration");Qs(b1,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(_1,"onTransitionEnd");Qo("onMouseEnter",["mouseout","mouseover"]);Qo("onMouseLeave",["mouseout","mouseover"]);Qo("onPointerEnter",["pointerout","pointerover"]);Qo("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function dx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KC(r,e,void 0,t),t.currentTarget=null}function T1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;dx(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;dx(s,l,d),i=c}}}if(fd)throw t=Qp,fd=!1,Qp=null,t}function Ce(t,e){var n=e[im];n===void 0&&(n=e[im]=new Set);var r=t+"__bubble";n.has(r)||(S1(e,t,2,!1),n.add(r))}function qf(t,e,n){var r=0;e&&(r|=4),S1(n,t,r,e)}var fu="_reactListening"+Math.random().toString(36).slice(2);function zl(t){if(!t[fu]){t[fu]=!0,P_.forEach(function(n){n!=="selectionchange"&&(YI.has(n)||qf(n,!1,t),qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fu]||(e[fu]=!0,qf("selectionchange",!1,e))}}function S1(t,e,n,r){switch(l1(e)){case 1:var s=uI;break;case 4:s=dI;break;default:s=Hg}n=s.bind(null,e,n,t),s=void 0,!Kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=_i(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}K_(function(){var d=i,h=Ug(n),p=[];e:{var m=E1.get(t);if(m!==void 0){var y=Wg,b=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":y=kI;break;case"focusin":b="focus",y=Ff;break;case"focusout":b="blur",y=Ff;break;case"beforeblur":case"afterblur":y=Ff;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=II;break;case x1:case w1:case b1:y=yI;break;case _1:y=AI;break;case"scroll":y=hI;break;case"wheel":y=RI;break;case"copy":case"cut":case"paste":y=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=tx}var E=(e&4)!==0,C=!E&&t==="scroll",k=E?m!==null?m+"Capture":null:m;E=[];for(var w=d,N;w!==null;){N=w;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,k!==null&&(R=Dl(w,k),R!=null&&E.push($l(w,R,N)))),C)break;w=w.return}0<E.length&&(m=new y(m,b,null,n,h),p.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Wp&&(b=n.relatedTarget||n.fromElement)&&(_i(b)||b[Fr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?_i(b):null,b!==null&&(C=Gi(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(E=Zv,R="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=tx,R="onPointerLeave",k="onPointerEnter",w="pointer"),C=y==null?m:ko(y),N=b==null?m:ko(b),m=new E(R,w+"leave",y,n,h),m.target=C,m.relatedTarget=N,R=null,_i(h)===d&&(E=new E(k,w+"enter",b,n,h),E.target=N,E.relatedTarget=C,R=E),C=R,y&&b)t:{for(E=y,k=b,w=0,N=E;N;N=uo(N))w++;for(N=0,R=k;R;R=uo(R))N++;for(;0<w-N;)E=uo(E),w--;for(;0<N-w;)k=uo(k),N--;for(;w--;){if(E===k||k!==null&&E===k.alternate)break t;E=uo(E),k=uo(k)}E=null}else E=null;y!==null&&hx(p,m,y,E,!1),b!==null&&C!==null&&hx(p,C,b,E,!0)}}e:{if(m=d?ko(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var M=UI;else if(sx(m))if(p1)M=HI;else{M=$I;var V=zI}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=BI);if(M&&(M=M(t,d))){f1(p,M,n,h);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&zp(m,"number",m.value)}switch(V=d?ko(d):window,t){case"focusin":(sx(V)||V.contentEditable==="true")&&(To=V,Zp=d,vl=null);break;case"focusout":vl=Zp=To=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,cx(p,n,h);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":cx(p,n,h)}var j;if(Kg)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Eo?d1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(u1&&n.locale!=="ko"&&(Eo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Eo&&(j=c1()):(ps=h,qg="value"in ps?ps.value:ps.textContent,Eo=!0)),V=vd(d,x),0<V.length&&(x=new ex(x,t,null,n,h),p.push({event:x,listeners:V}),j?x.data=j:(j=h1(n),j!==null&&(x.data=j)))),(j=DI?MI(t,n):LI(t,n))&&(d=vd(d,"onBeforeInput"),0<d.length&&(h=new ex("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=j))}T1(p,e)})}function $l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dl(t,n),i!=null&&r.unshift($l(t,i,s)),i=Dl(t,e),i!=null&&r.push($l(t,i,s))),t=t.return}return r}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hx(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Dl(n,i),c!=null&&a.unshift($l(n,c,l))):s||(c=Dl(n,i),c!=null&&a.push($l(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var XI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function fx(t){return(typeof t=="string"?t:""+t).replace(XI,`
`).replace(JI,"")}function pu(t,e,n){if(e=fx(e),fx(t)!==e&&n)throw Error($(425))}function xd(){}var tm=null,nm=null;function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,px=typeof Promise=="function"?Promise:void 0,ej=typeof queueMicrotask=="function"?queueMicrotask:typeof px<"u"?function(t){return px.resolve(null).then(t).catch(tj)}:sm;function tj(t){setTimeout(function(){throw t})}function Gf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vl(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),rr="__reactFiber$"+ma,Bl="__reactProps$"+ma,Fr="__reactContainer$"+ma,im="__reactEvents$"+ma,nj="__reactListeners$"+ma,rj="__reactHandles$"+ma;function _i(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mx(t);t!==null;){if(n=t[rr])return n;t=mx(t)}return e}t=n,n=t.parentNode}return null}function gc(t){return t=t[rr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function fh(t){return t[Bl]||null}var om=[],No=-1;function Ys(t){return{current:t}}function je(t){0>No||(t.current=om[No],om[No]=null,No--)}function Te(t,e){No++,om[No]=t.current,t.current=e}var Vs={},Ft=Ys(Vs),cn=Ys(!1),Oi=Vs;function Yo(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function un(t){return t=t.childContextTypes,t!=null}function wd(){je(cn),je(Ft)}function gx(t,e,n){if(Ft.current!==Vs)throw Error($(168));Te(Ft,e),Te(cn,n)}function k1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,zC(t)||"Unknown",s));return Fe({},n,r)}function bd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,Oi=Ft.current,Te(Ft,t),Te(cn,cn.current),!0}function yx(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=k1(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,je(cn),je(Ft),Te(Ft,t)):je(cn),Te(cn,n)}var Cr=null,ph=!1,Kf=!1;function N1(t){Cr===null?Cr=[t]:Cr.push(t)}function sj(t){ph=!0,N1(t)}function Xs(){if(!Kf&&Cr!==null){Kf=!0;var t=0,e=_e;try{var n=Cr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cr=null,ph=!1}catch(s){throw Cr!==null&&(Cr=Cr.slice(t+1)),J_(zg,Xs),s}finally{_e=e,Kf=!1}}return null}var Co=[],Io=0,_d=null,Ed=0,In=[],jn=0,Di=null,Ar=1,Pr="";function gi(t,e){Co[Io++]=Ed,Co[Io++]=_d,_d=t,Ed=e}function C1(t,e,n){In[jn++]=Ar,In[jn++]=Pr,In[jn++]=Di,Di=t;var r=Ar;t=Pr;var s=32-Kn(r)-1;r&=~(1<<s),n+=1;var i=32-Kn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ar=1<<32-Kn(e)+s|n<<s|r,Pr=i+t}else Ar=1<<i|n<<s|r,Pr=t}function Yg(t){t.return!==null&&(gi(t,1),C1(t,1,0))}function Xg(t){for(;t===_d;)_d=Co[--Io],Co[Io]=null,Ed=Co[--Io],Co[Io]=null;for(;t===Di;)Di=In[--jn],In[jn]=null,Pr=In[--jn],In[jn]=null,Ar=In[--jn],In[jn]=null}var _n=null,xn=null,Oe=!1,qn=null;function I1(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,xn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Di!==null?{id:Ar,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,xn=null,!0):!1;default:return!1}}function am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lm(t){if(Oe){var e=xn;if(e){var n=e;if(!vx(t,e)){if(am(t))throw Error($(418));e=Ts(n.nextSibling);var r=_n;e&&vx(t,e)?I1(r,n):(t.flags=t.flags&-4097|2,Oe=!1,_n=t)}}else{if(am(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,_n=t}}}function xx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function mu(t){if(t!==_n)return!1;if(!Oe)return xx(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rm(t.type,t.memoizedProps)),e&&(e=xn)){if(am(t))throw j1(),Error($(418));for(;e;)I1(t,e),e=Ts(e.nextSibling)}if(xx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=_n?Ts(t.stateNode.nextSibling):null;return!0}function j1(){for(var t=xn;t;)t=Ts(t.nextSibling)}function Xo(){xn=_n=null,Oe=!1}function Jg(t){qn===null?qn=[t]:qn.push(t)}var ij=Qr.ReactCurrentBatchConfig;function Ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function gu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wx(t){var e=t._init;return e(t._payload)}function A1(t){function e(k,w){if(t){var N=k.deletions;N===null?(k.deletions=[w],k.flags|=16):N.push(w)}}function n(k,w){if(!t)return null;for(;w!==null;)e(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function s(k,w){return k=Cs(k,w),k.index=0,k.sibling=null,k}function i(k,w,N){return k.index=N,t?(N=k.alternate,N!==null?(N=N.index,N<w?(k.flags|=2,w):N):(k.flags|=2,w)):(k.flags|=1048576,w)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,w,N,R){return w===null||w.tag!==6?(w=tp(N,k.mode,R),w.return=k,w):(w=s(w,N),w.return=k,w)}function c(k,w,N,R){var M=N.type;return M===_o?h(k,w,N.props.children,R,N.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===is&&wx(M)===w.type)?(R=s(w,N.props),R.ref=Ga(k,w,N),R.return=k,R):(R=Hu(N.type,N.key,N.props,null,k.mode,R),R.ref=Ga(k,w,N),R.return=k,R)}function d(k,w,N,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=np(N,k.mode,R),w.return=k,w):(w=s(w,N.children||[]),w.return=k,w)}function h(k,w,N,R,M){return w===null||w.tag!==7?(w=Ii(N,k.mode,R,M),w.return=k,w):(w=s(w,N),w.return=k,w)}function p(k,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tp(""+w,k.mode,N),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case iu:return N=Hu(w.type,w.key,w.props,null,k.mode,N),N.ref=Ga(k,null,w),N.return=k,N;case bo:return w=np(w,k.mode,N),w.return=k,w;case is:var R=w._init;return p(k,R(w._payload),N)}if(il(w)||$a(w))return w=Ii(w,k.mode,N,null),w.return=k,w;gu(k,w)}return null}function m(k,w,N,R){var M=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:l(k,w,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case iu:return N.key===M?c(k,w,N,R):null;case bo:return N.key===M?d(k,w,N,R):null;case is:return M=N._init,m(k,w,M(N._payload),R)}if(il(N)||$a(N))return M!==null?null:h(k,w,N,R,null);gu(k,N)}return null}function y(k,w,N,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return k=k.get(N)||null,l(w,k,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case iu:return k=k.get(R.key===null?N:R.key)||null,c(w,k,R,M);case bo:return k=k.get(R.key===null?N:R.key)||null,d(w,k,R,M);case is:var V=R._init;return y(k,w,N,V(R._payload),M)}if(il(R)||$a(R))return k=k.get(N)||null,h(w,k,R,M,null);gu(w,R)}return null}function b(k,w,N,R){for(var M=null,V=null,j=w,x=w=0,S=null;j!==null&&x<N.length;x++){j.index>x?(S=j,j=null):S=j.sibling;var _=m(k,j,N[x],R);if(_===null){j===null&&(j=S);break}t&&j&&_.alternate===null&&e(k,j),w=i(_,w,x),V===null?M=_:V.sibling=_,V=_,j=S}if(x===N.length)return n(k,j),Oe&&gi(k,x),M;if(j===null){for(;x<N.length;x++)j=p(k,N[x],R),j!==null&&(w=i(j,w,x),V===null?M=j:V.sibling=j,V=j);return Oe&&gi(k,x),M}for(j=r(k,j);x<N.length;x++)S=y(j,k,x,N[x],R),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?x:S.key),w=i(S,w,x),V===null?M=S:V.sibling=S,V=S);return t&&j.forEach(function(A){return e(k,A)}),Oe&&gi(k,x),M}function E(k,w,N,R){var M=$a(N);if(typeof M!="function")throw Error($(150));if(N=M.call(N),N==null)throw Error($(151));for(var V=M=null,j=w,x=w=0,S=null,_=N.next();j!==null&&!_.done;x++,_=N.next()){j.index>x?(S=j,j=null):S=j.sibling;var A=m(k,j,_.value,R);if(A===null){j===null&&(j=S);break}t&&j&&A.alternate===null&&e(k,j),w=i(A,w,x),V===null?M=A:V.sibling=A,V=A,j=S}if(_.done)return n(k,j),Oe&&gi(k,x),M;if(j===null){for(;!_.done;x++,_=N.next())_=p(k,_.value,R),_!==null&&(w=i(_,w,x),V===null?M=_:V.sibling=_,V=_);return Oe&&gi(k,x),M}for(j=r(k,j);!_.done;x++,_=N.next())_=y(j,k,x,_.value,R),_!==null&&(t&&_.alternate!==null&&j.delete(_.key===null?x:_.key),w=i(_,w,x),V===null?M=_:V.sibling=_,V=_);return t&&j.forEach(function(P){return e(k,P)}),Oe&&gi(k,x),M}function C(k,w,N,R){if(typeof N=="object"&&N!==null&&N.type===_o&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case iu:e:{for(var M=N.key,V=w;V!==null;){if(V.key===M){if(M=N.type,M===_o){if(V.tag===7){n(k,V.sibling),w=s(V,N.props.children),w.return=k,k=w;break e}}else if(V.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===is&&wx(M)===V.type){n(k,V.sibling),w=s(V,N.props),w.ref=Ga(k,V,N),w.return=k,k=w;break e}n(k,V);break}else e(k,V);V=V.sibling}N.type===_o?(w=Ii(N.props.children,k.mode,R,N.key),w.return=k,k=w):(R=Hu(N.type,N.key,N.props,null,k.mode,R),R.ref=Ga(k,w,N),R.return=k,k=R)}return a(k);case bo:e:{for(V=N.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(k,w.sibling),w=s(w,N.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else e(k,w);w=w.sibling}w=np(N,k.mode,R),w.return=k,k=w}return a(k);case is:return V=N._init,C(k,w,V(N._payload),R)}if(il(N))return b(k,w,N,R);if($a(N))return E(k,w,N,R);gu(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(k,w.sibling),w=s(w,N),w.return=k,k=w):(n(k,w),w=tp(N,k.mode,R),w.return=k,k=w),a(k)):n(k,w)}return C}var Jo=A1(!0),P1=A1(!1),Td=Ys(null),Sd=null,jo=null,Zg=null;function e0(){Zg=jo=Sd=null}function t0(t){var e=Td.current;je(Td),t._currentValue=e}function cm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vo(t,e){Sd=t,Zg=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Zg!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(Sd===null)throw Error($(308));jo=t,Sd.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var Ei=null;function n0(t){Ei===null?Ei=[t]:Ei.push(t)}function R1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,n0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var os=!1;function r0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,n0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function Vu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}function bx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kd(t,e,n,r){var s=t.updateQueue;os=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,E=l;switch(m=e,y=n,E.tag){case 1:if(b=E.payload,typeof b=="function"){p=b.call(y,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=E.payload,m=typeof b=="function"?b.call(y,p,m):b,m==null)break e;p=Fe({},p,m);break e;case 2:os=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=p):h=h.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Li|=a,t.lanes=a,t.memoizedState=p}}function _x(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var yc={},or=Ys(yc),Hl=Ys(yc),ql=Ys(yc);function Ti(t){if(t===yc)throw Error($(174));return t}function s0(t,e){switch(Te(ql,e),Te(Hl,t),Te(or,yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bp(e,t)}je(or),Te(or,e)}function Zo(){je(or),je(Hl),je(ql)}function D1(t){Ti(ql.current);var e=Ti(or.current),n=Bp(e,t.type);e!==n&&(Te(Hl,t),Te(or,n))}function i0(t){Hl.current===t&&(je(or),je(Hl))}var Me=Ys(0);function Nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qf=[];function o0(){for(var t=0;t<Qf.length;t++)Qf[t]._workInProgressVersionPrimary=null;Qf.length=0}var Fu=Qr.ReactCurrentDispatcher,Yf=Qr.ReactCurrentBatchConfig,Mi=0,Ve=null,lt=null,pt=null,Cd=!1,xl=!1,Wl=0,oj=0;function At(){throw Error($(321))}function a0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function l0(t,e,n,r,s,i){if(Mi=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fu.current=t===null||t.memoizedState===null?uj:dj,t=n(r,s),xl){i=0;do{if(xl=!1,Wl=0,25<=i)throw Error($(301));i+=1,pt=lt=null,e.updateQueue=null,Fu.current=hj,t=n(r,s)}while(xl)}if(Fu.current=Id,e=lt!==null&&lt.next!==null,Mi=0,pt=lt=Ve=null,Cd=!1,e)throw Error($(300));return t}function c0(){var t=Wl!==0;return Wl=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ve.memoizedState=pt=t:pt=pt.next=t,pt}function Ln(){if(lt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=pt===null?Ve.memoizedState:pt.next;if(e!==null)pt=e,lt=t;else{if(t===null)throw Error($(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?Ve.memoizedState=pt=t:pt=pt.next=t}return pt}function Gl(t,e){return typeof e=="function"?e(t):e}function Xf(t){var e=Ln(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Mi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,a=r):c=c.next=p,Ve.lanes|=h,Li|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,Yn(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,Li|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jf(t){var e=Ln(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Yn(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function M1(){}function L1(t,e){var n=Ve,r=Ln(),s=e(),i=!Yn(r.memoizedState,s);if(i&&(r.memoizedState=s,an=!0),r=r.queue,u0(U1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Kl(9,F1.bind(null,n,r,s,e),void 0,null),gt===null)throw Error($(349));Mi&30||V1(n,e,s)}return s}function V1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function F1(t,e,n,r){e.value=n,e.getSnapshot=r,z1(e)&&$1(t)}function U1(t,e,n){return n(function(){z1(e)&&$1(t)})}function z1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function $1(t){var e=Ur(t,1);e!==null&&Qn(e,t,1,-1)}function Ex(t){var e=tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:t},e.queue=t,t=t.dispatch=cj.bind(null,Ve,t),[e.memoizedState,t]}function Kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function B1(){return Ln().memoizedState}function Uu(t,e,n,r){var s=tr();Ve.flags|=t,s.memoizedState=Kl(1|e,n,void 0,r===void 0?null:r)}function mh(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(lt!==null){var a=lt.memoizedState;if(i=a.destroy,r!==null&&a0(r,a.deps)){s.memoizedState=Kl(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=Kl(1|e,n,i,r)}function Tx(t,e){return Uu(8390656,8,t,e)}function u0(t,e){return mh(2048,8,t,e)}function H1(t,e){return mh(4,2,t,e)}function q1(t,e){return mh(4,4,t,e)}function W1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G1(t,e,n){return n=n!=null?n.concat([t]):null,mh(4,4,W1.bind(null,e,t),n)}function d0(){}function K1(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&a0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q1(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&a0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Y1(t,e,n){return Mi&21?(Yn(n,e)||(n=t1(),Ve.lanes|=n,Li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function aj(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Yf.transition;Yf.transition={};try{t(!1),e()}finally{_e=n,Yf.transition=r}}function X1(){return Ln().memoizedState}function lj(t,e,n){var r=Ns(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J1(t))Z1(e,n);else if(n=R1(t,e,n,r),n!==null){var s=Gt();Qn(n,t,r,s),e2(n,e,r)}}function cj(t,e,n){var r=Ns(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J1(t))Z1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Yn(l,a)){var c=e.interleaved;c===null?(s.next=s,n0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=R1(t,e,s,r),n!==null&&(s=Gt(),Qn(n,t,r,s),e2(n,e,r))}}function J1(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function Z1(t,e){xl=Cd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}var Id={readContext:Mn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},uj={readContext:Mn,useCallback:function(t,e){return tr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Tx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uu(4194308,4,W1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uu(4,2,t,e)},useMemo:function(t,e){var n=tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lj.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=tr();return t={current:t},e.memoizedState=t},useState:Ex,useDebugValue:d0,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=Ex(!1),e=t[0];return t=aj.bind(null,t[1]),tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=tr();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),gt===null)throw Error($(349));Mi&30||V1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tx(U1.bind(null,r,i,t),[t]),r.flags|=2048,Kl(9,F1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tr(),e=gt.identifierPrefix;if(Oe){var n=Pr,r=Ar;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dj={readContext:Mn,useCallback:K1,useContext:Mn,useEffect:u0,useImperativeHandle:G1,useInsertionEffect:H1,useLayoutEffect:q1,useMemo:Q1,useReducer:Xf,useRef:B1,useState:function(){return Xf(Gl)},useDebugValue:d0,useDeferredValue:function(t){var e=Ln();return Y1(e,lt.memoizedState,t)},useTransition:function(){var t=Xf(Gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:M1,useSyncExternalStore:L1,useId:X1,unstable_isNewReconciler:!1},hj={readContext:Mn,useCallback:K1,useContext:Mn,useEffect:u0,useImperativeHandle:G1,useInsertionEffect:H1,useLayoutEffect:q1,useMemo:Q1,useReducer:Jf,useRef:B1,useState:function(){return Jf(Gl)},useDebugValue:d0,useDeferredValue:function(t){var e=Ln();return lt===null?e.memoizedState=t:Y1(e,lt.memoizedState,t)},useTransition:function(){var t=Jf(Gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:M1,useSyncExternalStore:L1,useId:X1,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function um(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gh={isMounted:function(t){return(t=t._reactInternals)?Gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),s=Ns(t),i=Dr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(Qn(e,t,s,r),Vu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),s=Ns(t),i=Dr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(Qn(e,t,s,r),Vu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=Ns(t),s=Dr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(Qn(e,t,r,n),Vu(e,t,r))}};function Sx(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ul(n,r)||!Ul(s,i):!0}function t2(t,e,n){var r=!1,s=Vs,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=un(e)?Oi:Ft.current,r=e.contextTypes,i=(r=r!=null)?Yo(t,s):Vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function kx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gh.enqueueReplaceState(e,e.state,null)}function dm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},r0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=un(e)?Oi:Ft.current,s.context=Yo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(um(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gh.enqueueReplaceState(s,s.state,null),kd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",r=e;do n+=UC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fj=typeof WeakMap=="function"?WeakMap:Map;function n2(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ad||(Ad=!0,_m=r),hm(t,e)},n}function r2(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hm(t,e),typeof r!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Nx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Nj.bind(null,t,e,n),e.then(t,t))}function Cx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ix(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var pj=Qr.ReactCurrentOwner,an=!1;function qt(t,e,n,r){e.child=t===null?P1(e,null,n,r):Jo(e,t.child,n,r)}function jx(t,e,n,r,s){n=n.render;var i=e.ref;return Vo(e,s),r=l0(t,e,n,r,i,s),n=c0(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(Oe&&n&&Yg(e),e.flags|=1,qt(t,e,r,s),e.child)}function Ax(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!x0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,s2(t,e,i,r,s)):(t=Hu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ul,n(a,r)&&t.ref===e.ref)return zr(t,e,s)}return e.flags|=1,t=Cs(i,r),t.ref=e.ref,t.return=e,e.child=t}function s2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ul(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,zr(t,e,s)}return fm(t,e,n,r,s)}function i2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Po,gn),gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Po,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Po,gn),gn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Po,gn),gn|=r;return qt(t,e,s,n),e.child}function o2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fm(t,e,n,r,s){var i=un(n)?Oi:Ft.current;return i=Yo(e,i),Vo(e,s),n=l0(t,e,n,r,i,s),r=c0(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(Oe&&r&&Yg(e),e.flags|=1,qt(t,e,n,s),e.child)}function Px(t,e,n,r,s){if(un(n)){var i=!0;bd(e)}else i=!1;if(Vo(e,s),e.stateNode===null)zu(t,e),t2(e,n,r),dm(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=un(n)?Oi:Ft.current,d=Yo(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&kx(e,a,r,d),os=!1;var m=e.memoizedState;a.state=m,kd(e,r,a,s),c=e.memoizedState,l!==r||m!==c||cn.current||os?(typeof h=="function"&&(um(e,n,h,r),c=e.memoizedState),(l=os||Sx(e,n,l,r,m,c,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,O1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:$n(e.type,l),a.props=d,p=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=un(n)?Oi:Ft.current,c=Yo(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||m!==c)&&kx(e,a,r,c),os=!1,m=e.memoizedState,a.state=m,kd(e,r,a,s);var b=e.memoizedState;l!==p||m!==b||cn.current||os?(typeof y=="function"&&(um(e,n,y,r),b=e.memoizedState),(d=os||Sx(e,n,d,r,m,b,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return pm(t,e,n,r,i,s)}function pm(t,e,n,r,s,i){o2(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&yx(e,n,!1),zr(t,e,i);r=e.stateNode,pj.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Jo(e,t.child,null,i),e.child=Jo(e,null,l,i)):qt(t,e,l,i),e.memoizedState=r.state,s&&yx(e,n,!0),e.child}function a2(t){var e=t.stateNode;e.pendingContext?gx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gx(t,e.context,!1),s0(t,e.containerInfo)}function Rx(t,e,n,r,s){return Xo(),Jg(s),e.flags|=256,qt(t,e,n,r),e.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function l2(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Me,s&1),t===null)return lm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=xh(a,r,0,null),t=Ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gm(n),e.memoizedState=mm,t):h0(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return mj(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Cs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Cs(l,i):(i=Ii(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?gm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=mm,r}return i=t.child,t=i.sibling,r=Cs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function h0(t,e){return e=xh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yu(t,e,n,r){return r!==null&&Jg(r),Jo(e,t.child,null,n),t=h0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mj(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Zf(Error($(422))),yu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xh({mode:"visible",children:r.children},s,0,null),i=Ii(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Jo(e,t.child,null,a),e.child.memoizedState=gm(a),e.memoizedState=mm,i);if(!(e.mode&1))return yu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Zf(i,r,void 0),yu(t,e,a,r)}if(l=(a&t.childLanes)!==0,an||l){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),Qn(r,t,s,-1))}return v0(),r=Zf(Error($(421))),yu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Cj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xn=Ts(s.nextSibling),_n=e,Oe=!0,qn=null,t!==null&&(In[jn++]=Ar,In[jn++]=Pr,In[jn++]=Di,Ar=t.id,Pr=t.overflow,Di=e),e=h0(e,r.children),e.flags|=4096,e)}function Ox(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cm(t.return,e,n)}function ep(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function c2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ox(t,n,e);else if(t.tag===19)Ox(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ep(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ep(e,!0,n,null,i);break;case"together":ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gj(t,e,n){switch(e.tag){case 3:a2(e),Xo();break;case 5:D1(e);break;case 1:un(e.type)&&bd(e);break;case 4:s0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Td,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?l2(t,e,n):(Te(Me,Me.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Te(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,i2(t,e,n)}return zr(t,e,n)}var u2,ym,d2,h2;u2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ym=function(){};d2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ti(or.current);var i=null;switch(n){case"input":s=Fp(t,s),r=Fp(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=$p(t,s),r=$p(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xd)}Hp(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ce("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};h2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ka(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yj(t,e,n){var r=e.pendingProps;switch(Xg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return un(e.type)&&wd(),Pt(e),null;case 3:return r=e.stateNode,Zo(),je(cn),je(Ft),o0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Sm(qn),qn=null))),ym(t,e),Pt(e),null;case 5:i0(e);var s=Ti(ql.current);if(n=e.type,t!==null&&e.stateNode!=null)d2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Pt(e),null}if(t=Ti(or.current),mu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[rr]=e,r[Bl]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<al.length;s++)Ce(al[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Bv(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":qv(r,i),Ce("invalid",r)}Hp(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&pu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&pu(r.textContent,l,t),s=["children",""+l]):Rl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":ou(r),Hv(r,i,!0);break;case"textarea":ou(r),Wv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[rr]=e,t[Bl]=r,u2(t,e,!1,!1),e.stateNode=t;e:{switch(a=qp(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<al.length;s++)Ce(al[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":Bv(t,r),s=Fp(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":qv(t,r),s=$p(t,r),Ce("invalid",t);break;default:s=r}Hp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?B_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ol(t,c):typeof c=="number"&&Ol(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&Mg(t,i,c,a))}switch(n){case"input":ou(t),Hv(t,r,!1);break;case"textarea":ou(t),Wv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)h2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ti(ql.current),Ti(or.current),mu(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(i=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:pu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return Pt(e),null;case 13:if(je(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&xn!==null&&e.mode&1&&!(e.flags&128))j1(),Xo(),e.flags|=98560,i=!1;else if(i=mu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[rr]=e}else Xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else qn!==null&&(Sm(qn),qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?ut===0&&(ut=3):v0())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Zo(),ym(t,e),t===null&&zl(e.stateNode.containerInfo),Pt(e),null;case 10:return t0(e.type._context),Pt(e),null;case 17:return un(e.type)&&wd(),Pt(e),null;case 19:if(je(Me),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ka(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Nd(t),a!==null){for(e.flags|=128,Ka(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>ta&&(e.flags|=128,r=!0,Ka(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ka(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Oe)return Pt(e),null}else 2*Ye()-i.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,r=!0,Ka(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=Me.current,Te(Me,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return y0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function vj(t,e){switch(Xg(e),e.tag){case 1:return un(e.type)&&wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zo(),je(cn),je(Ft),o0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return i0(e),null;case 13:if(je(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Me),null;case 4:return Zo(),null;case 10:return t0(e.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var vu=!1,Mt=!1,xj=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function vm(t,e,n){try{n()}catch(r){He(t,e,r)}}var Dx=!1;function wj(t,e){if(tm=gd,t=y1(),Qg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==i||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nm={focusedElem:t,selectionRange:n},gd=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,C=b.memoizedState,k=e.stateNode,w=k.getSnapshotBeforeUpdate(e.elementType===e.type?E:$n(e.type,E),C);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){He(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return b=Dx,Dx=!1,b}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vm(e,n,i)}s=s.next}while(s!==r)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f2(t){var e=t.alternate;e!==null&&(t.alternate=null,f2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[Bl],delete e[im],delete e[nj],delete e[rj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p2(t){return t.tag===5||t.tag===3||t.tag===4}function Mx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xd));else if(r!==4&&(t=t.child,t!==null))for(wm(t,e,n),t=t.sibling;t!==null;)wm(t,e,n),t=t.sibling}function bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}var _t=null,Bn=!1;function ts(t,e,n){for(n=n.child;n!==null;)m2(t,e,n),n=n.sibling}function m2(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(ch,n)}catch{}switch(n.tag){case 5:Mt||Ao(n,e);case 6:var r=_t,s=Bn;_t=null,ts(t,e,n),_t=r,Bn=s,_t!==null&&(Bn?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Bn?(t=_t,n=n.stateNode,t.nodeType===8?Gf(t.parentNode,n):t.nodeType===1&&Gf(t,n),Vl(t)):Gf(_t,n.stateNode));break;case 4:r=_t,s=Bn,_t=n.stateNode.containerInfo,Bn=!0,ts(t,e,n),_t=r,Bn=s;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&vm(n,e,a),s=s.next}while(s!==r)}ts(t,e,n);break;case 1:if(!Mt&&(Ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,ts(t,e,n),Mt=r):ts(t,e,n);break;default:ts(t,e,n)}}function Lx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xj),e.forEach(function(r){var s=Ij.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,Bn=!1;break e;case 3:_t=l.stateNode.containerInfo,Bn=!0;break e;case 4:_t=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(_t===null)throw Error($(160));m2(i,a,s),_t=null,Bn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){He(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g2(e,t),e=e.sibling}function g2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),er(t),r&4){try{wl(3,t,t.return),yh(3,t)}catch(E){He(t,t.return,E)}try{wl(5,t,t.return)}catch(E){He(t,t.return,E)}}break;case 1:zn(e,t),er(t),r&512&&n!==null&&Ao(n,n.return);break;case 5:if(zn(e,t),er(t),r&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{Ol(s,"")}catch(E){He(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&V_(s,i),qp(l,a);var d=qp(l,i);for(a=0;a<c.length;a+=2){var h=c[a],p=c[a+1];h==="style"?B_(s,p):h==="dangerouslySetInnerHTML"?z_(s,p):h==="children"?Ol(s,p):Mg(s,h,p,d)}switch(l){case"input":Up(s,i);break;case"textarea":F_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Oo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Oo(s,!!i.multiple,i.defaultValue,!0):Oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bl]=i}catch(E){He(t,t.return,E)}}break;case 6:if(zn(e,t),er(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){He(t,t.return,E)}}break;case 3:if(zn(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vl(e.containerInfo)}catch(E){He(t,t.return,E)}break;case 4:zn(e,t),er(t);break;case 13:zn(e,t),er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(m0=Ye())),r&4&&Lx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(d=Mt)||h,zn(e,t),Mt=d):zn(e,t),er(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(m=K,y=m.child,m.tag){case 0:case 11:case 14:case 15:wl(4,m,m.return);break;case 1:Ao(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(E){He(r,n,E)}}break;case 5:Ao(m,m.return);break;case 22:if(m.memoizedState!==null){Fx(p);continue}}y!==null?(y.return=m,K=y):Fx(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$_("display",a))}catch(E){He(t,t.return,E)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(E){He(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:zn(e,t),er(t),r&4&&Lx(t);break;case 21:break;default:zn(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p2(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ol(s,""),r.flags&=-33);var i=Mx(t);bm(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Mx(t);wm(t,l,a);break;default:throw Error($(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bj(t,e,n){K=t,y2(t)}function y2(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||vu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Mt;l=vu;var d=Mt;if(vu=a,(Mt=c)&&!d)for(K=s;K!==null;)a=K,c=a.child,a.tag===22&&a.memoizedState!==null?Ux(s):c!==null?(c.return=a,K=c):Ux(s);for(;i!==null;)K=i,y2(i),i=i.sibling;K=s,vu=l,Mt=d}Vx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Vx(t)}}function Vx(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_x(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_x(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Vl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Mt||e.flags&512&&xm(e)}catch(m){He(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Fx(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Ux(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(c){He(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){He(e,s,c)}}var i=e.return;try{xm(e)}catch(c){He(e,i,c)}break;case 5:var a=e.return;try{xm(e)}catch(c){He(e,a,c)}}}catch(c){He(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var _j=Math.ceil,jd=Qr.ReactCurrentDispatcher,f0=Qr.ReactCurrentOwner,Dn=Qr.ReactCurrentBatchConfig,ve=0,gt=null,tt=null,St=0,gn=0,Po=Ys(0),ut=0,Ql=null,Li=0,vh=0,p0=0,bl=null,sn=null,m0=0,ta=1/0,Nr=null,Ad=!1,_m=null,ks=null,xu=!1,ms=null,Pd=0,_l=0,Em=null,$u=-1,Bu=0;function Gt(){return ve&6?Ye():$u!==-1?$u:$u=Ye()}function Ns(t){return t.mode&1?ve&2&&St!==0?St&-St:ij.transition!==null?(Bu===0&&(Bu=t1()),Bu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:l1(t.type)),t):1}function Qn(t,e,n,r){if(50<_l)throw _l=0,Em=null,Error($(185));pc(t,n,r),(!(ve&2)||t!==gt)&&(t===gt&&(!(ve&2)&&(vh|=n),ut===4&&ls(t,St)),dn(t,r),n===1&&ve===0&&!(e.mode&1)&&(ta=Ye()+500,ph&&Xs()))}function dn(t,e){var n=t.callbackNode;iI(t,e);var r=md(t,t===gt?St:0);if(r===0)n!==null&&Qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qv(n),e===1)t.tag===0?sj(zx.bind(null,t)):N1(zx.bind(null,t)),ej(function(){!(ve&6)&&Xs()}),n=null;else{switch(n1(r)){case 1:n=zg;break;case 4:n=Z_;break;case 16:n=pd;break;case 536870912:n=e1;break;default:n=pd}n=S2(n,v2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function v2(t,e){if($u=-1,Bu=0,ve&6)throw Error($(327));var n=t.callbackNode;if(Fo()&&t.callbackNode!==n)return null;var r=md(t,t===gt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rd(t,r);else{e=r;var s=ve;ve|=2;var i=w2();(gt!==t||St!==e)&&(Nr=null,ta=Ye()+500,Ci(t,e));do try{Sj();break}catch(l){x2(t,l)}while(!0);e0(),jd.current=i,ve=s,tt!==null?e=0:(gt=null,St=0,e=ut)}if(e!==0){if(e===2&&(s=Yp(t),s!==0&&(r=s,e=Tm(t,s))),e===1)throw n=Ql,Ci(t,0),ls(t,r),dn(t,Ye()),n;if(e===6)ls(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ej(s)&&(e=Rd(t,r),e===2&&(i=Yp(t),i!==0&&(r=i,e=Tm(t,i))),e===1))throw n=Ql,Ci(t,0),ls(t,r),dn(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:yi(t,sn,Nr);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=m0+500-Ye(),10<e)){if(md(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sm(yi.bind(null,t,sn,Nr),e);break}yi(t,sn,Nr);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Kn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_j(r/1960))-r,10<r){t.timeoutHandle=sm(yi.bind(null,t,sn,Nr),r);break}yi(t,sn,Nr);break;case 5:yi(t,sn,Nr);break;default:throw Error($(329))}}}return dn(t,Ye()),t.callbackNode===n?v2.bind(null,t):null}function Tm(t,e){var n=bl;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=Rd(t,e),t!==2&&(e=sn,sn=n,e!==null&&Sm(e)),t}function Sm(t){sn===null?sn=t:sn.push.apply(sn,t)}function Ej(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~p0,e&=~vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function zx(t){if(ve&6)throw Error($(327));Fo();var e=md(t,0);if(!(e&1))return dn(t,Ye()),null;var n=Rd(t,e);if(t.tag!==0&&n===2){var r=Yp(t);r!==0&&(e=r,n=Tm(t,r))}if(n===1)throw n=Ql,Ci(t,0),ls(t,e),dn(t,Ye()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,sn,Nr),dn(t,Ye()),null}function g0(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ta=Ye()+500,ph&&Xs())}}function Vi(t){ms!==null&&ms.tag===0&&!(ve&6)&&Fo();var e=ve;ve|=1;var n=Dn.transition,r=_e;try{if(Dn.transition=null,_e=1,t)return t()}finally{_e=r,Dn.transition=n,ve=e,!(ve&6)&&Xs()}}function y0(){gn=Po.current,je(Po)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZI(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Xg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wd();break;case 3:Zo(),je(cn),je(Ft),o0();break;case 5:i0(r);break;case 4:Zo();break;case 13:je(Me);break;case 19:je(Me);break;case 10:t0(r.type._context);break;case 22:case 23:y0()}n=n.return}if(gt=t,tt=t=Cs(t.current,null),St=gn=e,ut=0,Ql=null,p0=vh=Li=0,sn=bl=null,Ei!==null){for(e=0;e<Ei.length;e++)if(n=Ei[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ei=null}return t}function x2(t,e){do{var n=tt;try{if(e0(),Fu.current=Id,Cd){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cd=!1}if(Mi=0,pt=lt=Ve=null,xl=!1,Wl=0,f0.current=null,n===null||n.return===null){ut=1,Ql=e,tt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Cx(a);if(y!==null){y.flags&=-257,Ix(y,a,l,i,e),y.mode&1&&Nx(i,d,e),e=y,c=d;var b=e.updateQueue;if(b===null){var E=new Set;E.add(c),e.updateQueue=E}else b.add(c);break e}else{if(!(e&1)){Nx(i,d,e),v0();break e}c=Error($(426))}}else if(Oe&&l.mode&1){var C=Cx(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ix(C,a,l,i,e),Jg(ea(c,l));break e}}i=c=ea(c,l),ut!==4&&(ut=2),bl===null?bl=[i]:bl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var k=n2(i,c,e);bx(i,k);break e;case 1:l=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ks===null||!ks.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=r2(i,l,e);bx(i,R);break e}}i=i.return}while(i!==null)}_2(n)}catch(M){e=M,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function w2(){var t=jd.current;return jd.current=Id,t===null?Id:t}function v0(){(ut===0||ut===3||ut===2)&&(ut=4),gt===null||!(Li&268435455)&&!(vh&268435455)||ls(gt,St)}function Rd(t,e){var n=ve;ve|=2;var r=w2();(gt!==t||St!==e)&&(Nr=null,Ci(t,e));do try{Tj();break}catch(s){x2(t,s)}while(!0);if(e0(),ve=n,jd.current=r,tt!==null)throw Error($(261));return gt=null,St=0,ut}function Tj(){for(;tt!==null;)b2(tt)}function Sj(){for(;tt!==null&&!YC();)b2(tt)}function b2(t){var e=T2(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?_2(t):tt=e,f0.current=null}function _2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vj(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,tt=null;return}}else if(n=yj(n,e,gn),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ut===0&&(ut=5)}function yi(t,e,n){var r=_e,s=Dn.transition;try{Dn.transition=null,_e=1,kj(t,e,n,r)}finally{Dn.transition=s,_e=r}return null}function kj(t,e,n,r){do Fo();while(ms!==null);if(ve&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(oI(t,i),t===gt&&(tt=gt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xu||(xu=!0,S2(pd,function(){return Fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var a=_e;_e=1;var l=ve;ve|=4,f0.current=null,wj(t,n),g2(n,t),WI(nm),gd=!!tm,nm=tm=null,t.current=n,bj(n),XC(),ve=l,_e=a,Dn.transition=i}else t.current=n;if(xu&&(xu=!1,ms=t,Pd=s),i=t.pendingLanes,i===0&&(ks=null),eI(n.stateNode),dn(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ad)throw Ad=!1,t=_m,_m=null,t;return Pd&1&&t.tag!==0&&Fo(),i=t.pendingLanes,i&1?t===Em?_l++:(_l=0,Em=t):_l=0,Xs(),null}function Fo(){if(ms!==null){var t=n1(Pd),e=Dn.transition,n=_e;try{if(Dn.transition=null,_e=16>t?16:t,ms===null)var r=!1;else{if(t=ms,ms=null,Pd=0,ve&6)throw Error($(331));var s=ve;for(ve|=4,K=t.current;K!==null;){var i=K,a=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(K=d;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:wl(8,h,i)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var m=h.sibling,y=h.return;if(f2(h),h===d){K=null;break}if(m!==null){m.return=y,K=m;break}K=y}}}var b=i.alternate;if(b!==null){var E=b.child;if(E!==null){b.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}K=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,K=a;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,K=k;break e}K=i.return}}var w=t.current;for(K=w;K!==null;){a=K;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,K=N;else e:for(a=w;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yh(9,l)}}catch(M){He(l,l.return,M)}if(l===a){K=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,K=R;break e}K=l.return}}if(ve=s,Xs(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(ch,t)}catch{}r=!0}return r}finally{_e=n,Dn.transition=e}}return!1}function $x(t,e,n){e=ea(n,e),e=n2(t,e,1),t=Ss(t,e,1),e=Gt(),t!==null&&(pc(t,1,e),dn(t,e))}function He(t,e,n){if(t.tag===3)$x(t,t,n);else for(;e!==null;){if(e.tag===3){$x(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))){t=ea(n,t),t=r2(e,t,1),e=Ss(e,t,1),t=Gt(),e!==null&&(pc(e,1,t),dn(e,t));break}}e=e.return}}function Nj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(St&n)===n&&(ut===4||ut===3&&(St&130023424)===St&&500>Ye()-m0?Ci(t,0):p0|=n),dn(t,e)}function E2(t,e){e===0&&(t.mode&1?(e=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):e=1);var n=Gt();t=Ur(t,e),t!==null&&(pc(t,e,n),dn(t,n))}function Cj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E2(t,n)}function Ij(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),E2(t,n)}var T2;T2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,gj(t,e,n);an=!!(t.flags&131072)}else an=!1,Oe&&e.flags&1048576&&C1(e,Ed,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zu(t,e),t=e.pendingProps;var s=Yo(e,Ft.current);Vo(e,n),s=l0(null,e,r,t,s,n);var i=c0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(i=!0,bd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,r0(e),s.updater=gh,e.stateNode=s,s._reactInternals=e,dm(e,r,t,n),e=pm(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&Yg(e),qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Aj(r),t=$n(r,t),s){case 0:e=fm(null,e,r,t,n);break e;case 1:e=Px(null,e,r,t,n);break e;case 11:e=jx(null,e,r,t,n);break e;case 14:e=Ax(null,e,r,$n(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),fm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Px(t,e,r,s,n);case 3:e:{if(a2(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,O1(t,e),kd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ea(Error($(423)),e),e=Rx(t,e,r,n,s);break e}else if(r!==s){s=ea(Error($(424)),e),e=Rx(t,e,r,n,s);break e}else for(xn=Ts(e.stateNode.containerInfo.firstChild),_n=e,Oe=!0,qn=null,n=P1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xo(),r===s){e=zr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return D1(e),t===null&&lm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,rm(r,s)?a=null:i!==null&&rm(r,i)&&(e.flags|=32),o2(t,e),qt(t,e,a,n),e.child;case 6:return t===null&&lm(e),null;case 13:return l2(t,e,n);case 4:return s0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jo(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),jx(t,e,r,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Te(Td,r._currentValue),r._currentValue=a,i!==null)if(Yn(i.value,a)){if(i.children===s.children&&!cn.current){e=zr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),cm(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),cm(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vo(e,n),s=Mn(s),r=r(s),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,s=$n(r,e.pendingProps),s=$n(r.type,s),Ax(t,e,r,s,n);case 15:return s2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),zu(t,e),e.tag=1,un(r)?(t=!0,bd(e)):t=!1,Vo(e,n),t2(e,r,s),dm(e,r,s,n),pm(null,e,r,!0,t,n);case 19:return c2(t,e,n);case 22:return i2(t,e,n)}throw Error($(156,e.tag))};function S2(t,e){return J_(t,e)}function jj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new jj(t,e,n,r)}function x0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Aj(t){if(typeof t=="function")return x0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vg)return 11;if(t===Fg)return 14}return 2}function Cs(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")x0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case _o:return Ii(n.children,s,i,e);case Lg:a=8,s|=8;break;case Dp:return t=On(12,n,e,s|2),t.elementType=Dp,t.lanes=i,t;case Mp:return t=On(13,n,e,s),t.elementType=Mp,t.lanes=i,t;case Lp:return t=On(19,n,e,s),t.elementType=Lp,t.lanes=i,t;case D_:return xh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R_:a=10;break e;case O_:a=9;break e;case Vg:a=11;break e;case Fg:a=14;break e;case is:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=On(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ii(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function xh(t,e,n,r){return t=On(22,t,r,e),t.elementType=D_,t.lanes=n,t.stateNode={isHidden:!1},t}function tp(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function np(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mf(0),this.expirationTimes=Mf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function w0(t,e,n,r,s,i,a,l,c){return t=new Pj(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=On(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},r0(i),t}function Rj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k2(t){if(!t)return Vs;t=t._reactInternals;e:{if(Gi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(un(n))return k1(t,n,e)}return e}function N2(t,e,n,r,s,i,a,l,c){return t=w0(n,r,!0,t,s,i,a,l,c),t.context=k2(null),n=t.current,r=Gt(),s=Ns(n),i=Dr(r,s),i.callback=e??null,Ss(n,i,s),t.current.lanes=s,pc(t,s,r),dn(t,r),t}function wh(t,e,n,r){var s=e.current,i=Gt(),a=Ns(s);return n=k2(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,a),t!==null&&(Qn(t,s,a,i),Vu(t,s,a)),a}function Od(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function b0(t,e){Bx(t,e),(t=t.alternate)&&Bx(t,e)}function Oj(){return null}var C2=typeof reportError=="function"?reportError:function(t){console.error(t)};function _0(t){this._internalRoot=t}bh.prototype.render=_0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));wh(t,e,null,null)};bh.prototype.unmount=_0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vi(function(){wh(null,t,null,null)}),e[Fr]=null}};function bh(t){this._internalRoot=t}bh.prototype.unstable_scheduleHydration=function(t){if(t){var e=i1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&a1(t)}};function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function Dj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Od(a);i.call(d)}}var a=N2(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[Fr]=a.current,zl(t.nodeType===8?t.parentNode:t),Vi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Od(c);l.call(d)}}var c=w0(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=c,t[Fr]=c.current,zl(t.nodeType===8?t.parentNode:t),Vi(function(){wh(e,c,n,r)}),c}function Eh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Od(a);l.call(c)}}wh(e,a,t,s)}else a=Dj(n,e,t,s,r);return Od(a)}r1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ol(e.pendingLanes);n!==0&&($g(e,n|1),dn(e,Ye()),!(ve&6)&&(ta=Ye()+500,Xs()))}break;case 13:Vi(function(){var r=Ur(t,1);if(r!==null){var s=Gt();Qn(r,t,1,s)}}),b0(t,1)}};Bg=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=Gt();Qn(e,t,134217728,n)}b0(t,134217728)}};s1=function(t){if(t.tag===13){var e=Ns(t),n=Ur(t,e);if(n!==null){var r=Gt();Qn(n,t,e,r)}b0(t,e)}};i1=function(){return _e};o1=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Gp=function(t,e,n){switch(e){case"input":if(Up(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fh(r);if(!s)throw Error($(90));L_(r),Up(r,s)}}}break;case"textarea":F_(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};W_=g0;G_=Vi;var Mj={usingClientEntryPoint:!1,Events:[gc,ko,fh,H_,q_,g0]},Qa={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lj={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y_(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||Oj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{ch=wu.inject(Lj),ir=wu}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mj;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E0(e))throw Error($(200));return Rj(t,e,null,n)};Sn.createRoot=function(t,e){if(!E0(t))throw Error($(299));var n=!1,r="",s=C2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=w0(t,1,!1,null,null,n,!1,r,s),t[Fr]=e.current,zl(t.nodeType===8?t.parentNode:t),new _0(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Y_(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Vi(t)};Sn.hydrate=function(t,e,n){if(!_h(e))throw Error($(200));return Eh(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!E0(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=C2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=N2(e,null,t,1,n??null,s,!1,i,a),t[Fr]=e.current,zl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bh(e)};Sn.render=function(t,e,n){if(!_h(e))throw Error($(200));return Eh(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!_h(t))throw Error($(40));return t._reactRootContainer?(Vi(function(){Eh(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};Sn.unstable_batchedUpdates=g0;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_h(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Eh(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function I2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I2)}catch(t){console.error(t)}}I2(),I_.exports=Sn;var Vj=I_.exports,j2,qx=Vj;j2=qx.createRoot,qx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yl.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const Wx="popstate";function Fj(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return km("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Dd(s)}return zj(e,n,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function A2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uj(){return Math.random().toString(36).substr(2,8)}function Gx(t,e){return{usr:t.state,key:t.key,idx:e}}function km(t,e,n,r){return n===void 0&&(n=null),Yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ga(e):e,{state:n,key:e&&e.key||r||Uj()})}function Dd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zj(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=gs.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Yl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function p(){l=gs.Pop;let C=h(),k=C==null?null:C-d;d=C,c&&c({action:l,location:E.location,delta:k})}function m(C,k){l=gs.Push;let w=km(E.location,C,k);d=h()+1;let N=Gx(w,d),R=E.createHref(w);try{a.pushState(N,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(R)}i&&c&&c({action:l,location:E.location,delta:1})}function y(C,k){l=gs.Replace;let w=km(E.location,C,k);d=h();let N=Gx(w,d),R=E.createHref(w);a.replaceState(N,"",R),i&&c&&c({action:l,location:E.location,delta:0})}function b(C){let k=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof C=="string"?C:Dd(C);return w=w.replace(/ $/,"%20"),it(k,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,k)}let E={get action(){return l},get location(){return t(s,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Wx,p),c=C,()=>{s.removeEventListener(Wx,p),c=null}},createHref(C){return e(s,C)},createURL:b,encodeLocation(C){let k=b(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:y,go(C){return a.go(C)}};return E}var Kx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kx||(Kx={}));function $j(t,e,n){return n===void 0&&(n="/"),Bj(t,e,n)}function Bj(t,e,n,r){let s=typeof e=="string"?ga(e):e,i=T0(s.pathname||"/",n);if(i==null)return null;let a=P2(t);Hj(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=nA(i);l=Zj(a[c],d)}return l}function P2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(it(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Is([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(it(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),P2(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Xj(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of R2(i.path))s(i,a,c)}),e}function R2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=R2(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Hj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Jj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qj=/^:[\w-]+$/,Wj=3,Gj=2,Kj=1,Qj=10,Yj=-2,Qx=t=>t==="*";function Xj(t,e){let n=t.split("/"),r=n.length;return n.some(Qx)&&(r+=Yj),e&&(r+=Gj),n.filter(s=>!Qx(s)).reduce((s,i)=>s+(qj.test(i)?Wj:i===""?Kj:Qj),r)}function Jj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Zj(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=eA({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Is([i,p.pathname]),pathnameBase:oA(Is([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Is([i,p.pathnameBase]))}return a}function eA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let E=l[p]||"";a=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const b=l[p];return y&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function tA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),A2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return A2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function T0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function rA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ga(t):t;return{pathname:n?n.startsWith("/")?n:sA(n,e):e,search:aA(r),hash:lA(s)}}function sA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O2(t,e){let n=iA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function D2(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ga(t):(s=Yl({},t),it(!s.pathname||!s.pathname.includes("?"),rp("?","pathname","search",s)),it(!s.pathname||!s.pathname.includes("#"),rp("#","pathname","hash",s)),it(!s.search||!s.search.includes("#"),rp("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=rA(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Is=t=>t.join("/").replace(/\/\/+/g,"/"),oA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const M2=["post","put","patch","delete"];new Set(M2);const uA=["get",...M2];new Set(uA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}const S0=v.createContext(null),dA=v.createContext(null),Ki=v.createContext(null),Th=v.createContext(null),Js=v.createContext({outlet:null,matches:[],isDataRoute:!1}),L2=v.createContext(null);function hA(t,e){let{relative:n}=e===void 0?{}:e;vc()||it(!1);let{basename:r,navigator:s}=v.useContext(Ki),{hash:i,pathname:a,search:l}=F2(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Is([r,a])),s.createHref({pathname:c,search:l,hash:i})}function vc(){return v.useContext(Th)!=null}function ya(){return vc()||it(!1),v.useContext(Th).location}function V2(t){v.useContext(Ki).static||v.useLayoutEffect(t)}function ht(){let{isDataRoute:t}=v.useContext(Js);return t?kA():fA()}function fA(){vc()||it(!1);let t=v.useContext(S0),{basename:e,future:n,navigator:r}=v.useContext(Ki),{matches:s}=v.useContext(Js),{pathname:i}=ya(),a=JSON.stringify(O2(s,n.v7_relativeSplatPath)),l=v.useRef(!1);return V2(()=>{l.current=!0}),v.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=D2(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Is([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,a,i,t])}function pA(){let{matches:t}=v.useContext(Js),e=t[t.length-1];return e?e.params:{}}function F2(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(Ki),{matches:s}=v.useContext(Js),{pathname:i}=ya(),a=JSON.stringify(O2(s,r.v7_relativeSplatPath));return v.useMemo(()=>D2(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function mA(t,e){return gA(t,e)}function gA(t,e,n,r){vc()||it(!1);let{navigator:s}=v.useContext(Ki),{matches:i}=v.useContext(Js),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=ya(),h;if(e){var p;let C=typeof e=="string"?ga(e):e;c==="/"||(p=C.pathname)!=null&&p.startsWith(c)||it(!1),h=C}else h=d;let m=h.pathname||"/",y=m;if(c!=="/"){let C=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=$j(t,{pathname:y}),E=bA(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Is([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Is([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&E?v.createElement(Th.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:gs.Pop}},E):E}function yA(){let t=SA(),e=cA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,null)}const vA=v.createElement(yA,null);class xA extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(Js.Provider,{value:this.props.routeContext},v.createElement(L2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wA(t){let{routeContext:e,match:n,children:r}=t,s=v.useContext(S0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Js.Provider,{value:e},r)}function bA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||it(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:y}=n,b=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,p,m)=>{let y,b=!1,E=null,C=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,E=p.route.errorElement||vA,c&&(d<0&&m===0?(NA("route-fallback"),b=!0,C=null):d===m&&(b=!0,C=p.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,m+1)),w=()=>{let N;return y?N=E:b?N=C:p.route.Component?N=v.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=h,v.createElement(wA,{match:p,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:N})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?v.createElement(xA,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:w(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):w()},null)}var U2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(U2||{}),z2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(z2||{});function _A(t){let e=v.useContext(S0);return e||it(!1),e}function EA(t){let e=v.useContext(dA);return e||it(!1),e}function TA(t){let e=v.useContext(Js);return e||it(!1),e}function $2(t){let e=TA(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function SA(){var t;let e=v.useContext(L2),n=EA(),r=$2();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kA(){let{router:t}=_A(U2.UseNavigateStable),e=$2(z2.UseNavigateStable),n=v.useRef(!1);return V2(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xl({fromRouteId:e},i)))},[t,e])}const Yx={};function NA(t,e,n){Yx[t]||(Yx[t]=!0)}function CA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ge(t){it(!1)}function IA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gs.Pop,navigator:i,static:a=!1,future:l}=t;vc()&&it(!1);let c=e.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:i,static:a,future:Xl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=ga(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:b="default"}=r,E=v.useMemo(()=>{let C=T0(h,c);return C==null?null:{location:{pathname:C,search:p,hash:m,state:y,key:b},navigationType:s}},[c,h,p,m,y,b,s]);return E==null?null:v.createElement(Ki.Provider,{value:d},v.createElement(Th.Provider,{children:n,value:E}))}function jA(t){let{children:e,location:n}=t;return mA(Nm(e),n)}new Promise(()=>{});function Nm(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,Nm(r.props.children,i));return}r.type!==Ge&&it(!1),!r.props.index||!r.props.children||it(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Nm(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}function AA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function PA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RA(t,e){return t.button===0&&(!e||e==="_self")&&!PA(t)}const OA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DA="6";try{window.__reactRouterVersion=DA}catch{}const MA="startTransition",Xx=NC[MA];function LA(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=Fj({window:s,v5Compat:!0}));let a=i.current,[l,c]=v.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=v.useCallback(p=>{d&&Xx?Xx(()=>c(p)):c(p)},[c,d]);return v.useLayoutEffect(()=>a.listen(h),[a,h]),v.useEffect(()=>CA(r),[r]),v.createElement(IA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const VA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UA=v.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,m=AA(e,OA),{basename:y}=v.useContext(Ki),b,E=!1;if(typeof d=="string"&&FA.test(d)&&(b=d,VA))try{let N=new URL(window.location.href),R=d.startsWith("//")?new URL(N.protocol+d):new URL(d),M=T0(R.pathname,y);R.origin===N.origin&&M!=null?d=M+R.search+R.hash:E=!0}catch{}let C=hA(d,{relative:s}),k=zA(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});function w(N){r&&r(N),N.defaultPrevented||k(N)}return v.createElement("a",Cm({},m,{href:b||C,onClick:E||i?r:w,ref:n,target:c}))});var Jx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jx||(Jx={}));var Zx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zx||(Zx={}));function zA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=ht(),d=ya(),h=F2(t,{relative:a});return v.useCallback(p=>{if(RA(p,n)){p.preventDefault();let m=r!==void 0?r:Dd(d)===Dd(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const Im=t=>{try{const e=new Audio(`/sounds/${t}.mp3`);e.volume=.3;const n=e.play();n!==void 0&&n.catch(r=>{console.log("Sound play failed:",r)})}catch(e){console.log("Sound loading failed:",e)}},$A=()=>{["join","match","swipe"].forEach(e=>{try{const n=new Audio(`/sounds/${e}.mp3`);n.preload="auto"}catch(n){console.log("Sound play failed:",n)}})},mr=Object.create(null);mr.open="0";mr.close="1";mr.ping="2";mr.pong="3";mr.message="4";mr.upgrade="5";mr.noop="6";const qu=Object.create(null);Object.keys(mr).forEach(t=>{qu[mr[t]]=t});const jm={type:"error",data:"parser error"},B2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",H2=typeof ArrayBuffer=="function",q2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,k0=({type:t,data:e},n,r)=>B2&&e instanceof Blob?n?r(e):ew(e,r):H2&&(e instanceof ArrayBuffer||q2(e))?n?r(e):ew(new Blob([e]),r):r(mr[t]+(e||"")),ew=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function tw(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let sp;function BA(t,e){if(B2&&t.data instanceof Blob)return t.data.arrayBuffer().then(tw).then(e);if(H2&&(t.data instanceof ArrayBuffer||q2(t.data)))return e(tw(t.data));k0(t,!1,n=>{sp||(sp=new TextEncoder),e(sp.encode(n))})}const nw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ll=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<nw.length;t++)ll[nw.charCodeAt(t)]=t;const HA=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),h=new Uint8Array(d);for(r=0;r<n;r+=4)i=ll[t.charCodeAt(r)],a=ll[t.charCodeAt(r+1)],l=ll[t.charCodeAt(r+2)],c=ll[t.charCodeAt(r+3)],h[s++]=i<<2|a>>4,h[s++]=(a&15)<<4|l>>2,h[s++]=(l&3)<<6|c&63;return d},qA=typeof ArrayBuffer=="function",N0=(t,e)=>{if(typeof t!="string")return{type:"message",data:W2(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:WA(t.substring(1),e)}:qu[n]?t.length>1?{type:qu[n],data:t.substring(1)}:{type:qu[n]}:jm},WA=(t,e)=>{if(qA){const n=HA(t);return W2(n,e)}else return{base64:!0,data:t}},W2=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},G2="",GA=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{k0(i,!1,l=>{r[a]=l,++s===n&&e(r.join(G2))})})},KA=(t,e)=>{const n=t.split(G2),r=[];for(let s=0;s<n.length;s++){const i=N0(n[s],e);if(r.push(i),i.type==="error")break}return r};function QA(){return new TransformStream({transform(t,e){BA(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let ip;function bu(t){return t.reduce((e,n)=>e+n.length,0)}function _u(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function YA(t,e){ip||(ip=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(bu(n)<1)break;const c=_u(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(bu(n)<2)break;const c=_u(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(bu(n)<8)break;const c=_u(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),h=d.getUint32(0);if(h>Math.pow(2,21)-1){l.enqueue(jm);break}s=h*Math.pow(2,32)+d.getUint32(4),r=3}else{if(bu(n)<s)break;const c=_u(n,s);l.enqueue(N0(i?c:ip.decode(c),e)),r=0}if(s===0||s>t){l.enqueue(jm);break}}}})}const K2=4;function nt(t){if(t)return XA(t)}function XA(t){for(var e in nt.prototype)t[e]=nt.prototype[e];return t}nt.prototype.on=nt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};nt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};nt.prototype.off=nt.prototype.removeListener=nt.prototype.removeAllListeners=nt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};nt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};nt.prototype.emitReserved=nt.prototype.emit;nt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};nt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Sh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),An=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),JA="arraybuffer";function Q2(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const ZA=An.setTimeout,eP=An.clearTimeout;function kh(t,e){e.useNativeTimers?(t.setTimeoutFn=ZA.bind(An),t.clearTimeoutFn=eP.bind(An)):(t.setTimeoutFn=An.setTimeout.bind(An),t.clearTimeoutFn=An.clearTimeout.bind(An))}const tP=1.33;function nP(t){return typeof t=="string"?rP(t):Math.ceil((t.byteLength||t.size)*tP)}function rP(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Y2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function sP(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function iP(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class oP extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class C0 extends nt{constructor(e){super(),this.writable=!1,kh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new oP(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=N0(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=sP(e);return n.length?"?"+n:""}}class aP extends C0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};KA(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,GA(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Y2()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let X2=!1;try{X2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const lP=X2;function cP(){}class uP extends aP{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Uo=class Wu extends nt{constructor(e,n,r){super(),this.createRequest=e,kh(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Q2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Wu.requestsCount++,Wu.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=cP,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Wu.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Uo.requestsCount=0;Uo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rw);else if(typeof addEventListener=="function"){const t="onpagehide"in An?"pagehide":"unload";addEventListener(t,rw,!1)}}function rw(){for(let t in Uo.requests)Uo.requests.hasOwnProperty(t)&&Uo.requests[t].abort()}const dP=function(){const t=J2({xdomain:!1});return t&&t.responseType!==null}();class hP extends uP{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=dP&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Uo(J2,this.uri(),e)}}function J2(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||lP))return new XMLHttpRequest}catch{}if(!e)try{return new An[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Z2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class fP extends C0{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Z2?{}:Q2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;k0(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Sh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Y2()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const op=An.WebSocket||An.MozWebSocket;class pP extends fP{createSocket(e,n,r){return Z2?new op(e,n,r):n?new op(e,n):new op(e)}doWrite(e,n){this.ws.send(n)}}class mP extends C0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=YA(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=QA();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Sh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const gP={websocket:pP,webtransport:mP,polling:hP},yP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Am(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=yP.exec(t||""),i={},a=14;for(;a--;)i[vP[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=xP(i,i.path),i.queryKey=wP(i,i.query),i}function xP(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function wP(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Pm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gu=[];Pm&&addEventListener("offline",()=>{Gu.forEach(t=>t())},!1);class js extends nt{constructor(e,n){if(super(),this.binaryType=JA,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Am(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Am(n.host).host);kh(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=iP(this.opts.query)),Pm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=K2,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&js.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",js.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=nP(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Sh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(js.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Pm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Gu.indexOf(this._offlineEventListener);r!==-1&&Gu.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}js.protocol=K2;class bP extends js{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;js.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;js.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function i(){r||(r=!0,h(),n.close(),n=null)}const a=p=>{const m=new Error("probe error: "+p);m.transport=n.name,i(),this.emitReserved("upgradeError",m)};function l(){a("transport closed")}function c(){a("socket closed")}function d(p){n&&p.name!==n.name&&i()}const h=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",s),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let _P=class extends bP{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>gP[s]).filter(s=>!!s)),super(e,r)}};function EP(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Am(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const TP=typeof ArrayBuffer=="function",SP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,eE=Object.prototype.toString,kP=typeof Blob=="function"||typeof Blob<"u"&&eE.call(Blob)==="[object BlobConstructor]",NP=typeof File=="function"||typeof File<"u"&&eE.call(File)==="[object FileConstructor]";function I0(t){return TP&&(t instanceof ArrayBuffer||SP(t))||kP&&t instanceof Blob||NP&&t instanceof File}function Ku(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ku(t[n]))return!0;return!1}if(I0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ku(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ku(t[n]))return!0;return!1}function CP(t){const e=[],n=t.data,r=t;return r.data=Rm(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Rm(t,e){if(!t)return t;if(I0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Rm(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Rm(t[r],e));return n}return t}function IP(t,e){return t.data=Om(t.data,e),delete t.attachments,t}function Om(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Om(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Om(t[n],e));return t}const jP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],AP=5;var ge;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ge||(ge={}));class PP{constructor(e){this.replacer=e}encode(e){return(e.type===ge.EVENT||e.type===ge.ACK)&&Ku(e)?this.encodeAsBinary({type:e.type===ge.EVENT?ge.BINARY_EVENT:ge.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ge.BINARY_EVENT||e.type===ge.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=CP(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function sw(t){return Object.prototype.toString.call(t)==="[object Object]"}class j0 extends nt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ge.BINARY_EVENT;r||n.type===ge.BINARY_ACK?(n.type=r?ge.EVENT:ge.ACK,this.reconstructor=new RP(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(I0(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ge[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ge.BINARY_EVENT||r.type===ge.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(j0.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ge.CONNECT:return sw(n);case ge.DISCONNECT:return n===void 0;case ge.CONNECT_ERROR:return typeof n=="string"||sw(n);case ge.EVENT:case ge.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&jP.indexOf(n[0])===-1);case ge.ACK:case ge.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class RP{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=IP(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const OP=Object.freeze(Object.defineProperty({__proto__:null,Decoder:j0,Encoder:PP,get PacketType(){return ge},protocol:AP},Symbol.toStringTag,{value:"Module"}));function Hn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const DP=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tE extends nt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Hn(e,"open",this.onopen.bind(this)),Hn(e,"packet",this.onpacket.bind(this)),Hn(e,"error",this.onerror.bind(this)),Hn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(DP.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:ge.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++,p=n.pop();this._registerAckCallback(h,p),a.id=h}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,l)=>a?s(a):r(l);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ge.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ge.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ge.EVENT:case ge.BINARY_EVENT:this.onevent(e);break;case ge.ACK:case ge.BINARY_ACK:this.onack(e);break;case ge.DISCONNECT:this.ondisconnect();break;case ge.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:ge.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ge.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function va(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}va.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};va.prototype.reset=function(){this.attempts=0};va.prototype.setMin=function(t){this.ms=t};va.prototype.setMax=function(t){this.max=t};va.prototype.setJitter=function(t){this.jitter=t};class Dm extends nt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,kh(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new va({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||OP;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new _P(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Hn(n,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=Hn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Hn(e,"ping",this.onping.bind(this)),Hn(e,"data",this.ondata.bind(this)),Hn(e,"error",this.onerror.bind(this)),Hn(e,"close",this.onclose.bind(this)),Hn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Sh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new tE(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ya={};function Qu(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=EP(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Ya[s]&&i in Ya[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new Dm(r,e):(Ya[s]||(Ya[s]=new Dm(r,e)),c=Ya[s]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Qu,{Manager:Dm,Socket:tE,io:Qu,connect:Qu});const xi=class xi{constructor(){Re(this,"waitingUsers",new Set);Re(this,"callbacks",new Map);Re(this,"timeouts",new Map)}static getInstance(){return xi.instance||(xi.instance=new xi),xi.instance}findMatch(e,n){if(console.log("Mock matching: Looking for match for",e),this.callbacks.set(e,n),this.waitingUsers.size>0){const r=Array.from(this.waitingUsers)[0];this.waitingUsers.delete(r);const s=this.timeouts.get(r);s&&(clearTimeout(s),this.timeouts.delete(r));const i=this.callbacks.get(r);console.log("Mock matching: Found match!",e,"<->",r),setTimeout(()=>{n(r),i&&i(e),this.callbacks.delete(e),this.callbacks.delete(r)},1e3+Math.random()*2e3)}else{this.waitingUsers.add(e),console.log("Mock matching: Added to waiting list",e);const r=setTimeout(()=>{this.waitingUsers.delete(e),this.callbacks.delete(e),this.timeouts.delete(e),console.log("Mock matching: Timeout for",e)},3e4);this.timeouts.set(e,r)}}cancelMatch(e){this.waitingUsers.delete(e),this.callbacks.delete(e);const n=this.timeouts.get(e);n&&(clearTimeout(n),this.timeouts.delete(e))}simulateRandomUser(){const e="bot_"+Math.random().toString(36).substr(2,9);setTimeout(()=>{this.findMatch(e,n=>{console.log("Bot matched with:",n)})},Math.random()*1e4+5e3)}startBotSimulation(){setInterval(()=>{Math.random()<.3&&this.simulateRandomUser()},15e3)}};Re(xi,"instance");let Mm=xi;const nE=v.createContext(null),A0=()=>{const t=v.useContext(nE);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t},MP=({children:t})=>{const[e,n]=v.useState(null),[r,s]=v.useState(!1),i=Mm.getInstance();return v.useEffect(()=>{if(!e){let a;window.location.hostname==="localhost"?a="http://localhost:8000":a=`http://${window.location.hostname}:8000`;const l=Qu(a,{transports:["websocket","polling"],secure:!1,timeout:2e4,forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return l.on("connect",()=>{console.log("Socket connected:",l.id),s(!1)}),l.on("disconnect",()=>{console.log("Socket disconnected")}),l.on("connect_error",c=>{console.error("Socket connection error:",c),console.log("Falling back to mock matching mode"),s(!0),i.startBotSimulation()}),l.on("reconnect",c=>{console.log("Socket reconnected after",c,"attempts")}),l.on("reconnect_error",c=>{console.error("Socket reconnection error:",c)}),n(l),()=>{console.log("Cleaning up socket connection"),l.close()}}},[e]),v.useEffect(()=>()=>{e&&(console.log("Component unmounting, closing socket"),e.close(),n(null))},[e]),o.jsx(nE.Provider,{value:{socket:e,setSocket:n,mockMatching:i,isUsingMockMode:r},children:t})},rE=v.createContext(null),Zs=()=>{const t=v.useContext(rE);if(!t)throw new Error("usePremium must be used within a PremiumProvider");return t},LP=({children:t})=>{const[e,n]=v.useState(!1),[r,s]=v.useState(null);v.useEffect(()=>{const l=localStorage.getItem("premium_status"),c=localStorage.getItem("premium_expiry");if(l&&c){const d=new Date(c);d>new Date?(n(!0),s(d)):(localStorage.removeItem("premium_status"),localStorage.removeItem("premium_expiry"))}},[]);const i=(l,c)=>{n(l),l&&c?(s(c),localStorage.setItem("premium_status","true"),localStorage.setItem("premium_expiry",c.toISOString())):(s(null),localStorage.removeItem("premium_status"),localStorage.removeItem("premium_expiry"))},a=()=>r&&new Date>r?(i(!1),!1):e;return o.jsx(rE.Provider,{value:{isPremium:e,premiumExpiry:r,setPremium:i,checkPremiumStatus:a},children:t})};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=()=>{};var iw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new UP;const m=i<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),p!==64){const b=d<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zP=function(t){const e=sE(t);return iE.encodeByteArray(e,!0)},Md=function(t){return zP(t).replace(/\./g,"")},oE=function(t){try{return iE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=()=>$P().__FIREBASE_DEFAULTS__,HP=()=>{if(typeof process>"u"||typeof iw>"u")return;const t=iw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oE(t[1]);return e&&JSON.parse(e)},Nh=()=>{try{return VP()||BP()||HP()||qP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aE=t=>{var e,n;return(n=(e=Nh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lE=t=>{const e=aE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cE=()=>{var t;return(t=Nh())===null||t===void 0?void 0:t.config},uE=t=>{var e;return(e=Nh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Md(JSON.stringify(n)),Md(JSON.stringify(a)),""].join(".")}const El={};function GP(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function KP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ow=!1;function R0(t,e){if(typeof window>"u"||typeof document>"u"||!ei(window.location.host)||El[t]===e||El[t]||ow)return;El[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=GP().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ow=!0,a()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=KP(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),C=document.getElementById(E)||document.createElement("a"),k=n("preprendIcon"),w=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),h(C,E);const R=d();c(w,k),N.append(w,b,C,R),document.body.appendChild(N)}i?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function YP(){var t;const e=(t=Nh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZP(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eR(){return!YP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D0(){try{return typeof indexedDB=="object"}catch{return!1}}function M0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function hE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tR,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}}class Qi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?nR(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Fn(s,l,r)}}function nR(t,e){return t.replace(rR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rR=/\{\$([^}]+)}/g;function sR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(aw(i)&&aw(a)){if(!Fs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function aw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iR(t,e){const n=new oR(t,e);return n.subscribe.bind(n)}class oR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ap),s.error===void 0&&(s.error=ap),s.complete===void 0&&(s.complete=ap);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1e3,cR=2,uR=4*60*60*1e3,dR=.5;function lw(t,e=lR,n=cR){const r=e*Math.pow(n,t),s=Math.round(dR*r*(Math.random()-.5)*2);return Math.min(uR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Vn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pR(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fR(t){return t===vi?void 0:t}function pR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const gR={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},yR=pe.INFO,vR={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},xR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ch{constructor(e){this.name=e,this._logLevel=yR,this._logHandler=xR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const wR=(t,e)=>e.some(n=>t instanceof n);let cw,uw;function bR(){return cw||(cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _R(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,Lm=new WeakMap,pE=new WeakMap,lp=new WeakMap,L0=new WeakMap;function ER(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(As(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&fE.set(n,t)}).catch(()=>{}),L0.set(e,t),e}function TR(t){if(Lm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Lm.set(t,e)}let Vm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SR(t){Vm=t(Vm)}function kR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cp(this),e,...n);return pE.set(r,e.sort?e.sort():[e]),As(r)}:_R().includes(t)?function(...e){return t.apply(cp(this),e),As(fE.get(this))}:function(...e){return As(t.apply(cp(this),e))}}function NR(t){return typeof t=="function"?kR(t):(t instanceof IDBTransaction&&TR(t),wR(t,bR())?new Proxy(t,Vm):t)}function As(t){if(t instanceof IDBRequest)return ER(t);if(lp.has(t))return lp.get(t);const e=NR(t);return e!==t&&(lp.set(t,e),L0.set(e,t)),e}const cp=t=>L0.get(t);function mE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=As(a);return r&&a.addEventListener("upgradeneeded",c=>{r(As(a.result),c.oldVersion,c.newVersion,As(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const CR=["get","getKey","getAll","getAllKeys","count"],IR=["put","add","delete","clear"],up=new Map;function dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CR.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return up.set(e,i),i}SR(t=>({...t,get:(e,n,r)=>dw(e,n)||t.get(e,n,r),has:(e,n)=>!!dw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",hw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Ch("@firebase/app"),PR="@firebase/app-compat",RR="@firebase/analytics-compat",OR="@firebase/analytics",DR="@firebase/app-check-compat",MR="@firebase/app-check",LR="@firebase/auth",VR="@firebase/auth-compat",FR="@firebase/database",UR="@firebase/data-connect",zR="@firebase/database-compat",$R="@firebase/functions",BR="@firebase/functions-compat",HR="@firebase/installations",qR="@firebase/installations-compat",WR="@firebase/messaging",GR="@firebase/messaging-compat",KR="@firebase/performance",QR="@firebase/performance-compat",YR="@firebase/remote-config",XR="@firebase/remote-config-compat",JR="@firebase/storage",ZR="@firebase/storage-compat",e4="@firebase/firestore",t4="@firebase/ai",n4="@firebase/firestore-compat",r4="firebase",s4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",i4={[Fm]:"fire-core",[PR]:"fire-core-compat",[OR]:"fire-analytics",[RR]:"fire-analytics-compat",[MR]:"fire-app-check",[DR]:"fire-app-check-compat",[LR]:"fire-auth",[VR]:"fire-auth-compat",[FR]:"fire-rtdb",[UR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[$R]:"fire-fn",[BR]:"fire-fn-compat",[HR]:"fire-iid",[qR]:"fire-iid-compat",[WR]:"fire-fcm",[GR]:"fire-fcm-compat",[KR]:"fire-perf",[QR]:"fire-perf-compat",[YR]:"fire-rc",[XR]:"fire-rc-compat",[JR]:"fire-gcs",[ZR]:"fire-gcs-compat",[e4]:"fire-fst",[n4]:"fire-fst-compat",[t4]:"fire-vertex","fire-js":"fire-js",[r4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,o4=new Map,zm=new Map;function fw(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xn(t){const e=t.name;if(zm.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,t);for(const n of Jl.values())fw(n,t);for(const n of o4.values())fw(n,t);return!0}function ti(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Qi("app","Firebase",a4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=s4;function gE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Um,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ps.create("bad-app-name",{appName:String(s)});if(n||(n=cE()),!n)throw Ps.create("no-options");const i=Jl.get(s);if(i){if(Fs(n,i.options)&&Fs(r,i.config))return i;throw Ps.create("duplicate-app",{appName:s})}const a=new mR(s);for(const c of zm.values())a.addComponent(c);const l=new l4(n,r,a);return Jl.set(s,l),l}function wc(t=Um){const e=Jl.get(t);if(!e&&t===Um&&cE())return gE();if(!e)throw Ps.create("no-app",{appName:t});return e}function c4(){return Array.from(Jl.values())}function hn(t,e,n){var r;let s=(r=i4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(l.join(" "));return}Xn(new Vn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="firebase-heartbeat-database",d4=1,Zl="firebase-heartbeat-store";let dp=null;function yE(){return dp||(dp=mE(u4,d4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),dp}async function h4(t){try{const n=(await yE()).transaction(Zl),r=await n.objectStore(Zl).get(vE(t));return await n.done,r}catch(e){if(e instanceof Fn)$r.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function pw(t,e){try{const r=(await yE()).transaction(Zl,"readwrite");await r.objectStore(Zl).put(e,vE(t)),await r.done}catch(n){if(n instanceof Fn)$r.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(r.message)}}}function vE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1024,p4=30;class m4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>p4){const a=v4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mw(),{heartbeatsToSend:r,unsentEntries:s}=g4(this._heartbeatsCache.heartbeats),i=Md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return $r.warn(n),""}}}function mw(){return new Date().toISOString().substring(0,10)}function g4(t,e=f4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),gw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D0()?M0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gw(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}function v4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){Xn(new Vn("platform-logger",e=>new jR(e),"PRIVATE")),Xn(new Vn("heartbeat",e=>new m4(e),"PRIVATE")),hn(Fm,hw,t),hn(Fm,hw,"esm2017"),hn("fire-js","")}x4("");function V0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w4=xE,wE=new Qi("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Ch("@firebase/auth");function b4(t,...e){Ld.logLevel<=pe.WARN&&Ld.warn(`Auth (${Yi}): ${t}`,...e)}function Yu(t,...e){Ld.logLevel<=pe.ERROR&&Ld.error(`Auth (${Yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,...e){throw F0(t,...e)}function ar(t,...e){return F0(t,...e)}function bE(t,e,n){const r=Object.assign(Object.assign({},w4()),{[e]:n});return new Qi("auth","Firebase",r).create(e,{appName:t.name})}function Rs(t){return bE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wE.create(t,...e)}function se(t,e,...n){if(!t)throw F0(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yu(e),new Error(e)}function Hr(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _4(){return yw()==="http:"||yw()==="https:"}function yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_4()||O0()||"connection"in navigator)?navigator.onLine:!0}function T4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=QP()||JP()}get(){return E4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N4=new bc(3e4,6e4);function Ih(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xa(t,e,n,r,s={}){return EE(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=xc(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return XP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ei(t.emulatorConfig.host)&&(d.credentials="include"),_E.fetch()(await SE(t,t.config.apiHost,n,l),d)})}async function EE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},S4),e);try{const s=new C4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Eu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Eu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Eu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bE(t,h,d);Br(t,h)}}catch(s){if(s instanceof Fn)throw s;Br(t,"network-request-failed",{message:String(s)})}}async function TE(t,e,n,r,s={}){const i=await xa(t,e,n,r,s);return"mfaPendingCredential"in i&&Br(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function SE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?U0(t.config,s):`${t.config.apiScheme}://${s}`;return k4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class C4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),N4.get())})}}function Eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ar(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){return xa(t,"POST","/v1/accounts:delete",e)}async function Vd(t,e){return xa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j4(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),s=z0(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Tl(hp(s.auth_time)),issuedAtTime:Tl(hp(s.iat)),expirationTime:Tl(hp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hp(t){return Number(t)*1e3}function z0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=oE(n);return s?JSON.parse(s):(Yu("Failed to decode base64 JWT payload"),null)}catch(s){return Yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vw(t){const e=z0(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&A4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ec(t,Vd(n,{idToken:r}));se(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?kE(i.providerUserInfo):[],l=O4(t.providerData,a),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Bm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function R4(t){const e=Ue(t);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kE(t){return t.map(e=>{var{providerId:n}=e,r=V0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e){const n=await EE(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await SE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ei(t.emulatorConfig.host)&&(c.credentials="include"),_E.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M4(t,e){return xa(t,"POST","/v2/accounts:revokeToken",Ih(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=vw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await D4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new zo;return r&&(se(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=V0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ec(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return j4(this,e)}reload(){return R4(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await ec(this,I4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,l,c,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,E=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:R,isAnonymous:M,providerData:V,stsTokenManager:j}=n;se(N&&j,e,"internal-error");const x=zo.fromJSON(this.name,j);se(typeof N=="string",e,"internal-error"),ns(p,e.name),ns(m,e.name),se(typeof R=="boolean",e,"internal-error"),se(typeof M=="boolean",e,"internal-error"),ns(y,e.name),ns(b,e.name),ns(E,e.name),ns(C,e.name),ns(k,e.name),ns(w,e.name);const S=new Wn({uid:N,auth:e,email:m,emailVerified:R,displayName:p,isAnonymous:M,photoURL:b,phoneNumber:y,tenantId:E,stsTokenManager:x,createdAt:k,lastLoginAt:w});return V&&Array.isArray(V)&&(S.providerData=V.map(_=>Object.assign({},_))),C&&(S._redirectEventId=C),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new zo;s.updateFromServerResponse(n);const i=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kE(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new zo;l.updateFromIdToken(r);const c=new Wn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map;function Or(t){Hr(t instanceof Function,"Expected a class definition");let e=xw.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NE.type="NONE";const ww=NE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e,n){return`firebase:${t}:${e}:${n}`}class $o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Xu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vd(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $o(Or(ww),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Or(ww);const a=Xu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const m=await Vd(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Wn._fromGetAccountInfoResponse(e,m,h)}else p=Wn._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new $o(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new $o(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(OE(e))return"Webos";if(IE(e))return"Safari";if((e.includes("chrome/")||jE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CE(t=Ut()){return/firefox\//i.test(t)}function IE(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jE(t=Ut()){return/crios\//i.test(t)}function AE(t=Ut()){return/iemobile/i.test(t)}function PE(t=Ut()){return/android/i.test(t)}function RE(t=Ut()){return/blackberry/i.test(t)}function OE(t=Ut()){return/webos/i.test(t)}function $0(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L4(t=Ut()){var e;return $0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function V4(){return ZP()&&document.documentMode===10}function DE(t=Ut()){return $0(t)||PE(t)||OE(t)||RE(t)||/windows phone/i.test(t)||AE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e=[]){let n;switch(t){case"Browser":n=bw(Ut());break;case"Worker":n=`${bw(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(t,e={}){return xa(t,"GET","/v2/passwordPolicy",Ih(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=6;class $4{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:z4,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _w(this),this.idTokenSubscription=new _w(this),this.beforeStateQueue=new F4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vd(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Rs(this));const n=e?Ue(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U4(this),n=new $4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Or(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&b4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jh(t){return Ue(t)}class _w{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(t){B0=t}function q4(t){return B0.loadJS(t)}function W4(){return B0.gapiScript}function G4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t,e){const n=ti(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Fs(i,e??{}))return s;Br(s,"already-initialized")}return n.initialize({options:e})}function Q4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Y4(t,e,n){const r=jh(t);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=LE(e),{host:a,port:l}=X4(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(Fs(d,r.config.emulator)&&Fs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ei(a)?(P0(`${i}//${a}${c}`),R0("Auth",!0)):J4()}function LE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X4(t){const e=LE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ew(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Ew(a)}}}function Ew(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return TE(t,"POST","/v1/accounts:signInWithIdp",Ih(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="http://localhost";class Fi extends VE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=V0(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Fi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:Z4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends FE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends _c{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends _c{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends _c{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){return TE(t,"POST","/v1/accounts:signUp",Ih(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Wn._fromIdTokenResponse(e,r,s),a=Tw(r);return new Us({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Tw(r);return new Us({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Tw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t){var e;if(Pn(t.app))return Promise.reject(Rs(t));const n=jh(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Us({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await e5(n,{returnSecureToken:!0}),s=await Us._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ud.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ud(e,n,r,s)}}function zE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ud._fromErrorAndOperation(t,i,e,r):i})}async function t5(t,e,n=!1){const r=await ec(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Us._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e,n=!1){const{auth:r}=t;if(Pn(r.app))return Promise.reject(Rs(r));const s="reauthenticate";try{const i=await ec(t,zE(r,s,e,t),n);se(i.idToken,r,"internal-error");const a=z0(i.idToken);se(a,r,"internal-error");const{sub:l}=a;return se(t.uid===l,r,"user-mismatch"),Us._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Br(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(t,e,n=!1){if(Pn(t.app))return Promise.reject(Rs(t));const r="signIn",s=await zE(t,r,e),i=await Us._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function s5(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function i5(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function $E(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}const zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=1e3,a5=10;class HE extends BE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);V4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,a5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},o5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const l5=HE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends BE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qE.type="SESSION";const WE=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ah(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await c5(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=H0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function d5(t){lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function h5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function p5(){return GE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebaseLocalStorageDb",m5=1,$d="firebaseLocalStorage",QE="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ph(t,e){return t.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function g5(){const t=indexedDB.deleteDatabase(KE);return new Ec(t).toPromise()}function Hm(){const t=indexedDB.open(KE,m5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($d,{keyPath:QE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($d)?e(r):(r.close(),await g5(),e(await Hm()))})})}async function Sw(t,e,n){const r=Ph(t,!0).put({[QE]:e,value:n});return new Ec(r).toPromise()}async function y5(t,e){const n=Ph(t,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function kw(t,e){const n=Ph(t,!0).delete(e);return new Ec(n).toPromise()}const v5=800,x5=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(p5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h5(),!this.activeServiceWorker)return;this.sender=new u5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await Sw(e,zd,"1"),await kw(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>y5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ph(s,!1).getAll();return new Ec(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const w5=YE;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t,e){return e?Or(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends VE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _5(t){return r5(t.auth,new q0(t),t.bypassAuthState)}function E5(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),n5(n,new q0(t),t.bypassAuthState)}async function T5(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),t5(n,new q0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _5;case"linkViaPopup":case"linkViaRedirect":return T5;case"reauthViaPopup":case"reauthViaRedirect":return E5;default:Br(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=new bc(2e3,1e4);class Ro extends XE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=H0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S5.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="pendingRedirect",Ju=new Map;class N5 extends XE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const r=await C5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C5(t,e){const n=A5(e),r=j5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function I5(t,e){Ju.set(t._key(),e)}function j5(t){return Or(t._redirectPersistence)}function A5(t){return Xu(k5,t.config.apiKey,t.name)}async function P5(t,e,n=!1){if(Pn(t.app))return Promise.reject(Rs(t));const r=jh(t),s=b5(r,e),a=await new N5(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=10*60*1e3;class O5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ar(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nw(e))}saveEventToCache(e){this.cachedEventUids.add(Nw(e)),this.lastProcessedEventTime=Date.now()}}function Nw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e={}){return xa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V5=/^https?/;async function F5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M5(t);for(const n of e)try{if(U5(n))return}catch{}Br(t,"unauthorized-domain")}function U5(t){const e=$m(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!V5.test(n))return!1;if(L5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=new bc(3e4,6e4);function Cw(){const t=lr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $5(t){return new Promise((e,n)=>{var r,s,i;function a(){Cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cw(),n(ar(t,"network-request-failed"))},timeout:z5.get()})}if(!((s=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=lr().gapi)===null||i===void 0)&&i.load)a();else{const l=G4("iframefcb");return lr()[l]=()=>{gapi.load?a():n(ar(t,"network-request-failed"))},q4(`${W4()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function B5(t){return Zu=Zu||$5(t),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new bc(5e3,15e3),q5="__/auth/iframe",W5="emulator/auth/iframe",G5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q5(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U0(e,W5):`https://${t.config.authDomain}/${q5}`,r={apiKey:e.apiKey,appName:t.name,v:Yi},s=K5.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xc(r).slice(1)}`}async function Y5(t){const e=await B5(t),n=lr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:Q5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=ar(t,"network-request-failed"),l=lr().setTimeout(()=>{i(a)},H5.get());function c(){lr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J5=500,Z5=600,e3="_blank",t3="http://localhost";class Iw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n3(t,e,n,r=J5,s=Z5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},X5),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Ut().toLowerCase();n&&(l=jE(d)?e3:n),CE(d)&&(e=e||t3,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(L4(d)&&l!=="_self")return r3(e||"",l),new Iw(null);const p=window.open(e||"",l,h);se(p,t,"popup-blocked");try{p.focus()}catch{}return new Iw(p)}function r3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="__/auth/handler",i3="emulator/auth/handler",o3=encodeURIComponent("fac");async function jw(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yi,eventId:s};if(e instanceof FE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof _c){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${o3}=${encodeURIComponent(c)}`:"";return`${a3(t)}?${xc(l).slice(1)}${d}`}function a3({config:t}){return t.emulator?U0(t,i3):`https://${t.authDomain}/${s3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class l3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WE,this._completeRedirectFn=P5,this._overrideRedirectResult=I5}async _openPopup(e,n,r,s){var i;Hr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await jw(e,n,r,$m(),s);return n3(e,a,H0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await jw(e,n,r,$m(),s);return d5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Y5(e),r=new O5(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fp,{type:fp},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fp];a!==void 0&&n(!!a),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=F5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DE()||IE()||$0()}}const c3=l3;var Aw="@firebase/auth",Pw="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h3(t){Xn(new Vn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;se(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(t)},d=new B4(r,s,i,c);return Q4(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xn(new Vn("auth-internal",e=>{const n=jh(e.getProvider("auth").getImmediate());return(r=>new u3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hn(Aw,Pw,d3(t)),hn(Aw,Pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=5*60,p3=uE("authIdTokenMaxAge")||f3;let Rw=null;const m3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>p3)return;const s=n==null?void 0:n.token;Rw!==s&&(Rw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rh(t=wc()){const e=ti(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K4(t,{popupRedirectResolver:c3,persistence:[w5,l5,WE]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=m3(i.toString());i5(n,a,()=>a(n.currentUser)),s5(n,l=>a(l))}}const s=aE("auth");return s&&Y4(n,`http://${s}`),n}function g3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}H4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ar("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",g3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h3("Browser");var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,ZE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,x){function S(){}S.prototype=x.prototype,j.D=x.prototype,j.prototype=new S,j.prototype.constructor=j,j.C=function(_,A,P){for(var I=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)I[Z-2]=arguments[Z];return x.prototype[A].apply(_,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,x,S){S||(S=0);var _=Array(16);if(typeof x=="string")for(var A=0;16>A;++A)_[A]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(A=0;16>A;++A)_[A]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=j.g[0],S=j.g[1],A=j.g[2];var P=j.g[3],I=x+(P^S&(A^P))+_[0]+3614090360&4294967295;x=S+(I<<7&4294967295|I>>>25),I=P+(A^x&(S^A))+_[1]+3905402710&4294967295,P=x+(I<<12&4294967295|I>>>20),I=A+(S^P&(x^S))+_[2]+606105819&4294967295,A=P+(I<<17&4294967295|I>>>15),I=S+(x^A&(P^x))+_[3]+3250441966&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(P^S&(A^P))+_[4]+4118548399&4294967295,x=S+(I<<7&4294967295|I>>>25),I=P+(A^x&(S^A))+_[5]+1200080426&4294967295,P=x+(I<<12&4294967295|I>>>20),I=A+(S^P&(x^S))+_[6]+2821735955&4294967295,A=P+(I<<17&4294967295|I>>>15),I=S+(x^A&(P^x))+_[7]+4249261313&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(P^S&(A^P))+_[8]+1770035416&4294967295,x=S+(I<<7&4294967295|I>>>25),I=P+(A^x&(S^A))+_[9]+2336552879&4294967295,P=x+(I<<12&4294967295|I>>>20),I=A+(S^P&(x^S))+_[10]+4294925233&4294967295,A=P+(I<<17&4294967295|I>>>15),I=S+(x^A&(P^x))+_[11]+2304563134&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(P^S&(A^P))+_[12]+1804603682&4294967295,x=S+(I<<7&4294967295|I>>>25),I=P+(A^x&(S^A))+_[13]+4254626195&4294967295,P=x+(I<<12&4294967295|I>>>20),I=A+(S^P&(x^S))+_[14]+2792965006&4294967295,A=P+(I<<17&4294967295|I>>>15),I=S+(x^A&(P^x))+_[15]+1236535329&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(A^P&(S^A))+_[1]+4129170786&4294967295,x=S+(I<<5&4294967295|I>>>27),I=P+(S^A&(x^S))+_[6]+3225465664&4294967295,P=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(P^x))+_[11]+643717713&4294967295,A=P+(I<<14&4294967295|I>>>18),I=S+(P^x&(A^P))+_[0]+3921069994&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^P&(S^A))+_[5]+3593408605&4294967295,x=S+(I<<5&4294967295|I>>>27),I=P+(S^A&(x^S))+_[10]+38016083&4294967295,P=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(P^x))+_[15]+3634488961&4294967295,A=P+(I<<14&4294967295|I>>>18),I=S+(P^x&(A^P))+_[4]+3889429448&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^P&(S^A))+_[9]+568446438&4294967295,x=S+(I<<5&4294967295|I>>>27),I=P+(S^A&(x^S))+_[14]+3275163606&4294967295,P=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(P^x))+_[3]+4107603335&4294967295,A=P+(I<<14&4294967295|I>>>18),I=S+(P^x&(A^P))+_[8]+1163531501&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^P&(S^A))+_[13]+2850285829&4294967295,x=S+(I<<5&4294967295|I>>>27),I=P+(S^A&(x^S))+_[2]+4243563512&4294967295,P=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(P^x))+_[7]+1735328473&4294967295,A=P+(I<<14&4294967295|I>>>18),I=S+(P^x&(A^P))+_[12]+2368359562&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(S^A^P)+_[5]+4294588738&4294967295,x=S+(I<<4&4294967295|I>>>28),I=P+(x^S^A)+_[8]+2272392833&4294967295,P=x+(I<<11&4294967295|I>>>21),I=A+(P^x^S)+_[11]+1839030562&4294967295,A=P+(I<<16&4294967295|I>>>16),I=S+(A^P^x)+_[14]+4259657740&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^P)+_[1]+2763975236&4294967295,x=S+(I<<4&4294967295|I>>>28),I=P+(x^S^A)+_[4]+1272893353&4294967295,P=x+(I<<11&4294967295|I>>>21),I=A+(P^x^S)+_[7]+4139469664&4294967295,A=P+(I<<16&4294967295|I>>>16),I=S+(A^P^x)+_[10]+3200236656&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^P)+_[13]+681279174&4294967295,x=S+(I<<4&4294967295|I>>>28),I=P+(x^S^A)+_[0]+3936430074&4294967295,P=x+(I<<11&4294967295|I>>>21),I=A+(P^x^S)+_[3]+3572445317&4294967295,A=P+(I<<16&4294967295|I>>>16),I=S+(A^P^x)+_[6]+76029189&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^P)+_[9]+3654602809&4294967295,x=S+(I<<4&4294967295|I>>>28),I=P+(x^S^A)+_[12]+3873151461&4294967295,P=x+(I<<11&4294967295|I>>>21),I=A+(P^x^S)+_[15]+530742520&4294967295,A=P+(I<<16&4294967295|I>>>16),I=S+(A^P^x)+_[2]+3299628645&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(A^(S|~P))+_[0]+4096336452&4294967295,x=S+(I<<6&4294967295|I>>>26),I=P+(S^(x|~A))+_[7]+1126891415&4294967295,P=x+(I<<10&4294967295|I>>>22),I=A+(x^(P|~S))+_[14]+2878612391&4294967295,A=P+(I<<15&4294967295|I>>>17),I=S+(P^(A|~x))+_[5]+4237533241&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~P))+_[12]+1700485571&4294967295,x=S+(I<<6&4294967295|I>>>26),I=P+(S^(x|~A))+_[3]+2399980690&4294967295,P=x+(I<<10&4294967295|I>>>22),I=A+(x^(P|~S))+_[10]+4293915773&4294967295,A=P+(I<<15&4294967295|I>>>17),I=S+(P^(A|~x))+_[1]+2240044497&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~P))+_[8]+1873313359&4294967295,x=S+(I<<6&4294967295|I>>>26),I=P+(S^(x|~A))+_[15]+4264355552&4294967295,P=x+(I<<10&4294967295|I>>>22),I=A+(x^(P|~S))+_[6]+2734768916&4294967295,A=P+(I<<15&4294967295|I>>>17),I=S+(P^(A|~x))+_[13]+1309151649&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~P))+_[4]+4149444226&4294967295,x=S+(I<<6&4294967295|I>>>26),I=P+(S^(x|~A))+_[11]+3174756917&4294967295,P=x+(I<<10&4294967295|I>>>22),I=A+(x^(P|~S))+_[2]+718787259&4294967295,A=P+(I<<15&4294967295|I>>>17),I=S+(P^(A|~x))+_[9]+3951481745&4294967295,j.g[0]=j.g[0]+x&4294967295,j.g[1]=j.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+A&4294967295,j.g[3]=j.g[3]+P&4294967295}r.prototype.u=function(j,x){x===void 0&&(x=j.length);for(var S=x-this.blockSize,_=this.B,A=this.h,P=0;P<x;){if(A==0)for(;P<=S;)s(this,j,P),P+=this.blockSize;if(typeof j=="string"){for(;P<x;)if(_[A++]=j.charCodeAt(P++),A==this.blockSize){s(this,_),A=0;break}}else for(;P<x;)if(_[A++]=j[P++],A==this.blockSize){s(this,_),A=0;break}}this.h=A,this.o+=x},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var x=1;x<j.length-8;++x)j[x]=0;var S=8*this.o;for(x=j.length-8;x<j.length;++x)j[x]=S&255,S/=256;for(this.u(j),j=Array(16),x=S=0;4>x;++x)for(var _=0;32>_;_+=8)j[S++]=this.g[x]>>>_&255;return j};function i(j,x){var S=l;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=x(j)}function a(j,x){this.h=x;for(var S=[],_=!0,A=j.length-1;0<=A;A--){var P=j[A]|0;_&&P==x||(S[A]=P,_=!1)}this.g=S}var l={};function c(j){return-128<=j&&128>j?i(j,function(x){return new a([x|0],0>x?-1:0)}):new a([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return p;if(0>j)return C(d(-j));for(var x=[],S=1,_=0;j>=S;_++)x[_]=j/S|0,S*=4294967296;return new a(x,0)}function h(j,x){if(j.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j.charAt(0)=="-")return C(h(j.substring(1),x));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),_=p,A=0;A<j.length;A+=8){var P=Math.min(8,j.length-A),I=parseInt(j.substring(A,A+P),x);8>P?(P=d(Math.pow(x,P)),_=_.j(P).add(d(I))):(_=_.j(S),_=_.add(d(I)))}return _}var p=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(E(this))return-C(this).m();for(var j=0,x=1,S=0;S<this.g.length;S++){var _=this.i(S);j+=(0<=_?_:4294967296+_)*x,x*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(E(this))return"-"+C(this).toString(j);for(var x=d(Math.pow(j,6)),S=this,_="";;){var A=R(S,x).g;S=k(S,A.j(x));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(j);if(S=A,b(S))return P+_;for(;6>P.length;)P="0"+P;_=P+_}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(var x=0;x<j.g.length;x++)if(j.g[x]!=0)return!1;return!0}function E(j){return j.h==-1}t.l=function(j){return j=k(this,j),E(j)?-1:b(j)?0:1};function C(j){for(var x=j.g.length,S=[],_=0;_<x;_++)S[_]=~j.g[_];return new a(S,~j.h).add(m)}t.abs=function(){return E(this)?C(this):this},t.add=function(j){for(var x=Math.max(this.g.length,j.g.length),S=[],_=0,A=0;A<=x;A++){var P=_+(this.i(A)&65535)+(j.i(A)&65535),I=(P>>>16)+(this.i(A)>>>16)+(j.i(A)>>>16);_=I>>>16,P&=65535,I&=65535,S[A]=I<<16|P}return new a(S,S[S.length-1]&-2147483648?-1:0)};function k(j,x){return j.add(C(x))}t.j=function(j){if(b(this)||b(j))return p;if(E(this))return E(j)?C(this).j(C(j)):C(C(this).j(j));if(E(j))return C(this.j(C(j)));if(0>this.l(y)&&0>j.l(y))return d(this.m()*j.m());for(var x=this.g.length+j.g.length,S=[],_=0;_<2*x;_++)S[_]=0;for(_=0;_<this.g.length;_++)for(var A=0;A<j.g.length;A++){var P=this.i(_)>>>16,I=this.i(_)&65535,Z=j.i(A)>>>16,ee=j.i(A)&65535;S[2*_+2*A]+=I*ee,w(S,2*_+2*A),S[2*_+2*A+1]+=P*ee,w(S,2*_+2*A+1),S[2*_+2*A+1]+=I*Z,w(S,2*_+2*A+1),S[2*_+2*A+2]+=P*Z,w(S,2*_+2*A+2)}for(_=0;_<x;_++)S[_]=S[2*_+1]<<16|S[2*_];for(_=x;_<2*x;_++)S[_]=0;return new a(S,0)};function w(j,x){for(;(j[x]&65535)!=j[x];)j[x+1]+=j[x]>>>16,j[x]&=65535,x++}function N(j,x){this.g=j,this.h=x}function R(j,x){if(b(x))throw Error("division by zero");if(b(j))return new N(p,p);if(E(j))return x=R(C(j),x),new N(C(x.g),C(x.h));if(E(x))return x=R(j,C(x)),new N(C(x.g),x.h);if(30<j.g.length){if(E(j)||E(x))throw Error("slowDivide_ only works with positive integers.");for(var S=m,_=x;0>=_.l(j);)S=M(S),_=M(_);var A=V(S,1),P=V(_,1);for(_=V(_,2),S=V(S,2);!b(_);){var I=P.add(_);0>=I.l(j)&&(A=A.add(S),P=I),_=V(_,1),S=V(S,1)}return x=k(j,A.j(x)),new N(A,x)}for(A=p;0<=j.l(x);){for(S=Math.max(1,Math.floor(j.m()/x.m())),_=Math.ceil(Math.log(S)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),P=d(S),I=P.j(x);E(I)||0<I.l(j);)S-=_,P=d(S),I=P.j(x);b(P)&&(P=m),A=A.add(P),j=k(j,I)}return new N(A,j)}t.A=function(j){return R(this,j).h},t.and=function(j){for(var x=Math.max(this.g.length,j.g.length),S=[],_=0;_<x;_++)S[_]=this.i(_)&j.i(_);return new a(S,this.h&j.h)},t.or=function(j){for(var x=Math.max(this.g.length,j.g.length),S=[],_=0;_<x;_++)S[_]=this.i(_)|j.i(_);return new a(S,this.h|j.h)},t.xor=function(j){for(var x=Math.max(this.g.length,j.g.length),S=[],_=0;_<x;_++)S[_]=this.i(_)^j.i(_);return new a(S,this.h^j.h)};function M(j){for(var x=j.g.length+1,S=[],_=0;_<x;_++)S[_]=j.i(_)<<1|j.i(_-1)>>>31;return new a(S,j.h)}function V(j,x){var S=x>>5;x%=32;for(var _=j.g.length-S,A=[],P=0;P<_;P++)A[P]=0<x?j.i(P+S)>>>x|j.i(P+S+1)<<32-x:j.i(P+S);return new a(A,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Os=a}).apply(typeof Ow<"u"?Ow:typeof self<"u"?self:typeof window<"u"?window:{});var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eT,cl,tT,ed,qm,nT,rT,sT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tu=="object"&&Tu];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var g=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var O=u[T];if(!(O in g))break e;g=g[O]}u=u[u.length-1],T=g[u],f=f(T),f!=T&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function i(u,f){u instanceof String&&(u+="");var g=0,T=!1,O={next:function(){if(!T&&g<u.length){var D=g++;return{value:f(D,u[D]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function p(u,f,g){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function m(u,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function b(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(T,O,D){for(var H=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)H[Ee-2]=arguments[Ee];return f.prototype[O].apply(T,H)}}function E(u){const f=u.length;if(0<f){const g=Array(f);for(let T=0;T<f;T++)g[T]=u[T];return g}return[]}function C(u,f){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(c(T)){const O=u.length||0,D=T.length||0;u.length=O+D;for(let H=0;H<D;H++)u[O+H]=T[H]}else u.push(T)}}class k{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var M=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function V(u,f,g){for(const T in u)f.call(g,u[T],T,u)}function j(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function x(u){const f={};for(const g in u)f[g]=u[g];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(u,f){let g,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(g in T)u[g]=T[g];for(let D=0;D<S.length;D++)g=S[D],Object.prototype.hasOwnProperty.call(T,g)&&(u[g]=T[g])}}function A(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function P(u){l.setTimeout(()=>{throw u},0)}function I(){var u=Q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Z{constructor(){this.h=this.g=null}add(f,g){const T=ee.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var ee=new k(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ct,q=!1,Q=new Z,ne=()=>{const u=l.Promise.resolve(void 0);Ct=()=>{u.then(ce)}};var ce=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(g){P(g)}var f=ee;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}q=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};l.addEventListener("test",g,f),l.removeEventListener("test",g,f)}catch{}return u}();function Nn(u,f){if(Se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Nn.aa.h.call(this)}}b(Nn,Se);var ue={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),zt=0;function qe(u,f,g,T,O){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=O,this.key=++zt,this.da=this.fa=!1}function Jn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ze(u){this.src=u,this.g={},this.h=0}Ze.prototype.add=function(u,f,g,T,O){var D=u.toString();u=this.g[D],u||(u=this.g[D]=[],this.h++);var H=oi(u,f,T,O);return-1<H?(f=u[H],g||(f.fa=!1)):(f=new qe(f,this.src,D,!!T,O),f.fa=g,u.push(f)),f};function ka(u,f){var g=f.type;if(g in u.g){var T=u.g[g],O=Array.prototype.indexOf.call(T,f,void 0),D;(D=0<=O)&&Array.prototype.splice.call(T,O,1),D&&(Jn(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function oi(u,f,g,T){for(var O=0;O<u.length;++O){var D=u[O];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==T)return O}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),Na={};function Yr(u,f,g,T,O){if(Array.isArray(f)){for(var D=0;D<f.length;D++)Yr(u,f[D],g,T,O);return null}return g=$c(g),u&&u[Pe]?u.K(f,g,d(T)?!!T.capture:!1,O):ff(u,f,g,!1,T,O)}function ff(u,f,g,T,O,D){if(!f)throw Error("Invalid event type");var H=d(O)?!!O.capture:!!O,Ee=Ca(u);if(Ee||(u[ai]=Ee=new Ze(u)),g=Ee.add(f,g,T,H,D),g.proxy)return g;if(T=Vc(),g.proxy=T,T.src=u,T.listener=g,u.addEventListener)Je||(O=H),O===void 0&&(O=!1),u.addEventListener(f.toString(),T,O);else if(u.attachEvent)u.attachEvent(Uc(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Vc(){function u(g){return f.call(u.src,u.listener,g)}const f=zc;return u}function Fc(u,f,g,T,O){if(Array.isArray(f))for(var D=0;D<f.length;D++)Fc(u,f[D],g,T,O);else T=d(T)?!!T.capture:!!T,g=$c(g),u&&u[Pe]?(u=u.i,f=String(f).toString(),f in u.g&&(D=u.g[f],g=oi(D,g,T,O),-1<g&&(Jn(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ca(u))&&(f=u.g[f.toString()],u=-1,f&&(u=oi(f,g,T,O)),(g=-1<u?f[u]:null)&&no(g))}function no(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Pe])ka(f.i,u);else{var g=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(g,T,u.capture):f.detachEvent?f.detachEvent(Uc(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=Ca(f))?(ka(g,u),g.h==0&&(g.src=null,f[ai]=null)):Jn(u)}}}function Uc(u){return u in Na?Na[u]:Na[u]="on"+u}function zc(u,f){if(u.da)u=!0;else{f=new Nn(f,this);var g=u.listener,T=u.ha||u.src;u.fa&&no(u),u=g.call(T,f)}return u}function Ca(u){return u=u[ai],u instanceof Ze?u:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function $c(u){return typeof u=="function"?u:(u[li]||(u[li]=function(f){return u.handleEvent(f)}),u[li])}function ot(){he.call(this),this.i=new Ze(this),this.M=this,this.F=null}b(ot,he),ot.prototype[Pe]=!0,ot.prototype.removeEventListener=function(u,f,g,T){Fc(this,u,f,g,T)};function yt(u,f){var g,T=u.F;if(T)for(g=[];T;T=T.F)g.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new Se(f,u);else if(f instanceof Se)f.target=f.target||u;else{var O=f;f=new Se(T,u),_(f,O)}if(O=!0,g)for(var D=g.length-1;0<=D;D--){var H=f.g=g[D];O=Zn(H,T,!0,f)&&O}if(H=f.g=u,O=Zn(H,T,!0,f)&&O,O=Zn(H,T,!1,f)&&O,g)for(D=0;D<g.length;D++)H=f.g=g[D],O=Zn(H,T,!1,f)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],T=0;T<g.length;T++)Jn(g[T]);delete u.g[f],u.h--}}this.F=null},ot.prototype.K=function(u,f,g,T){return this.i.add(String(u),f,!1,g,T)},ot.prototype.L=function(u,f,g,T){return this.i.add(String(u),f,!0,g,T)};function Zn(u,f,g,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,D=0;D<f.length;++D){var H=f[D];if(H&&!H.da&&H.capture==g){var Ee=H.listener,xt=H.ha||H.src;H.fa&&ka(u.i,H),O=Ee.call(xt,T)!==!1&&O}}return O&&!T.defaultPrevented}function Bc(u,f,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(u,f||0)}function Ia(u){u.g=Bc(()=>{u.g=null,u.i&&(u.i=!1,Ia(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class pf extends he{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ia(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(u){he.call(this),this.h=u,this.g={}}b(ci,he);var ja=[];function ro(u){V(u.g,function(f,g){this.g.hasOwnProperty(g)&&no(f)},u),u.g={}}ci.prototype.N=function(){ci.aa.N.call(this),ro(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=l.JSON.stringify,mf=l.JSON.parse,gf=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Aa(){}Aa.prototype.h=null;function Hc(u){return u.h||(u.h=u.i())}function ui(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pa(){Se.call(this,"d")}b(Pa,Se);function Ra(){Se.call(this,"c")}b(Ra,Se);var Jt={},qc=null;function hi(){return qc=qc||new ot}Jt.La="serverreachability";function so(u){Se.call(this,Jt.La,u)}b(so,Se);function xr(u){const f=hi();yt(f,new so(f))}Jt.STAT_EVENT="statevent";function io(u,f){Se.call(this,Jt.STAT_EVENT,u),this.stat=f}b(io,Se);function vt(u){const f=hi();yt(f,new io(f,u))}Jt.Ma="timingevent";function oo(u,f){Se.call(this,Jt.Ma,u),this.size=f}b(oo,Se);function wr(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},f)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function Xr(u,f,g,T,O,D){u.info(function(){if(u.g)if(D)for(var H="",Ee=D.split("&"),xt=0;xt<Ee.length;xt++){var xe=Ee[xt].split("=");if(1<xe.length){var It=xe[0];xe=xe[1];var jt=It.split("_");H=2<=jt.length&&jt[1]=="type"?H+(It+"="+xe+"&"):H+(It+"=redacted&")}}else H=null;else H=D;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+g+`
`+H})}function yf(u,f,g,T,O,D,H){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+g+`
`+D+" "+H})}function _r(u,f,g,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+L(u,g)+(T?" "+T:"")})}function vf(u,f){u.info(function(){return"TIMEOUT: "+f})}br.prototype.info=function(){};function L(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var T=g[u];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var D=O[0];if(D!="noop"&&D!="stop"&&D!="close")for(var H=1;H<O.length;H++)O[H]=""}}}}return Xt(g)}catch{return f}}var W={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},J={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function Zt(){}b(Zt,Aa),Zt.prototype.g=function(){return new XMLHttpRequest},Zt.prototype.i=function(){return{}},fe=new Zt;function Jr(u,f,g,T){this.j=u,this.i=f,this.l=g,this.R=T||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zy}function Zy(){this.i=null,this.g="",this.h=!1}var ev={},xf={};function wf(u,f,g){u.L=1,u.v=Qc(Er(f)),u.m=g,u.P=!0,tv(u,null)}function tv(u,f){u.F=Date.now(),Wc(u),u.A=Er(u.v);var g=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),mv(g.i,"t",T),u.C=0,g=u.j.J,u.h=new Zy,u.g=Rv(u.j,g?f:null,!u.m),0<u.O&&(u.M=new pf(m(u.Y,u,u.g),u.O)),f=u.U,g=u.g,T=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(ja[0]=O.toString()),O=ja);for(var D=0;D<O.length;D++){var H=Yr(g,O[D],T||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),xr(),Xr(u.i,u.u,u.A,u.l,u.R,u.m)}Jr.prototype.ca=function(u){u=u.target;const f=this.M;f&&Tr(u)==3?f.j():this.Y(u)},Jr.prototype.Y=function(u){try{if(u==this.g)e:{const jt=Tr(this.g);var f=this.g.Ba();const co=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||_v(this.g)))){this.J||jt!=4||f==7||(f==8||0>=co?xr(3):xr(2)),bf(this);var g=this.g.Z();this.X=g;t:if(nv(this)){var T=_v(this.g);u="";var O=T.length,D=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),Oa(this);var H="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(D&&f==O-1)});T.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=g==200,yf(this.i,this.u,this.A,this.l,this.R,jt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,xt=this.g;if((Ee=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var xe=Ee;break t}}xe=null}if(g=xe)_r(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_f(this,g);else{this.o=!1,this.s=3,vt(12),fi(this),Oa(this);break e}}if(this.P){g=!0;let Un;for(;!this.J&&this.C<H.length;)if(Un=BN(this,H),Un==xf){jt==4&&(this.s=4,vt(14),g=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==ev){this.s=4,vt(15),_r(this.i,this.l,H,"[Invalid Chunk]"),g=!1;break}else _r(this.i,this.l,Un,null),_f(this,Un);if(nv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||H.length!=0||this.h.h||(this.s=1,vt(16),g=!1),this.o=this.o&&g,!g)_r(this.i,this.l,H,"[Invalid Chunked Response]"),fi(this),Oa(this);else if(0<H.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Cf(It),It.M=!0,vt(11))}}else _r(this.i,this.l,H,null),_f(this,H);jt==4&&fi(this),this.o&&!this.J&&(jt==4?Iv(this.j,this):(this.o=!1,Wc(this)))}else oC(this.g),g==400&&0<H.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),fi(this),Oa(this)}}}catch{}finally{}};function nv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function BN(u,f){var g=u.C,T=f.indexOf(`
`,g);return T==-1?xf:(g=Number(f.substring(g,T)),isNaN(g)?ev:(T+=1,T+g>f.length?xf:(f=f.slice(T,T+g),u.C=T+g,f)))}Jr.prototype.cancel=function(){this.J=!0,fi(this)};function Wc(u){u.S=Date.now()+u.I,rv(u,u.I)}function rv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wr(m(u.ba,u),f)}function bf(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Jr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(vf(this.i,this.A),this.L!=2&&(xr(),vt(17)),fi(this),this.s=2,Oa(this)):rv(this,this.S-u)};function Oa(u){u.j.G==0||u.J||Iv(u.j,u)}function fi(u){bf(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,ro(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function _f(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Ef(g.h,u))){if(!u.K&&Ef(g.h,u)&&g.G==3){try{var T=g.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)tu(g),Zc(g);else break e;Nf(g),vt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=wr(m(g.Za,g),6e3));if(1>=ov(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else mi(g,11)}else if((u.K||g.g==u)&&tu(g),!w(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let xe=O[f];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const It=xe[3];It!=null&&(g.la=It,g.j.info("VER="+g.la));const jt=xe[4];jt!=null&&(g.Aa=jt,g.j.info("SVER="+g.Aa));const co=xe[5];co!=null&&typeof co=="number"&&0<co&&(T=1.5*co,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const Un=u.g;if(Un){const ru=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ru){var D=T.h;D.g||ru.indexOf("spdy")==-1&&ru.indexOf("quic")==-1&&ru.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Tf(D,D.h),D.h=null))}if(T.D){const If=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;If&&(T.ya=If,ke(T.I,T.D,If))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var H=u;if(T.qa=Pv(T,T.J?T.ia:null,T.W),H.K){av(T.h,H);var Ee=H,xt=T.L;xt&&(Ee.I=xt),Ee.B&&(bf(Ee),Wc(Ee)),T.g=H}else Nv(T);0<g.i.length&&eu(g)}else xe[0]!="stop"&&xe[0]!="close"||mi(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?mi(g,7):kf(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}xr(4)}catch{}}var HN=class{constructor(u,f){this.g=u,this.map=f}};function sv(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ov(u){return u.h?1:u.g?u.g.size:0}function Ef(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Tf(u,f){u.g?u.g.add(f):u.h=f}function av(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}sv.prototype.cancel=function(){if(this.i=lv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return E(u.i)}function qN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,T=0;T<g;T++)f.push(u[T]);return f}f=[],g=0;for(T in u)f[g++]=u[T];return f}function WN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const T in u)f[g++]=T;return f}}}function cv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=WN(u),T=qN(u),O=T.length,D=0;D<O;D++)f.call(void 0,T[D],g&&g[D],u)}var uv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GN(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var T=u[g].indexOf("="),O=null;if(0<=T){var D=u[g].substring(0,T);O=u[g].substring(T+1)}else D=u[g];f(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pi){this.h=u.h,Gc(this,u.j),this.o=u.o,this.g=u.g,Kc(this,u.s),this.l=u.l;var f=u.i,g=new La;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),dv(this,g),this.m=u.m}else u&&(f=String(u).match(uv))?(this.h=!1,Gc(this,f[1]||"",!0),this.o=Da(f[2]||""),this.g=Da(f[3]||"",!0),Kc(this,f[4]),this.l=Da(f[5]||"",!0),dv(this,f[6]||"",!0),this.m=Da(f[7]||"")):(this.h=!1,this.i=new La(null,this.h))}pi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ma(f,hv,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ma(f,hv,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ma(g,g.charAt(0)=="/"?YN:QN,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ma(g,JN)),u.join("")};function Er(u){return new pi(u)}function Gc(u,f,g){u.j=g?Da(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Kc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function dv(u,f,g){f instanceof La?(u.i=f,ZN(u.i,u.h)):(g||(f=Ma(f,XN)),u.i=new La(f,u.h))}function ke(u,f,g){u.i.set(f,g)}function Qc(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Da(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ma(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,KN),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function KN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var hv=/[#\/\?@]/g,QN=/[#\?:]/g,YN=/[#\?]/g,XN=/[#\?@]/g,JN=/#/g;function La(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Zr(u){u.g||(u.g=new Map,u.h=0,u.i&&GN(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=La.prototype,t.add=function(u,f){Zr(this),this.i=null,u=ao(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function fv(u,f){Zr(u),f=ao(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function pv(u,f){return Zr(u),f=ao(u,f),u.g.has(f)}t.forEach=function(u,f){Zr(this),this.g.forEach(function(g,T){g.forEach(function(O){u.call(f,O,T,this)},this)},this)},t.na=function(){Zr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let T=0;T<f.length;T++){const O=u[T];for(let D=0;D<O.length;D++)g.push(f[T])}return g},t.V=function(u){Zr(this);let f=[];if(typeof u=="string")pv(this,u)&&(f=f.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return Zr(this),this.i=null,u=ao(this,u),pv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function mv(u,f,g){fv(u,f),0<g.length&&(u.i=null,u.g.set(ao(u,f),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var T=f[g];const D=encodeURIComponent(String(T)),H=this.V(T);for(T=0;T<H.length;T++){var O=D;H[T]!==""&&(O+="="+encodeURIComponent(String(H[T]))),u.push(O)}}return this.i=u.join("&")};function ao(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function ZN(u,f){f&&!u.j&&(Zr(u),u.i=null,u.g.forEach(function(g,T){var O=T.toLowerCase();T!=O&&(fv(this,T),mv(this,O,g))},u)),u.j=f}function eC(u,f){const g=new br;if(l.Image){const T=new Image;T.onload=y(es,g,"TestLoadImage: loaded",!0,f,T),T.onerror=y(es,g,"TestLoadImage: error",!1,f,T),T.onabort=y(es,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=y(es,g,"TestLoadImage: timeout",!1,f,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function tC(u,f){const g=new br,T=new AbortController,O=setTimeout(()=>{T.abort(),es(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(D=>{clearTimeout(O),D.ok?es(g,"TestPingServer: ok",!0,f):es(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),es(g,"TestPingServer: error",!1,f)})}function es(u,f,g,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(g)}catch{}}function nC(){this.g=new gf}function rC(u,f,g){const T=g||"";try{cv(u,function(O,D){let H=O;d(O)&&(H=Xt(O)),f.push(T+D+"="+encodeURIComponent(H))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function Yc(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Yc,Aa),Yc.prototype.g=function(){return new Xc(this.l,this.j)},Yc.prototype.i=function(u){return function(){return u}}({});function Xc(u,f){ot.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xc,ot),t=Xc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Fa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Va(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Va(this):Fa(this),this.readyState==3&&gv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Va(this))},t.Qa=function(u){this.g&&(this.response=u,Va(this))},t.ga=function(){this.g&&Va(this)};function Va(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fa(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yv(u){let f="";return V(u,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function Sf(u,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=yv(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):ke(u,f,g))}function Be(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,ot);var sC=/^https?$/i,iC=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?Hc(this.o):Hc(fe),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(D){vv(this,D);return}if(u=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)g.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const D of T.keys())g.set(D,T.get(D));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),O=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(iC,f,void 0))||T||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,H]of g)this.g.setRequestHeader(D,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bv(this),this.u=!0,this.g.send(u),this.u=!1}catch(D){vv(this,D)}};function vv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,xv(u),Jc(u)}function xv(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),Jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jc(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wv(this):this.bb())},t.bb=function(){wv(this)};function wv(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Tr(u)!=4||u.Z()!=2)){if(u.u&&Tr(u)==4)Bc(u.Ea,0,u);else if(yt(u,"readystatechange"),Tr(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=H===0){var O=String(u.D).match(uv)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),T=!sC.test(O?O.toLowerCase():"")}g=T}if(g)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var D=2<Tr(u)?u.g.statusText:""}catch{D=""}u.l=D+" ["+u.Z()+"]",xv(u)}}finally{Jc(u)}}}}function Jc(u,f){if(u.g){bv(u);const g=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||yt(u,"ready");try{g.onreadystatechange=T}catch{}}}function bv(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),mf(f)}};function _v(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oC(u){const f={};u=(u.g&&2<=Tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var g=A(u[T]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[O]||[];f[O]=D,D.push(g)}j(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Ev(u){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,u),this.cb=Ua("retryDelaySeedMs",1e4,u),this.Wa=Ua("forwardChannelMaxRetries",2,u),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new sv(u&&u.concurrentRequestLimit),this.Da=new nC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ev.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,T){vt(0),this.W=u,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Pv(this,null,this.W),eu(this)};function kf(u){if(Tv(u),u.G==3){var f=u.U++,g=Er(u.I);if(ke(g,"SID",u.K),ke(g,"RID",f),ke(g,"TYPE","terminate"),za(u,g),f=new Jr(u,u.j,f),f.L=2,f.v=Qc(Er(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=f.v,g=!0),g||(f.g=Rv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Wc(f)}Av(u)}function Zc(u){u.g&&(Cf(u),u.g.cancel(),u.g=null)}function Tv(u){Zc(u),u.u&&(l.clearTimeout(u.u),u.u=null),tu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function eu(u){if(!iv(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ct||ne(),q||(Ct(),q=!0),Q.add(f,u),u.B=0}}function aC(u,f){return ov(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wr(m(u.Ga,u,f),jv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Jr(this,this.j,u);let D=this.o;if(this.S&&(D?(D=x(D),_(D,this.S)):D=this.S),this.m!==null||this.O||(O.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=kv(this,O,f),g=Er(this.I),ke(g,"RID",u),ke(g,"CVER",22),this.D&&ke(g,"X-HTTP-Session-Id",this.D),za(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(yv(D)))+"&"+f:this.m&&Sf(g,this.m,D)),Tf(this.h,O),this.Ua&&ke(g,"TYPE","init"),this.P?(ke(g,"$req",f),ke(g,"SID","null"),O.T=!0,wf(O,g,null)):wf(O,g,f),this.G=2}}else this.G==3&&(u?Sv(this,u):this.i.length==0||iv(this.h)||Sv(this))};function Sv(u,f){var g;f?g=f.l:g=u.U++;const T=Er(u.I);ke(T,"SID",u.K),ke(T,"RID",g),ke(T,"AID",u.T),za(u,T),u.m&&u.o&&Sf(T,u.m,u.o),g=new Jr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=kv(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tf(u.h,g),wf(g,T,f)}function za(u,f){u.H&&V(u.H,function(g,T){ke(f,T,g)}),u.l&&cv({},function(g,T){ke(f,T,g)})}function kv(u,f,g){g=Math.min(u.i.length,g);var T=u.l?m(u.l.Na,u.l,u):null;e:{var O=u.i;let D=-1;for(;;){const H=["count="+g];D==-1?0<g?(D=O[0].g,H.push("ofs="+D)):D=0:H.push("ofs="+D);let Ee=!0;for(let xt=0;xt<g;xt++){let xe=O[xt].g;const It=O[xt].map;if(xe-=D,0>xe)D=Math.max(0,O[xt].g-100),Ee=!1;else try{rC(It,H,"req"+xe+"_")}catch{T&&T(It)}}if(Ee){T=H.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,T}function Nv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ct||ne(),q||(Ct(),q=!0),Q.add(f,u),u.v=0}}function Nf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wr(m(u.Fa,u),jv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Cv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wr(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Zc(this),Cv(this))};function Cf(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function Cv(u){u.g=new Jr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Er(u.qa);ke(f,"RID","rpc"),ke(f,"SID",u.K),ke(f,"AID",u.T),ke(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(f,"TO",u.ja),ke(f,"TYPE","xmlhttp"),za(u,f),u.m&&u.o&&Sf(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Qc(Er(f)),g.m=null,g.P=!0,tv(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Zc(this),Nf(this),vt(19))};function tu(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Iv(u,f){var g=null;if(u.g==f){tu(u),Cf(u),u.g=null;var T=2}else if(Ef(u.h,f))g=f.D,av(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;T=hi(),yt(T,new oo(T,g)),eu(u)}else Nv(u);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&aC(u,f)||T==2&&Nf(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),O){case 1:mi(u,5);break;case 4:mi(u,10);break;case 3:mi(u,6);break;default:mi(u,2)}}}function jv(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function mi(u,f){if(u.j.info("Error code "+f),f==2){var g=m(u.fb,u),T=u.Xa;const O=!T;T=new pi(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Gc(T,"https"),Qc(T),O?eC(T.toString(),g):tC(T.toString(),g)}else vt(2);u.G=0,u.l&&u.l.sa(f),Av(u),Tv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Av(u){if(u.G=0,u.ka=[],u.l){const f=lv(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Pv(u,f,g){var T=g instanceof pi?Er(g):new pi(g);if(T.g!="")f&&(T.g=f+"."+T.g),Kc(T,T.s);else{var O=l.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var D=new pi(null);T&&Gc(D,T),f&&(D.g=f),O&&Kc(D,O),g&&(D.l=g),T=D}return g=u.D,f=u.ya,g&&f&&ke(T,g,f),ke(T,"VER",u.la),za(u,T),T}function Rv(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Be(new Yc({eb:g})):new Be(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ov(){}t=Ov.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nu(){}nu.prototype.g=function(u,f){return new pn(u,f)};function pn(u,f){ot.call(this),this.g=new Ev(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new lo(this)}b(pn,ot),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){kf(this.g)},pn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Xt(u),u=g);f.i.push(new HN(f.Ya++,u)),f.G==3&&eu(f)},pn.prototype.N=function(){this.g.l=null,delete this.j,kf(this.g),delete this.g,pn.aa.N.call(this)};function Dv(u){Pa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}b(Dv,Pa);function Mv(){Ra.call(this),this.status=1}b(Mv,Ra);function lo(u){this.g=u}b(lo,Ov),lo.prototype.ua=function(){yt(this.g,"a")},lo.prototype.ta=function(u){yt(this.g,new Dv(u))},lo.prototype.sa=function(u){yt(this.g,new Mv)},lo.prototype.ra=function(){yt(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,sT=function(){return new nu},rT=function(){return hi()},nT=Jt,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},W.NO_ERROR=0,W.TIMEOUT=8,W.HTTP_ERROR=6,ed=W,J.COMPLETE="complete",tT=J,ui.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",ot.prototype.listen=ot.prototype.K,cl=ui,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,eT=Be}).apply(typeof Tu<"u"?Tu:typeof self<"u"?self:typeof window<"u"?window:{});const Dw="@firebase/firestore",Mw="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Ch("@firebase/firestore");function go(){return Ui.logLevel}function G(t,...e){if(Ui.logLevel<=pe.DEBUG){const n=e.map(W0);Ui.debug(`Firestore (${wa}): ${t}`,...n)}}function qr(t,...e){if(Ui.logLevel<=pe.ERROR){const n=e.map(W0);Ui.error(`Firestore (${wa}): ${t}`,...n)}}function zs(t,...e){if(Ui.logLevel<=pe.WARN){const n=e.map(W0);Ui.warn(`Firestore (${wa}): ${t}`,...n)}}function W0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iT(t,r,n)}function iT(t,e,n){let r=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iT(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class v3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class x3{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ds;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ds,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ds)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new oT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class w3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new w3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Lw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=E3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Wm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=aT(),a=T3(i.encode(Vw(t,n)),i.encode(Vw(e,n)));return a!==0?a:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function Vw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function T3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function na(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="__name__";class nr{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=nr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=nr.isNumericId(e),s=nr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?nr.extractNumericId(e).compare(nr.extractNumericId(n)):Wm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Os.fromString(e.substring(4,e.length-2))}}class Le extends nr{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends nr{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fw}static keyField(){return new Tt([Fw])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Le.fromString(e))}static fromName(e){return new te(Le.fromString(e).popFirst(5))}static empty(){return new te(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N3(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uw(t){if(!te.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function K0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=K0(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Tc(t,e){if(!lT(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=-62135596800,$w=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$w);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zw)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$w}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tc(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:rt("string",Ie._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ie(0,0))}static max(){return new ie(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-1;function C3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new $s(s,te.empty(),e)}function I3(t){return new $s(t.readTime,t.key,tc)}class $s{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $s(ie.min(),te.empty(),tc)}static max(){return new $s(ie.max(),te.empty(),tc)}}function j3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==A3)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function R3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _a(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Oh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=-1;function Dh(t){return t==null}function Bd(t){return t===0&&1/t==-1/0}function O3(t){return typeof t=="number"&&Number.isInteger(t)&&!Bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="";function D3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Bw(e)),e=M3(t.get(n),e);return Bw(e)}function M3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case cT:n+="";break;default:n+=i}}return n}function Bw(t){return t+cT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qw(this.data.getIterator())}getIteratorFrom(e){return new qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new dt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dT("Invalid base64 string: "+i):i}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const L3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=L3.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="server_timestamp",fT="__type__",pT="__previous_value__",mT="__local_write_time__";function Y0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[fT])===null||n===void 0?void 0:n.stringValue)===hT}function Mh(t){const e=t.mapValue.fields[pT];return Y0(e)?Mh(e):e}function nc(t){const e=Bs(t.mapValue.fields[mT].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Hd="(default)";class rc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="__type__",F3="__max__",ku={mapValue:{}},yT="__vector__",qd="value";function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y0(t)?4:z3(t)?9007199254740991:U3(t)?10:11:re(28295,{value:t})}function gr(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Bs(s.timestampValue),l=Bs(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Hs(s.bytesValue).isEqual(Hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Qe(s.doubleValue),l=Qe(i.doubleValue);return a===l?Bd(a)===Bd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Hw(a)!==Hw(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!gr(a[c],l[c])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function sc(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function ra(t,e){if(t===e)return 0;const n=qs(t),r=qs(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Qe(i.integerValue||i.doubleValue),c=Qe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ww(t.timestampValue,e.timestampValue);case 4:return Ww(nc(t),nc(e));case 5:return Wm(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Hs(i),c=Hs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=le(l[d],c[d]);if(h!==0)return h}return le(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=le(Qe(i.latitude),Qe(a.latitude));return l!==0?l:le(Qe(i.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gw(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,d,h;const p=i.fields||{},m=a.fields||{},y=(l=p[qd])===null||l===void 0?void 0:l.arrayValue,b=(c=m[qd])===null||c===void 0?void 0:c.arrayValue,E=le(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:Gw(y,b)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ku.mapValue&&a===ku.mapValue)return 0;if(i===ku.mapValue)return 1;if(a===ku.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=Wm(c[p],h[p]);if(m!==0)return m;const y=ra(l[c[p]],d[h[p]]);if(y!==0)return y}return le(c.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{le:n})}}function Ww(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Bs(t),r=Bs(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Gw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ra(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function sa(t){return Gm(t)}function Gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Gm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Gm(n.fields[a])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function td(t){switch(qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(t);return e?16+td(e):16;case 5:return 2*t.stringValue.length;case 6:return Hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+td(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ni(r.fields,(i,a)=>{s+=i.length+td(a)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function Km(t){return!!t&&"integerValue"in t}function X0(t){return!!t&&"arrayValue"in t}function Kw(t){return!!t&&"nullValue"in t}function Qw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nd(t){return!!t&&"mapValue"in t}function U3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gT])===null||n===void 0?void 0:n.stringValue)===yT}function Sl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===F3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Sl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ni(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new on(Sl(this.value))}}function vT(t){const e=[];return ni(t.fields,(n,r)=>{const s=new Tt([n]);if(nd(r)){const i=vT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Lt(e,0,ie.min(),ie.min(),ie.min(),on.empty(),0)}static newFoundDocument(e,n,r,s){return new Lt(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new Lt(e,2,n,ie.min(),ie.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ie.min(),ie.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.position=e,this.inclusive=n}}function Yw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=ra(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function $3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{}class ct extends xT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H3(e,n,r):n==="array-contains"?new G3(e,r):n==="in"?new K3(e,r):n==="not-in"?new Q3(e,r):n==="array-contains-any"?new Y3(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new q3(e,r):new W3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ra(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends xT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new yr(e,n)}matches(e){return wT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function wT(t){return t.op==="and"}function bT(t){return B3(t)&&wT(t)}function B3(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function Qm(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+sa(t.value);if(bT(t))return t.filters.map(e=>Qm(e)).join(",");{const e=t.filters.map(n=>Qm(n)).join(",");return`${t.op}(${e})`}}function _T(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&gr(r.value,s.value)}(t,e):t instanceof yr?function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&_T(a,s.filters[l]),!0):!1}(t,e):void re(19439)}function ET(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${sa(n.value)}`}(t):t instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(ET).join(" ,")+"}"}(t):"Filter"}class H3 extends ct{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class q3 extends ct{constructor(e,n){super(e,"in",n),this.keys=TT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W3 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=TT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class G3 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X0(n)&&sc(n.arrayValue,this.value)}}class K3 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}}class Q3 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sc(this.value.arrayValue,n)}}class Y3 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Jw(t,e=null,n=[],r=[],s=null,i=null,a=null){return new X3(t,e,n,r,s,i,a)}function J0(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sa(r)).join(",")),e.Pe=n}return e.Pe}function Z0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_T(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xw(t.startAt,e.startAt)&&Xw(t.endAt,e.endAt)}function Ym(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function J3(t,e,n,r,s,i,a,l){return new Lh(t,e,n,r,s,i,a,l)}function Vh(t){return new Lh(t)}function Zw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Z3(t){return t.collectionGroup!==null}function kl(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new dt(Tt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Gd(i,r))}),n.has(Tt.keyField().canonicalString())||e.Te.push(new Gd(Tt.keyField(),r))}return e.Te}function ur(t){const e=oe(t);return e.Ie||(e.Ie=eO(e,kl(t))),e.Ie}function eO(t,e){if(t.limitType==="F")return Jw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Gd(s.field,i)});const n=t.endAt?new Wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wd(t.startAt.position,t.startAt.inclusive):null;return Jw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xm(t,e,n){return new Lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fh(t,e){return Z0(ur(t),ur(e))&&t.limitType===e.limitType}function ST(t){return`${J0(ur(t))}|lt:${t.limitType}`}function yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ET(s)).join(", ")}]`),Dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>sa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>sa(s)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function Uh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of kl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=Yw(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,kl(r),s)||r.endAt&&!function(a,l,c){const d=Yw(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,kl(r),s))}(t,e)}function tO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kT(t){return(e,n)=>{let r=!1;for(const s of kl(t)){const i=nO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nO(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ra(c,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new ze(te.comparator);function Wr(){return rO}const NT=new ze(te.comparator);function ul(...t){let e=NT;for(const n of t)e=e.insert(n.key,n);return e}function CT(t){let e=NT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Si(){return Nl()}function IT(){return Nl()}function Nl(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const sO=new ze(te.comparator),iO=new dt(te.comparator);function me(...t){let e=iO;for(const n of t)e=e.add(n);return e}const oO=new dt(le);function aO(){return oO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function jT(t){return{integerValue:""+t}}function AT(t,e){return O3(e)?jT(e):ey(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function lO(t,e,n){return t instanceof Kd?function(s,i){const a={fields:{[fT]:{stringValue:hT},[mT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Y0(i)&&(i=Mh(i)),i&&(a.fields[pT]=i),{mapValue:a}}(n,e):t instanceof ic?RT(t,e):t instanceof oc?OT(t,e):function(s,i){const a=PT(s,i),l=eb(a)+eb(s.Ee);return Km(a)&&Km(s.Ee)?jT(l):ey(s.serializer,l)}(t,e)}function cO(t,e,n){return t instanceof ic?RT(t,e):t instanceof oc?OT(t,e):n}function PT(t,e){return t instanceof ac?function(r){return Km(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Kd extends zh{}class ic extends zh{constructor(e){super(),this.elements=e}}function RT(t,e){const n=DT(e);for(const r of t.elements)n.some(s=>gr(s,r))||n.push(r);return{arrayValue:{values:n}}}class oc extends zh{constructor(e){super(),this.elements=e}}function OT(t,e){let n=DT(e);for(const r of t.elements)n=n.filter(s=>!gr(s,r));return{arrayValue:{values:n}}}class ac extends zh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function eb(t){return Qe(t.integerValue||t.doubleValue)}function DT(t){return X0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.field=e,this.transform=n}}function dO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ic&&s instanceof ic||r instanceof oc&&s instanceof oc?na(r.elements,s.elements,gr):r instanceof ac&&s instanceof ac?gr(r.Ee,s.Ee):r instanceof Kd&&s instanceof Kd}(t.transform,e.transform)}class hO{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $h{}function MT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VT(t.key,dr.none()):new Sc(t.key,t.data,dr.none());{const n=t.data,r=on.empty();let s=new dt(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ri(t.key,r,new wn(s.toArray()),dr.none())}}function fO(t,e,n){t instanceof Sc?function(s,i,a){const l=s.value.clone(),c=nb(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ri?function(s,i,a){if(!rd(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nb(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(LT(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Cl(t,e,n,r){return t instanceof Sc?function(i,a,l,c){if(!rd(i.precondition,a))return l;const d=i.value.clone(),h=rb(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ri?function(i,a,l,c){if(!rd(i.precondition,a))return l;const d=rb(i.fieldTransforms,c,a),h=a.data;return h.setAll(LT(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,l){return rd(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function pO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PT(r.transform,s||null);i!=null&&(n===null&&(n=on.empty()),n.set(r.field,i))}return n||null}function tb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&na(r,s,(i,a)=>dO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sc extends $h{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ri extends $h{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nb(t,e,n){const r=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,cO(a,l,n[s]))}return r}function rb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,lO(i,a,e))}return r}class VT extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mO extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=MT(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,r)=>tb(n,r))&&na(this.baseMutations,e.baseMutations,(n,r)=>tb(n,r))}}class ty{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return sO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new ty(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ye;function xO(t){switch(t){case z.OK:return re(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function FT(t){if(t===void 0)return qr("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return re(39323,{code:t})}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new Os([4294967295,4294967295],0);function sb(t){const e=aT().encode(t),n=new ZE;return n.update(e),new Uint8Array(n.digest())}function ib(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Os([n,r],0),new Os([s,i],0)]}class ny{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Os.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Os.fromNumber(r)));return s.compare(wO)===1&&(s=new Os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=sb(e),[r,s]=ib(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new ny(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=sb(e),[r,s]=ib(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bh(ie.min(),s,new ze(le),Wr(),me())}}class kc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kc(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class UT{constructor(e,n){this.targetId=e,this.De=n}}class zT{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ob{constructor(){this.ve=0,this.Ce=ab(),this.Fe=Nt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=me(),n=me(),r=me();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new kc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ab()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bO{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wr(),this.je=Nu(),this.Je=Nu(),this.He=new ze(le)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Ym(i))if(r===0){const a=new te(i.path);this.Xe(n,a,Lt.newNoDocument(a,ie.min()))}else we(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Hs(r).toUint8Array()}catch(c){if(c instanceof dT)return zs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new ny(a,s,i)}catch(c){return zs(c instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&Ym(l.target)){const c=new te(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Lt.newNoDocument(c,e))}i.Ne&&(n.set(a,i.Le()),i.ke())}});let r=me();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new Bh(e,n,this.He,this.ze,r);return this.ze=Wr(),this.je=Nu(),this.Je=Nu(),this.He=new ze(le),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new ob,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new dt(le),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new dt(le),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ob),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Nu(){return new ze(te.comparator)}function ab(){return new ze(te.comparator)}const _O={asc:"ASCENDING",desc:"DESCENDING"},EO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TO={and:"AND",or:"OR"};class SO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jm(t,e){return t.useProto3Json||Dh(e)?e:{value:e}}function Qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $T(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kO(t,e){return Qd(t,e.toTimestamp())}function hr(t){return we(!!t,49232),ie.fromTimestamp(function(n){const r=Bs(n);return new Ie(r.seconds,r.nanos)}(t))}function ry(t,e){return Zm(t,e).canonicalString()}function Zm(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BT(t){const e=Le.fromString(t);return we(KT(e),10190,{key:e.toString()}),e}function eg(t,e){return ry(t.databaseId,e.path)}function pp(t,e){const n=BT(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(qT(n))}function HT(t,e){return ry(t.databaseId,e)}function NO(t){const e=BT(t);return e.length===4?Le.emptyPath():qT(e)}function tg(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qT(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lb(t,e,n){return{name:eg(t,e),fields:n.value.mapValue.fields}}function CO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(we(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?z.UNKNOWN:FT(d.code);return new X(h,d.message||"")}(a);n=new zT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=pp(t,r.document.name),i=hr(r.document.updateTime),a=r.document.createTime?hr(r.document.createTime):ie.min(),l=new on({mapValue:{fields:r.document.fields}}),c=Lt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new sd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=pp(t,r.document),i=r.readTime?hr(r.readTime):ie.min(),a=Lt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new sd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=pp(t,r.document),i=r.removedTargetIds||[];n=new sd([],i,s,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new vO(s,i),l=r.targetId;n=new UT(l,a)}}return n}function IO(t,e){let n;if(e instanceof Sc)n={update:lb(t,e.key,e.value)};else if(e instanceof VT)n={delete:eg(t,e.key)};else if(e instanceof ri)n={update:lb(t,e.key,e.data),updateMask:VO(e.fieldMask)};else{if(!(e instanceof mO))return re(16599,{Rt:e.type});n={verify:eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Kd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ic)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw re(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:kO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function jO(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?hr(s.updateTime):hr(i);return a.isEqual(ie.min())&&(a=hr(i)),new hO(a,s.transformResults||[])}(n,e))):[]}function AO(t,e){return{documents:[HT(t,e.path)]}}function PO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HT(t,s);const i=function(d){if(d.length!==0)return GT(yr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:vo(m.field),direction:DO(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Jm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function RO(t){let e=NO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=WT(p);return m instanceof yr&&bT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(b){return new Gd(xo(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Dh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,y=p.values||[];return new Wd(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,y=p.values||[];return new Wd(y,m)}(n.endAt)),J3(e,s,a,i,l,"F",c,d)}function OO(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xo(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xo(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xo(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xo(n.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(xo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(r=>WT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function DO(t){return _O[t]}function MO(t){return EO[t]}function LO(t){return TO[t]}function vo(t){return{fieldPath:t.canonicalString()}}function xo(t){return Tt.fromServerFormat(t.fieldPath)}function GT(t){return t instanceof ct?function(n){if(n.op==="=="){if(Qw(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(Kw(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qw(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(Kw(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:MO(n.op),value:n.value}}}(t):t instanceof yr?function(n){const r=n.getFilters().map(s=>GT(s));return r.length===1?r[0]:{compositeFilter:{op:LO(n.op),filters:r}}}(t):re(54877,{filter:t})}function VO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r,s,i=ie.min(),a=ie.min(),l=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.gt=e}}function UO(t){const e=RO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.Dn=new $O}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve($s.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve($s.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class $O{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new dt(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QT=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(QT,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ia(0)}static ur(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="LruGarbageCollector",BO=1048576;function db([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class HO{constructor(e){this.Tr=e,this.buffer=new dt(db),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();db(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(ub,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_a(n)?G(ub,"Ignoring IndexedDB error during garbage collection: ",n):await ba(n)}await this.Rr(3e5)})}}class WO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Oh.ue);const r=new HO(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(cb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cb):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),go()<=pe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function GO(t,e){return new WO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Cl(r.mutation,s,wn.empty(),Ie.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=Si();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ul();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Wr();const a=Nl(),l=function(){return Nl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ri)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Cl(h.mutation,d,h.mutation.getFieldMask(),Ie.now())):a.set(d.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>{var p;return l.set(d,new QO(h,(p=a.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Nl();let s=new ze((a,l)=>a-l),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||wn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(s.get(l.batchId)||me()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=IT();h.forEach(m=>{if(!i.has(m)){const y=MT(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Si());let l=tc,c=i;return a.next(d=>U.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,me())).next(h=>({batchId:l,changes:CT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ul();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(p,m){return new Lh(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Lt.newInvalidDocument(h)))});let l=ul();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Cl(h.mutation,d,wn.empty(),Ie.now()),Uh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:UO(s.bundledQuery),readTime:hr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.overlays=new ze(te.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Si();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Si(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Si(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Si(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return U.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new yO(n,r));let i=this.kr.get(n);i===void 0&&(i=me(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.qr=new dt(ft.Qr),this.$r=new dt(ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ft(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new te(new Le([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.$r.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new te(new Le([])),r=new ft(n,e),s=new ft(n,e+1);let i=me();return this.$r.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return te.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new dt(ft.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new gO(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new ft(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Q0:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(le);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{r=r.add(l.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new ft(new te(i),0);let l=new dt(le);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},a),U.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new ft(n,0),s=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.ni=e,this.docs=function(){return new ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Lt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wr();const a=n.path,l=new te(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||j3(I3(h),r)<=0||(s.has(h.key)||Uh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n6(this)}getSize(e){return U.resolve(this.size)}}class n6 extends KO{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.persistence=e,this.ii=new Xi(n=>J0(n),Z0),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new sy,this.targetCount=0,this._i=ia.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ia(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.ai={},this.overlays={},this.ui=new Oh(0),this.ci=!1,this.ci=!0,this.li=new ZO,this.referenceDelegate=e(this),this.hi=new r6(this),this.indexManager=new zO,this.remoteDocumentCache=function(s){return new t6(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new FO(n),this.Ti=new XO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new e6(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new s6(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class s6 extends P3{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ai=new sy,this.Ri=null}static Vi(e){return new iy(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{const s=te.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Yd{constructor(e,n){this.persistence=e,this.gi=new Xi(r=>D3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=GO(this,n)}static Vi(e,n){return new Yd(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=td(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new oy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eR()?8:R3(Ut())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new i6;return this.ws(e,n,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(go()<=pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(go()<=pe.DEBUG&&G("QueryEngine","Query:",yo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(go()<=pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):U.resolve())}ps(e,n){if(Zw(n))return U.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xm(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=me(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,a,c.readTime)?this.ps(e,Xm(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,s){return Zw(n)||s.isEqual(ie.min())?U.resolve(null):this.gs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?U.resolve(null):(go()<=pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yo(n)),this.vs(e,a,n,C3(s,tc)).next(l=>l))})}bs(e,n){let r=new dt(kT(e));return n.forEach((s,i)=>{Uh(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return go()<=pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",yo(n)),this.gs.getDocumentsMatchingQuery(e,n,$s.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="LocalStore",a6=3e8;class l6{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ze(le),this.Ms=new Xi(i=>J0(i),Z0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function c6(t,e,n,r){return new l6(t,e,n,r)}async function XT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=me();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function u6(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let y=U.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(c,b)).next(E=>{const C=d.docVersions.get(b);we(C!==null,48541),E.version.compareTo(C)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=me();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JT(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function d6(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(n.hi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(i,h.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(p,y),function(E,C,k){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=a6?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&l.push(n.hi.updateTargetData(i,y))});let c=Wr(),d=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(h6(i,a,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(ie.min())){const h=n.hi.getLastRemoteSnapshotVersion(i).next(p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return U.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Fs=s,i))}function h6(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Wr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):G(ay,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:a,ks:s}})}function f6(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Q0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function p6(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.hi.allocateTargetId(r).next(a=>(s=new ys(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ng(t,e,n){const r=oe(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!_a(a))throw a;G(ay,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function hb(t,e,n){const r=oe(t);let s=ie.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const p=oe(c),m=p.Ms.get(h);return m!==void 0?U.resolve(p.Fs.get(m)):p.hi.getTargetData(d,h)}(r,a,ur(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:ie.min(),n?i:me())).next(l=>(m6(r,tO(e),l),{documents:l,qs:i})))}function m6(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class fb{constructor(){this.activeTargetIds=aO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g6{constructor(){this.Fo=new fb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="ConnectivityMonitor";class mb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(pb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){G(pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu=null;function rg(){return Cu===null?Cu=function(){return 268435456+Math.round(2147483648*Math.random())}():Cu++,"0x"+Cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="RestConnection",v6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Hd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=rg(),l=this.Go(e,n.toUriEncodedString());G(mp,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:d}=new URL(l),h=ei(d);return this.jo(e,l,c,r,h).then(p=>(G(mp,`Received RPC '${e}' ${a}: `,p),p),p=>{throw zs(mp,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=v6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class b6 extends x6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const a=rg();return new Promise((l,c)=>{const d=new eT;d.setWithCredentials(!0),d.listenOnce(tT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ed.NO_ERROR:const p=d.getResponseJson();G(Rt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case ed.TIMEOUT:G(Rt,`RPC '${e}' ${a} timed out`),c(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const m=d.getStatus();if(G(Rt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const E=function(k){const w=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(b.status);c(new X(E,b.message))}else c(new X(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(z.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{G(Rt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);G(Rt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}P_(e,n,r){const s=rg(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sT(),l=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");G(Rt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const p=a.createWebChannel(h,c);this.T_(p);let m=!1,y=!1;const b=new w6({Ho:C=>{y?G(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(G(Rt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),G(Rt,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Yo:()=>p.close()}),E=(C,k,w)=>{C.listen(k,N=>{try{w(N)}catch(R){setTimeout(()=>{throw R},0)}})};return E(p,cl.EventType.OPEN,()=>{y||(G(Rt,`RPC '${e}' stream ${s} transport opened.`),b.s_())}),E(p,cl.EventType.CLOSE,()=>{y||(y=!0,G(Rt,`RPC '${e}' stream ${s} transport closed`),b.__(),this.I_(p))}),E(p,cl.EventType.ERROR,C=>{y||(y=!0,zs(Rt,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),b.__(new X(z.UNAVAILABLE,"The operation could not be completed")))}),E(p,cl.EventType.MESSAGE,C=>{var k;if(!y){const w=C.data[0];we(!!w,16349);const N=w,R=(N==null?void 0:N.error)||((k=N[0])===null||k===void 0?void 0:k.error);if(R){G(Rt,`RPC '${e}' stream ${s} received error:`,R);const M=R.status;let V=function(S){const _=et[S];if(_!==void 0)return FT(_)}(M),j=R.message;V===void 0&&(V=z.INTERNAL,j="Unknown error status: "+M+" with message "+R.message),y=!0,b.__(new X(V,j)),p.close()}else G(Rt,`RPC '${e}' stream ${s} received:`,w),b.a_(w)}}),E(l,nT.STAT_EVENT,C=>{C.stat===qm.PROXY?G(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===qm.NOPROXY&&G(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){return new SO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="PersistentStream";class eS{constructor(e,n,r,s,i,a,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ZT(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(G(gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _6 extends eS{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=CO(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?hr(a.readTime):ie.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=tg(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Ym(c)?{documents:AO(i,c)}:{query:PO(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=$T(i,a.resumeToken);const d=Jm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ie.min())>0){l.readTime=Qd(i,a.snapshotVersion.toTimestamp());const d=Jm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=OO(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=tg(this.serializer),n.removeTarget=e,this.k_(n)}}class E6 extends eS{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=jO(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=tg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IO(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{}class S6 extends T6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,Zm(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,Zm(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(z.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class k6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(n),this._a=!1):G("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class N6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Ji(this)&&(G(zi,"Restarting streams for network reachability change."),await async function(c){const d=oe(c);d.Ia.add(4),await Nc(d),d.Aa.set("Unknown"),d.Ia.delete(4),await qh(d)}(this))})}),this.Aa=new k6(r,s)}}async function qh(t){if(Ji(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function tS(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),dy(n)?uy(n):Ea(n).x_()&&cy(n,e))}function ly(t,e){const n=oe(t),r=Ea(n);n.Ta.delete(e),r.x_()&&nS(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ji(n)&&n.Aa.set("Unknown"))}function cy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).H_(e)}function nS(t,e){t.Ra.$e(e),Ea(t).Y_(e)}function uy(t){t.Ra=new bO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.Aa.aa()}function dy(t){return Ji(t)&&!Ea(t).M_()&&t.Ta.size>0}function Ji(t){return oe(t).Ia.size===0}function rS(t){t.Ra=void 0}async function C6(t){t.Aa.set("Online")}async function I6(t){t.Ta.forEach((e,n)=>{cy(t,e)})}async function j6(t,e){rS(t),dy(t)?(t.Aa.la(e),uy(t)):t.Aa.set("Unknown")}async function A6(t,e,n){if(t.Aa.set("Online"),e instanceof zT&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){G(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xd(t,r)}else if(e instanceof sd?t.Ra.Ye(e):e instanceof UT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{const r=await JT(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(d);h&&i.Ta.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),nS(i,c);const p=new ys(h.target,c,d,h.sequenceNumber);cy(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(zi,"Failed to raise snapshot:",r),await Xd(t,r)}}async function Xd(t,e,n){if(!_a(e))throw e;t.Ia.add(1),await Nc(t),t.Aa.set("Offline"),n||(n=()=>JT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(zi,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await qh(t)})}function sS(t,e){return e().catch(n=>Xd(t,n,e))}async function Wh(t){const e=oe(t),n=Ws(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Q0;for(;P6(e);)try{const s=await f6(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,R6(e,s)}catch(s){await Xd(e,s)}iS(e)&&oS(e)}function P6(t){return Ji(t)&&t.Pa.length<10}function R6(t,e){t.Pa.push(e);const n=Ws(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function iS(t){return Ji(t)&&!Ws(t).M_()&&t.Pa.length>0}function oS(t){Ws(t).start()}async function O6(t){Ws(t).na()}async function D6(t){const e=Ws(t);for(const n of t.Pa)e.X_(n.mutations)}async function M6(t,e,n){const r=t.Pa.shift(),s=ty.from(r,e,n);await sS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wh(t)}async function L6(t,e){e&&Ws(t).Z_&&await async function(r,s){if(function(a){return xO(a)&&a!==z.ABORTED}(s.code)){const i=r.Pa.shift();Ws(r).N_(),await sS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wh(r)}}(t,e),iS(t)&&oS(t)}async function yb(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),G(zi,"RemoteStore received new credentials");const r=Ji(n);n.Ia.add(3),await Nc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await qh(n)}async function V6(t,e){const n=oe(t);e?(n.Ia.delete(2),await qh(n)):e||(n.Ia.add(2),await Nc(n),n.Aa.set("Unknown"))}function Ea(t){return t.Va||(t.Va=function(n,r,s){const i=oe(n);return i.ia(),new _6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:C6.bind(null,t),e_:I6.bind(null,t),n_:j6.bind(null,t),J_:A6.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),dy(t)?uy(t):t.Aa.set("Unknown")):(await t.Va.stop(),rS(t))})),t.Va}function Ws(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.ia(),new E6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:O6.bind(null,t),n_:L6.bind(null,t),ea:D6.bind(null,t),ta:M6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Wh(t)):(await t.ma.stop(),t.Pa.length>0&&(G(zi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new hy(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(qr("AsyncQueue",`${e}: ${t}`),_a(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.fa=new ze(te.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):re(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new oa(e,n,Ho.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class U6{constructor(){this.queries=xb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=xb(),i.forEach((a,l)=>{for(const c of l.wa)c.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function xb(){return new Xi(t=>ST(t),Fh)}async function aS(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new F6,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=fy(a,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&py(n)}async function lS(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function z6(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&py(n)}function $6(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function py(t){t.Da.forEach(e=>{e.next()})}var sg,wb;(wb=sg||(sg={})).Fa="default",wb.Cache="cache";class cS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.key=e}}class dS{constructor(e){this.key=e}}class B6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=me(),this.mutatedKeys=me(),this.Xa=kT(e),this.eu=new Ho(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new vb,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),y=Uh(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?b!==E&&(r.track({type:3,doc:y}),C=!0):this.iu(m,y)||(r.track({type:2,doc:y}),C=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),C=!0):m&&!y&&(r.track({type:1,doc:m}),C=!0,(c||d)&&(l=!0)),C&&(y?(a=a.add(y),i=E?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,p)=>function(y,b){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:C})}};return E(y)-E(b)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,d=c!==this.Ya;return this.Ya=c,a.length!==0||d?{snapshot:new oa(this.query,e.eu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new dS(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new uS(r))}),n}uu(e){this.Ha=e.qs,this.Za=me();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return oa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const my="SyncEngine";class H6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q6{constructor(e){this.key=e,this.lu=!1}}class W6{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Xi(l=>ST(l),Fh),this.Tu=new Map,this.Iu=new Set,this.du=new ze(te.comparator),this.Eu=new Map,this.Au=new sy,this.Ru={},this.Vu=new Map,this.mu=ia.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function G6(t,e,n=!0){const r=yS(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await hS(r,e,n,!0),s}async function K6(t,e){const n=yS(t);await hS(n,e,!0,!1)}async function hS(t,e,n,r){const s=await p6(t.localStore,ur(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Q6(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&tS(t.remoteStore,s),l}async function Q6(t,e,n,r,s){t.gu=(p,m,y)=>async function(E,C,k,w){let N=C.view.nu(k);N.Ds&&(N=await hb(E.localStore,C.query,!1).then(({documents:j})=>C.view.nu(j,N)));const R=w&&w.targetChanges.get(C.targetId),M=w&&w.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(N,E.isPrimaryClient,R,M);return _b(E,C.targetId,V._u),V.snapshot}(t,p,m,y);const i=await hb(t.localStore,e,!0),a=new B6(e,i.qs),l=a.nu(i.documents),c=kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);_b(t,n,d._u);const h=new H6(e,n,a);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function Y6(t,e,n){const r=oe(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(a=>!Fh(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ng(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ly(r.remoteStore,s.targetId),ig(r,s.targetId)}).catch(ba)):(ig(r,s.targetId),await ng(r.localStore,s.targetId,!0))}async function X6(t,e){const n=oe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ly(n.remoteStore,r.targetId))}async function J6(t,e,n){const r=iD(t);try{const s=await function(a,l){const c=oe(a),d=Ie.now(),h=l.reduce((y,b)=>y.add(b.key),me());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Wr(),E=me();return c.Os.getEntries(y,h).next(C=>{b=C,b.forEach((k,w)=>{w.isValidDocument()||(E=E.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(C=>{p=C;const k=[];for(const w of l){const N=pO(w,p.get(w.key).overlayedDocument);N!=null&&k.push(new ri(w.key,N,vT(N.value.mapValue),dr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,k,l)}).next(C=>{m=C;const k=C.applyToLocalDocumentSet(p,E);return c.documentOverlayCache.saveOverlays(y,C.batchId,k)})}).then(()=>({batchId:m.batchId,changes:CT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Ru[a.currentUser.toKey()];d||(d=new ze(le)),d=d.insert(l,c),a.Ru[a.currentUser.toKey()]=d}(r,s.batchId,n),await Cc(r,s.changes),await Wh(r.remoteStore)}catch(s){const i=fy(s,"Failed to persist write");n.reject(i)}}async function fS(t,e){const n=oe(t);try{const r=await d6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?we(a.lu,14607):s.removedDocuments.size>0&&(we(a.lu,42227),a.lu=!1))}),await Cc(n,r,e)}catch(r){await ba(r)}}function bb(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=oe(a);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.wa)m.va(l)&&(d=!0)}),d&&py(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z6(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let a=new ze(te.comparator);a=a.insert(i,Lt.newNoDocument(i,ie.min()));const l=me().add(i),c=new Bh(ie.min(),new Map,new ze(le),a,l);await fS(r,c),r.du=r.du.remove(i),r.Eu.delete(e),gy(r)}else await ng(r.localStore,e,!1).then(()=>ig(r,e,n)).catch(ba)}async function eD(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await u6(n.localStore,e);mS(n,r,null),pS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cc(n,s)}catch(s){await ba(s)}}async function tD(t,e,n){const r=oe(t);try{const s=await function(a,l){const c=oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(we(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);mS(r,e,n),pS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cc(r,s)}catch(s){await ba(s)}}function pS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function mS(t,e,n){const r=oe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function ig(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||gS(t,r)})}function gS(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ly(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),gy(t))}function _b(t,e,n){for(const r of n)r instanceof uS?(t.Au.addReference(r.key,e),nD(t,r)):r instanceof dS?(G(my,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||gS(t,r.key)):re(19791,{yu:r})}function nD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(G(my,"New document in limbo: "+n),t.Iu.add(r),gy(t))}function gy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new te(Le.fromString(e)),r=t.mu.next();t.Eu.set(r,new q6(n)),t.du=t.du.insert(n,r),tS(t.remoteStore,new ys(ur(Vh(n.path)),r,"TargetPurposeLimboResolution",Oh.ue))}}async function Cc(t,e,n){const r=oe(t),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{a.push(r.gu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=oy.Es(c.targetId,d);i.push(p)}}))}),await Promise.all(a),r.hu.J_(s),await async function(c,d){const h=oe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,m=>U.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>U.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!_a(p))throw p;G(ay,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const y=h.Fs.get(m),b=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(b);h.Fs=h.Fs.insert(m,E)}}}(r.localStore,i))}async function rD(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){G(my,"User change. New user:",e.toKey());const r=await XT(n.localStore,e);n.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new X(z.CANCELLED,a))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cc(n,r.Bs)}}function sD(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return me().add(r.key);{let s=me();const i=n.Tu.get(e);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function yS(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z6.bind(null,e),e.hu.J_=z6.bind(null,e.eventManager),e.hu.pu=$6.bind(null,e.eventManager),e}function iD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tD.bind(null,e),e}class Jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return c6(this.persistence,new o6,e.initialUser,this.serializer)}Du(e){return new YT(iy.Vi,this.serializer)}bu(e){return new g6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jd.provider={build:()=>new Jd};class oD extends Jd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof Yd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qO(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new YT(r=>Yd.Vi(r,n),this.serializer)}}class og{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rD.bind(null,this.syncEngine),await V6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new U6}()}createDatastore(e){const n=Hh(e.databaseInfo.databaseId),r=function(i){return new b6(i)}(e.databaseInfo);return function(i,a,l,c){return new S6(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new N6(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>bb(this.syncEngine,n,0),function(){return mb.C()?new mb:new y6}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const p=new W6(s,i,a,l,c,d);return h&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);G(zi,"RemoteStore shutting down."),i.Ia.add(5),await Nc(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}og.provider={build:()=>new og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class aD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=G0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{G(Gs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(Gs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yp(t,e){t.asyncQueue.verifyOperationInProgress(),G(Gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{zs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{zs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Eb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lD(t);G(Gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>yb(e.remoteStore,s)),t._onlineComponents=e}async function lD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Gs,"Using user provided OfflineComponentProvider");try{await yp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await yp(t,new Jd)}}else G(Gs,"Using default OfflineComponentProvider"),await yp(t,new oD(void 0));return t._offlineComponents}async function xS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Gs,"Using user provided OnlineComponentProvider"),await Eb(t,t._uninitializedComponentsProvider._online)):(G(Gs,"Using default OnlineComponentProvider"),await Eb(t,new og))),t._onlineComponents}function cD(t){return xS(t).then(e=>e.syncEngine)}async function ag(t){const e=await xS(t),n=e.eventManager;return n.onListen=G6.bind(null,e.syncEngine),n.onUnlisten=Y6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=K6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X6.bind(null,e.syncEngine),n}function uD(t,e,n={}){const r=new Ds;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new vS({next:m=>{h.Ou(),a.enqueueAndForget(()=>lS(i,p));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new cS(Vh(l.path),h,{includeMetadataChanges:!0,ka:!0});return aS(i,p)}(await ag(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firestore.googleapis.com",Sb=!0;class kb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bS,this.ssl=Sb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Sb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BO)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yy{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new y3;switch(r.type){case"firstParty":return new b3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tb.get(n);r&&(G("ComponentProvider","Removing Datastore"),Tb.delete(n),r.terminate())}(this),Promise.resolve()}}function dD(t,e,n,r={}){var s;t=cr(t,yy);const i=ei(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(P0(`https://${c}`),R0("Firestore",!0)),a.host!==bS&&a.host!==c&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!Fs(d,l)&&(t._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Dt.MOCK_USER;else{h=dE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Dt(m)}t._authCredentials=new v3(new oT(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gh(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tc(n,st._jsonSchema))return new st(e,r||null,new te(Le.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:rt("string",st._jsonSchemaVersion),referencePath:rt("string")};class lc extends Gh{constructor(e,n,r){super(e,n,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new te(e))}withConverter(e){return new lc(this.firestore,e,this._path)}}function ln(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=G0.newId()),k3("doc","path",e),t instanceof yy){const r=Le.fromString(e,...n);return Uw(r),new st(t,null,new te(r))}{if(!(t instanceof st||t instanceof lc))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Uw(r),new st(t.firestore,t instanceof lc?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="AsyncQueue";class Cb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ZT(this,"async_queue_retry"),this.oc=()=>{const r=gp();r&&G(Nb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ds;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!_a(e))throw e;G(Nb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",Ib(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=hy.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&re(47125,{hc:Ib(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Ib(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class aa extends yy{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cb(e),this._firestoreClient=void 0,await e}}}function hD(t,e){const n=typeof t=="object"?t:wc(),r=typeof t=="string"?t:Hd,s=ti(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=lE("firestore");i&&dD(s,...i)}return s}function vy(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fD(t),t._firestoreClient}function fD(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,h){return new V3(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new aD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Nt.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tc(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:rt("string",Rn._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Tc(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:rt("string",fr._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tc(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pr(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:rt("string",pr._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class _S{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ES(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:t})}}class xy{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ES(this.Ec)&&pD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hh(e)}Dc(e,n,r,s=!1){return new xy({Ec:e,methodName:n,bc:r,path:Tt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TS(t){const e=t._freezeSettings(),n=Hh(t._databaseId);return new gD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yD(t,e,n,r,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);by("Data must be an object, but it was:",a,r);const l=SS(r,a);let c,d;if(i.merge)c=new wn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=lg(e,p,n);if(!a.contains(m))throw new X(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NS(h,m)||h.push(m)}c=new wn(h),d=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=a.fieldTransforms;return new mD(new on(l),c,d)}class Yh extends Qh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}class wy extends Qh{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new ac(e.serializer,AT(e.serializer,this.Cc));return new uO(e.path,n)}isEqual(e){return e instanceof wy&&this.Cc===e.Cc}}function vD(t,e,n,r){const s=t.Dc(1,e,n);by("Data must be an object, but it was:",s,r);const i=[],a=on.empty();ni(r,(c,d)=>{const h=_y(e,c,n);d=Ue(d);const p=s.gc(h);if(d instanceof Yh)i.push(h);else{const m=Xh(d,p);m!=null&&(i.push(h),a.set(h,m))}});const l=new wn(i);return new _S(a,l,s.fieldTransforms)}function xD(t,e,n,r,s,i){const a=t.Dc(1,e,n),l=[lg(e,r,n)],c=[s];if(i.length%2!=0)throw new X(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(lg(e,i[m])),c.push(i[m+1]);const d=[],h=on.empty();for(let m=l.length-1;m>=0;--m)if(!NS(d,l[m])){const y=l[m];let b=c[m];b=Ue(b);const E=a.gc(y);if(b instanceof Yh)d.push(y);else{const C=Xh(b,E);C!=null&&(d.push(y),h.set(y,C))}}const p=new wn(d);return new _S(h,p,a.fieldTransforms)}function Xh(t,e){if(kS(t=Ue(t)))return by("Unsupported field value:",e,t),SS(t,e);if(t instanceof Qh)return function(r,s){if(!ES(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Xh(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ie.fromDate(r);return{timestampValue:Qd(s.serializer,i)}}if(r instanceof Ie){const i=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qd(s.serializer,i)}}if(r instanceof fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:$T(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ry(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pr)return function(a,l){return{mapValue:{fields:{[gT]:{stringValue:yT},[qd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return ey(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${K0(r)}`)}(t,e)}function SS(t,e){const n={};return uT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(t,(r,s)=>{const i=Xh(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof fr||t instanceof Rn||t instanceof st||t instanceof Qh||t instanceof pr)}function by(t,e,n){if(!kS(n)||!lT(n)){const r=K0(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function lg(t,e,n){if((e=Ue(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return _y(t,e);throw Zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const wD=new RegExp("[~\\*/\\[\\]]");function _y(t,e,n){if(e.search(wD)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kh(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new X(z.INVALID_ARGUMENT,l+t+c)}function NS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(IS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bD extends CS{data(){return super.data()}}function IS(t,e){return typeof e=="string"?_y(t,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ED{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ni(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[qd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Qe(a.doubleValue));return new pr(i)}convertGeoPoint(e){return new fr(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);we(KT(r),9688,{name:e});const s=new rc(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ji extends CS{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(IS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ji._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:rt("string",ji._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class id extends ji{data(e={}){return super.data(e)}}class qo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new id(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new id(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new id(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:SD(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){t=cr(t,st);const e=cr(t.firestore,aa);return uD(vy(e),t._key).then(n=>RS(e,t,n))}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:rt("string",qo._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class jS extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function eh(t,e,n){t=cr(t,st);const r=cr(t.firestore,aa),s=TD(t.converter,e,n);return PS(r,[yD(TS(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dr.none())])}function Ai(t,e,n,...r){t=cr(t,st);const s=cr(t.firestore,aa),i=TS(s);let a;return a=typeof(e=Ue(e))=="string"||e instanceof Kh?xD(i,"updateDoc",t._key,e,n,r):vD(i,"updateDoc",t._key,e),PS(s,[a.toMutation(t._key,dr.exists(!0))])}function AS(t,...e){var n,r,s;t=Ue(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||jb(e[a])||(i=e[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(jb(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,d,h;if(t instanceof st)d=cr(t.firestore,aa),h=Vh(t._key.path),c={next:p=>{e[a]&&e[a](RS(d,t,p))},error:e[a+1],complete:e[a+2]};else{const p=cr(t,Gh);d=cr(p.firestore,aa),h=p._query;const m=new jS(d);c={next:y=>{e[a]&&e[a](new qo(d,m,p,y))},error:e[a+1],complete:e[a+2]},_D(t._query)}return function(m,y,b,E){const C=new vS(E),k=new cS(y,C,b);return m.asyncQueue.enqueueAndForget(async()=>aS(await ag(m),k)),()=>{C.Ou(),m.asyncQueue.enqueueAndForget(async()=>lS(await ag(m),k))}}(vy(d),h,l,c)}function PS(t,e){return function(r,s){const i=new Ds;return r.asyncQueue.enqueueAndForget(async()=>J6(await cD(r),s,i)),i.promise}(vy(t),e)}function RS(t,e,n){const r=n.docs.get(e._key),s=new jS(t);return new ji(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function OS(t){return new wy("increment",t)}(function(e,n=!0){(function(s){wa=s})(Yi),Xn(new Vn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new aa(new x3(r.getProvider("auth-internal")),new _3(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(d.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),hn(Dw,Mw,e),hn(Dw,Mw,"esm2017")})();var kD="firebase",ND="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn(kD,ND,"app");const DS="@firebase/installations",Ey="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=1e4,LS=`w:${Ey}`,VS="FIS_v2",CD="https://firebaseinstallations.googleapis.com/v1",ID=60*60*1e3,jD="installations",AD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$i=new Qi(jD,AD,PD);function FS(t){return t instanceof Fn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US({projectId:t}){return`${CD}/projects/${t}/installations`}function zS(t){return{token:t.token,requestStatus:2,expiresIn:OD(t.expiresIn),creationTime:Date.now()}}async function $S(t,e){const r=(await e.json()).error;return $i.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function BS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function RD(t,{refreshToken:e}){const n=BS(t);return n.append("Authorization",DD(e)),n}async function HS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function OD(t){return Number(t.replace("s","000"))}function DD(t){return`${VS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=US(t),s=BS(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:VS,appId:t.appId,sdkVersion:LS},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await HS(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:zS(d.authToken)}}else throw await $S("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=/^[cdef][\w-]{21}$/,cg="";function FD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=UD(t);return VD.test(n)?n:cg}catch{return cg}}function UD(t){return LD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;function GS(t,e){const n=Zh(t);KS(n,e),zD(n,e)}function KS(t,e){const n=WS.get(t);if(n)for(const r of n)r(e)}function zD(t,e){const n=$D();n&&n.postMessage({key:t,fid:e}),BD()}let ki=null;function $D(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=t=>{KS(t.data.key,t.data.fid)}),ki}function BD(){WS.size===0&&ki&&(ki.close(),ki=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="firebase-installations-database",qD=1,Bi="firebase-installations-store";let vp=null;function Ty(){return vp||(vp=mE(HD,qD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bi)}}})),vp}async function th(t,e){const n=Zh(t),s=(await Ty()).transaction(Bi,"readwrite"),i=s.objectStore(Bi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&GS(t,e.fid),e}async function QS(t){const e=Zh(t),r=(await Ty()).transaction(Bi,"readwrite");await r.objectStore(Bi).delete(e),await r.done}async function ef(t,e){const n=Zh(t),s=(await Ty()).transaction(Bi,"readwrite"),i=s.objectStore(Bi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&GS(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t){let e;const n=await ef(t.appConfig,r=>{const s=WD(r),i=GD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===cg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function WD(t){const e=t||{fid:FD(),registrationStatus:0};return YS(e)}function GD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject($i.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=KD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:QD(t)}:{installationEntry:e}}async function KD(t,e){try{const n=await MD(t,e);return th(t.appConfig,n)}catch(n){throw FS(n)&&n.customData.serverCode===409?await QS(t.appConfig):await th(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function QD(t){let e=await Ab(t.appConfig);for(;e.registrationStatus===1;)await qS(100),e=await Ab(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Sy(t);return r||n}return e}function Ab(t){return ef(t,e=>{if(!e)throw $i.create("installation-not-found");return YS(e)})}function YS(t){return YD(t)?{fid:t.fid,registrationStatus:0}:t}function YD(t){return t.registrationStatus===1&&t.registrationTime+MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD({appConfig:t,heartbeatServiceProvider:e},n){const r=JD(t,n),s=RD(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:LS,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await HS(()=>fetch(r,l));if(c.ok){const d=await c.json();return zS(d)}else throw await $S("Generate Auth Token",c)}function JD(t,{fid:e}){return`${US(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ky(t,e=!1){let n;const r=await ef(t.appConfig,i=>{if(!XS(i))throw $i.create("not-registered");const a=i.authToken;if(!e&&tM(a))return i;if(a.requestStatus===1)return n=ZD(t,e),i;{if(!navigator.onLine)throw $i.create("app-offline");const l=rM(i);return n=eM(t,l),l}});return n?await n:r.authToken}async function ZD(t,e){let n=await Pb(t.appConfig);for(;n.authToken.requestStatus===1;)await qS(100),n=await Pb(t.appConfig);const r=n.authToken;return r.requestStatus===0?ky(t,e):r}function Pb(t){return ef(t,e=>{if(!XS(e))throw $i.create("not-registered");const n=e.authToken;return sM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function eM(t,e){try{const n=await XD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await th(t.appConfig,r),n}catch(n){if(FS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await QS(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await th(t.appConfig,r)}throw n}}function XS(t){return t!==void 0&&t.registrationStatus===2}function tM(t){return t.requestStatus===2&&!nM(t)}function nM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ID}function rM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function sM(t){return t.requestStatus===1&&t.requestTime+MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Sy(e);return r?r.catch(console.error):ky(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e=!1){const n=t;return await aM(n),(await ky(n,e)).token}async function aM(t){const{registrationPromise:e}=await Sy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){if(!t||!t.options)throw xp("App Configuration");if(!t.name)throw xp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw xp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xp(t){return $i.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="installations",cM="installations-internal",uM=t=>{const e=t.getProvider("app").getImmediate(),n=lM(e),r=ti(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},dM=t=>{const e=t.getProvider("app").getImmediate(),n=ti(e,JS).getImmediate();return{getId:()=>iM(n),getToken:s=>oM(n,s)}};function hM(){Xn(new Vn(JS,uM,"PUBLIC")),Xn(new Vn(cM,dM,"PRIVATE"))}hM();hn(DS,Ey);hn(DS,Ey,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="analytics",fM="firebase_id",pM="origin",mM=60*1e3,gM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new Ch("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new Qi("analytics","Analytics",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){if(!t.startsWith(Ny)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return fn.warn(e.message),""}return t}function ZS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function wM(t,e){const n=xM("firebase-js-sdk-policy",{createScriptURL:vM}),r=document.createElement("script"),s=`${Ny}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function bM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _M(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await ZS(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){fn.error(l)}t("config",s,i)}async function EM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await ZS(n);for(const c of a){const d=l.find(p=>p.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){fn.error(i)}}function TM(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await EM(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await _M(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){fn.error(l)}}return s}function SM(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=TM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function kM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ny)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=30,CM=1e3;class IM{constructor(e={},n=CM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ek=new IM;function jM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function AM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:jM(r)},i=gM.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function PM(t,e=ek,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw En.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw En.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new DM;return setTimeout(async()=>{l.abort()},mM),tk({appId:r,apiKey:s,measurementId:i},a,l,e)}async function tk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=ek){var i;const{appId:a,measurementId:l}=t;try{await RM(r,e)}catch(c){if(l)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const c=await AM(t);return s.deleteThrottleMetadata(a),c}catch(c){const d=c;if(!OM(d)){if(s.deleteThrottleMetadata(a),l)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:l};throw c}const h=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?lw(n,s.intervalMillis,NM):lw(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(a,p),fn.debug(`Calling attemptFetch again in ${h} millis`),tk(t,p,r,s)}}function RM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OM(t){if(!(t instanceof Fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class DM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function MM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(){if(D0())try{await M0()}catch(t){return fn.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return fn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VM(t,e,n,r,s,i,a){var l;const c=PM(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>fn.error(y)),e.push(c);const d=LM().then(y=>{if(y)return r.getId()}),[h,p]=await Promise.all([c,d]);kM(i)||wM(i,h.measurementId),s("js",new Date);const m=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return m[pM]="firebase",m.update=!0,p!=null&&(m[fM]=p),s("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.app=e}_delete(){return delete Il[this.app.options.appId],Promise.resolve()}}let Il={},Rb=[];const Ob={};let wp="dataLayer",UM="gtag",Db,nk,Mb=!1;function zM(){const t=[];if(O0()&&t.push("This is a browser extension environment."),hE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});fn.warn(n.message)}}function $M(t,e,n){zM();const r=t.options.appId;if(!r)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Il[r]!=null)throw En.create("already-exists",{id:r});if(!Mb){bM(wp);const{wrappedGtag:i,gtagCore:a}=SM(Il,Rb,Ob,wp,UM);nk=i,Db=a,Mb=!0}return Il[r]=VM(t,Rb,Ob,e,Db,wp,n),new FM(t)}function BM(t=wc()){t=Ue(t);const e=ti(t,nh);return e.isInitialized()?e.getImmediate():HM(t)}function HM(t,e={}){const n=ti(t,nh);if(n.isInitialized()){const s=n.getImmediate();if(Fs(e,n.getOptions()))return s;throw En.create("already-initialized")}return n.initialize({options:e})}async function qM(){if(O0()||!hE()||!D0())return!1;try{return await M0()}catch{return!1}}function WM(t,e,n,r){t=Ue(t),MM(nk,Il[t.app.options.appId],e,n,r).catch(s=>fn.error(s))}const Lb="@firebase/analytics",Vb="0.10.17";function GM(){Xn(new Vn(nh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return $M(r,s,n)},"PUBLIC")),Xn(new Vn("analytics-internal",t,"PRIVATE")),hn(Lb,Vb),hn(Lb,Vb,"esm2017");function t(e){try{const n=e.getProvider(nh).getImmediate();return{logEvent:(r,s,i)=>WM(n,r,s,i)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}GM();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebasestorage.googleapis.com",sk="storageBucket",KM=2*60*1e3,QM=10*60*1e3,YM=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends Fn{constructor(e,n,r=0){super(bp(e),`Firebase Storage: ${n} (${bp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ae;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ae||(Ae={}));function bp(t){return"storage/"+t}function Cy(){const t="An unknown error occurred, please check the error payload for server response.";return new $e(Ae.UNKNOWN,t)}function XM(t){return new $e(Ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JM(t){return new $e(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $e(Ae.UNAUTHENTICATED,t)}function eL(){return new $e(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tL(t){return new $e(Ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ik(){return new $e(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ok(){return new $e(Ae.CANCELED,"User canceled the upload/download.")}function nL(t){return new $e(Ae.INVALID_URL,"Invalid URL '"+t+"'.")}function rL(t){return new $e(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sL(){return new $e(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sk+"' property when initializing the app?")}function ak(){return new $e(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iL(){return new $e(Ae.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function oL(){return new $e(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aL(t){return new $e(Ae.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ug(t){return new $e(Ae.INVALID_ARGUMENT,t)}function lk(){return new $e(Ae.APP_DELETED,"The Firebase app was deleted.")}function lL(t){return new $e(Ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new $e(Ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xa(t){throw new $e(Ae.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bn.makeFromUrl(e,n)}catch{return new bn(e,"")}if(r.path==="")return r;throw rL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},E=n===rk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",k=new RegExp(`^https?://${E}/${s}/${C}`,"i"),N=[{regex:l,indices:c,postModify:i},{regex:y,indices:b,postModify:d},{regex:k,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<N.length;R++){const M=N[R],V=M.regex.exec(e);if(V){const j=V[M.indices.bucket];let x=V[M.indices.path];x||(x=""),r=new bn(j,x),M.postModify(r);break}}if(r==null)throw nL(e);return r}}class cL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function p(C){s=setTimeout(()=>{s=null,t(y,c())},C)}function m(){i&&clearTimeout(i)}function y(C,...k){if(d){m();return}if(C){m(),h.call(null,C,...k);return}if(c()||a){m(),h.call(null,C,...k);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let b=!1;function E(C){b||(b=!0,m(),!d&&(s!==null?(C||(l=2),clearTimeout(s),p(0)):C||(l=1)))}return p(0),i=setTimeout(()=>{a=!0,E(!0)},n),E}function dL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){return t!==void 0}function fL(t){return typeof t=="function"}function pL(t){return typeof t=="object"&&!Array.isArray(t)}function tf(t){return typeof t=="string"||t instanceof String}function Fb(t){return Iy()&&t instanceof Blob}function Iy(){return typeof Blob<"u"}function Ub(t,e,n,r){if(r<e)throw ug(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ug(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ck(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Pi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pi||(Pi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,s,i,a,l,c,d,h,p,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,E)=>{this.resolve_=b,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Iu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Pi.NO_ERROR,c=i.getStatus();if(!l||uk(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Pi.ABORT;r(!1,new Iu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Iu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());hL(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=Cy();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?lk():ok();a(c)}else{const c=ik();a(c)}};this.canceled_?n(!1,new Iu(!1,null,!0)):this.backoffId_=uL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Iu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function gL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function yL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function wL(t,e,n,r,s,i,a=!0,l=!1){const c=ck(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return vL(h,e),gL(h,n),yL(h,i),xL(h,r),new mL(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _L(...t){const e=bL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Iy())return new Blob(t);throw new $e(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){if(typeof atob>"u")throw aL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,n){this.data=e,this.contentType=n||null}}function SL(t,e){switch(t){case sr.RAW:return new _p(dk(e));case sr.BASE64:case sr.BASE64URL:return new _p(hk(t,e));case sr.DATA_URL:return new _p(NL(e),CL(e))}throw Cy()}function dk(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kL(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(sr.DATA_URL,"Malformed data URL.")}return dk(e)}function hk(t,e){switch(t){case sr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TL(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class fk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function NL(t){const e=new fk(t);return e.base64?hk(sr.BASE64,e.rest):kL(e.rest)}function CL(t){return new fk(t).contentType}function IL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){let r=0,s="";Fb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Fb(this.data_)){const r=this.data_,s=EL(r,e,n);return s===null?null:new Ir(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ir(r,!0)}}static getBlob(...e){if(Iy()){const n=e.map(r=>r instanceof Ir?r.data_:r);return new Ir(_L.apply(null,n))}else{const n=e.map(a=>tf(a)?SL(sr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Ir(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){let e;try{e=JSON.parse(t)}catch{return null}return pL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function AL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){return e}class $t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||PL}}let ju=null;function RL(t){return!tf(t)||t.length<2?t:mk(t)}function jy(){if(ju)return ju;const t=[];t.push(new $t("bucket")),t.push(new $t("generation")),t.push(new $t("metageneration")),t.push(new $t("name","fullPath",!0));function e(i,a){return RL(a)}const n=new $t("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new $t("size");return s.xform=r,t.push(s),t.push(new $t("timeCreated")),t.push(new $t("updated")),t.push(new $t("md5Hash",null,!0)),t.push(new $t("cacheControl",null,!0)),t.push(new $t("contentDisposition",null,!0)),t.push(new $t("contentEncoding",null,!0)),t.push(new $t("contentLanguage",null,!0)),t.push(new $t("contentType",null,!0)),t.push(new $t("metadata","customMetadata",!0)),ju=t,ju}function OL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new bn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function DL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return OL(r,t),r}function gk(t,e,n){const r=pk(e);return r===null?null:DL(t,r,n)}function ML(t,e,n,r){const s=pk(e);if(s===null||!tf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,p=t.fullPath,m="/b/"+a(h)+"/o/"+a(p),y=Ta(m,n,r),b=ck({alt:"media",token:d});return y+b})[0]}function yk(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Zi{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){if(!t)throw Cy()}function Ay(t,e){function n(r,s){const i=gk(t,s,e);return Mr(i!==null),i}return n}function LL(t,e){function n(r,s){const i=gk(t,s,e);return Mr(i!==null),ML(i,s,t.host,t._protocol)}return n}function Ic(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=eL():s=ZM():n.getStatus()===402?s=JM(t.bucket):n.getStatus()===403?s=tL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Py(t){const e=Ic(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=XM(t.path)),i.serverResponse=s.serverResponse,i}return n}function VL(t,e,n){const r=e.fullServerUrl(),s=Ta(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new Zi(s,i,Ay(t,n),a);return l.errorHandler=Py(e),l}function FL(t,e,n){const r=e.fullServerUrl(),s=Ta(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new Zi(s,i,LL(t,n),a);return l.errorHandler=Py(e),l}function UL(t,e){const n=e.fullServerUrl(),r=Ta(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(c,d){}const l=new Zi(r,s,a,i);return l.successCodes=[200,204],l.errorHandler=Py(e),l}function zL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vk(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=zL(null,e)),r}function xk(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let R=0;R<2;R++)N=N+Math.random().toString().slice(2);return N}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=vk(e,r,s),h=yk(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=Ir.getBlob(p,r,m);if(y===null)throw ak();const b={name:d.fullPath},E=Ta(i,t.host,t._protocol),C="POST",k=t.maxUploadRetryTime,w=new Zi(E,C,Ay(t,n),k);return w.urlParams=b,w.headers=a,w.body=y.uploadData(),w.errorHandler=Ic(e),w}class rh{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Ry(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Mr(!1)}return Mr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function $L(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=vk(e,r,s),l={name:a.fullPath},c=Ta(i,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=yk(a,n),m=t.maxUploadRetryTime;function y(E){Ry(E);let C;try{C=E.getResponseHeader("X-Goog-Upload-URL")}catch{Mr(!1)}return Mr(tf(C)),C}const b=new Zi(c,d,y,m);return b.urlParams=l,b.headers=h,b.body=p,b.errorHandler=Ic(e),b}function BL(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const h=Ry(d,["active","final"]);let p=null;try{p=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mr(!1)}p||Mr(!1);const m=Number(p);return Mr(!isNaN(m)),new rh(m,r.size(),h==="final")}const a="POST",l=t.maxUploadRetryTime,c=new Zi(n,a,i,l);return c.headers=s,c.errorHandler=Ic(e),c}const zb=256*1024;function HL(t,e,n,r,s,i,a,l){const c=new rh(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw iL();const d=c.total-c.current;let h=d;s>0&&(h=Math.min(h,s));const p=c.current,m=p+h;let y="";h===0?y="finalize":d===h?y="upload, finalize":y="upload";const b={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},E=r.slice(p,m);if(E===null)throw ak();function C(R,M){const V=Ry(R,["active","final"]),j=c.current+h,x=r.size();let S;return V==="final"?S=Ay(e,i)(R,M):S=null,new rh(j,x,V==="final",S)}const k="POST",w=e.maxUploadRetryTime,N=new Zi(n,k,C,w);return N.headers=b,N.body=E.uploadData(),N.progressCallback=l||null,N.errorHandler=Ic(t),N}const rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ep(t){switch(t){case"running":case"pausing":case"canceling":return rn.RUNNING;case"paused":return rn.PAUSED;case"success":return rn.SUCCESS;case"canceled":return rn.CANCELED;case"error":return rn.ERROR;default:return rn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,r){if(fL(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class WL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Xa("cannot .send() more than once");if(ei(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GL extends WL{initXhr(){this.xhr_.responseType="text"}}function fs(){return new GL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=jy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ae.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(uk(s.status,[]))if(i)s=ik();else{this.sleepTime=Math.max(this.sleepTime*2,YM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ae.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=$L(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=BL(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,fs,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=zb*this._chunkMultiplier,n=new rh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=HL(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(a,fs,s,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){zb*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=VL(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=xk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ok(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ep(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new qL(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ep(this._state)){case rn.SUCCESS:ho(this._resolve.bind(null,this.snapshot))();break;case rn.CANCELED:case rn.ERROR:const n=this._reject;ho(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ep(this._state)){case rn.RUNNING:case rn.PAUSED:e.next&&ho(e.next.bind(e,this.snapshot))();break;case rn.SUCCESS:e.complete&&ho(e.complete.bind(e))();break;case rn.CANCELED:case rn.ERROR:e.error&&ho(e.error.bind(e,this._error))();break;default:e.error&&ho(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this._service=e,n instanceof bn?this._location=n:this._location=bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Hi(e,n)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mk(this._location.path)}get storage(){return this._service}get parent(){const e=jL(this._location.path);if(e===null)return null;const n=new bn(this._location.bucket,e);return new Hi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw lL(e)}}function QL(t,e,n){t._throwIfRoot("uploadBytes");const r=xk(t.storage,t._location,jy(),new Ir(e,!0),n);return t.storage.makeRequestWithTokens(r,fs).then(s=>({metadata:s,ref:t}))}function YL(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new KL(t,new Ir(e),n)}function XL(t){t._throwIfRoot("getDownloadURL");const e=FL(t.storage,t._location,jy());return t.storage.makeRequestWithTokens(e,fs).then(n=>{if(n===null)throw oL();return n})}function JL(t){t._throwIfRoot("deleteObject");const e=UL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fs)}function ZL(t,e){const n=AL(t._location.path,e),r=new bn(t._location.bucket,n);return new Hi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){return/^[A-Za-z]+:\/\//.test(t)}function tV(t,e){return new Hi(t,e)}function wk(t,e){if(t instanceof Oy){const n=t;if(n._bucket==null)throw sL();const r=new Hi(n,n._bucket);return e!=null?wk(r,e):r}else return e!==void 0?ZL(t,e):t}function nV(t,e){if(e&&eV(e)){if(t instanceof Oy)return tV(t,e);throw ug("To use ref(service, url), the first argument must be a Storage instance.")}else return wk(t,e)}function $b(t,e){const n=e==null?void 0:e[sk];return n==null?null:bn.makeFromBucketSpec(n,t)}function rV(t,e,n,r={}){t.host=`${e}:${n}`;const s=ei(e);s&&(P0(`https://${t.host}/b`),R0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:dE(i,t.app.options.projectId))}class Oy{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KM,this._maxUploadRetryTime=QM,this._requests=new Set,s!=null?this._bucket=bn.makeFromBucketSpec(s,this._host):this._bucket=$b(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=$b(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ub("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ub("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new cL(lk());{const a=wL(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Bb="@firebase/storage",Hb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="storage";function eo(t,e,n){return t=Ue(t),QL(t,e,n)}function _k(t,e,n){return t=Ue(t),YL(t,e,n)}function Gr(t){return t=Ue(t),XL(t)}function Dy(t){return t=Ue(t),JL(t)}function to(t,e){return t=Ue(t),nV(t,e)}function sV(t=wc(),e){t=Ue(t);const r=ti(t,bk).getImmediate({identifier:e}),s=lE("storage");return s&&iV(r,...s),r}function iV(t,e,n,r={}){rV(t,e,n,r)}function oV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Oy(n,r,s,e,Yi)}function aV(){Xn(new Vn(bk,oV,"PUBLIC").setMultipleInstances(!0)),hn(Bb,Hb,""),hn(Bb,Hb,"esm2017")}aV();const lV={apiKey:"AIzaSyB3wZTanCdGxG6jpo39CkqUcM9LhK17BME",authDomain:"ajnabicam.firebaseapp.com",projectId:"ajnabicam",storageBucket:"ajnabicam.appspot.com",messagingSenderId:"558188110620",appId:"1:558188110620:web:500cdf55801d5b00e9d0d9",measurementId:"G-XM2WK7W95Q"},Ks=c4().length===0?gE(lV):wc(),Ri=Rh(Ks),Wt=hD(Ks),yn=sV(Ks);qM().then(t=>{t&&BM(Ks)}).catch(()=>{});async function Ek(t){try{const e=ln(Wt,"users",t);(await Jh(e)).exists()||(await eh(e,{userId:t,coins:100,createdAt:new Date,updatedAt:new Date,onboardingComplete:!1,username:"User",gender:"other",language:"en"}),console.log("✅ User document created for:",t))}catch(e){throw console.error("❌ Error ensuring user document exists:",e),e}}async function cV(t,e){try{const n=ln(Wt,"users",t);await Ek(t),await Ai(n,{coins:OS(e),updatedAt:new Date}),console.log(`✅ Added ${e} coins to user ${t}`)}catch(n){throw console.error("❌ Error adding coins:",n),n}}async function uV(t,e){try{const n=ln(Wt,"users",t),r=await Jh(n);return r.exists()?(r.data().coins||0)<e?{success:!1,message:"Insufficient coins"}:(await Ai(n,{coins:OS(-e),updatedAt:new Date}),console.log(`✅ Spent ${e} coins for user ${t}`),{success:!0,message:"Coins spent successfully"}):{success:!1,message:"User not found"}}catch(n){return console.error("❌ Error spending coins:",n),{success:!1,message:"Error spending coins"}}}const Tk=v.createContext(null),qi=()=>{const t=v.useContext(Tk);if(!t)throw new Error("useCoin must be used within a CoinProvider");return t},dV=({children:t})=>{const[e,n]=v.useState(0),[r,s]=v.useState(0),[i,a]=v.useState(!0),[l,c]=v.useState(0),[d,h]=v.useState(!1),[p,m]=v.useState(!0),[y,b]=v.useState(null),E=3,C=Rh(Ks);v.useEffect(()=>{const x=$E(C,S=>{S?b(S.uid):(b(null),n(0),m(!1))});return()=>x()},[C]),v.useEffect(()=>{if(!y)return;const x=ln(Wt,"users",y),S=AS(x,_=>{if(_.exists()){const A=_.data();n(A.coins||0),h(A.onboardingComplete||!1)}m(!1)},_=>{console.error("Error listening to user document:",_),m(!1)});return()=>S()},[y]),v.useEffect(()=>{const x=localStorage.getItem("ajnabicam_last_daily_bonus"),S=localStorage.getItem("ajnabicam_ads_today"),_=localStorage.getItem("ajnabicam_ads_date"),A=localStorage.getItem("ajnabicam_streak_data"),P=new Date().toDateString();if(a(x!==P),_!==P?(s(0),localStorage.setItem("ajnabicam_ads_today","0"),localStorage.setItem("ajnabicam_ads_date",P)):S&&s(parseInt(S)),A)try{const{streak:I,lastDate:Z}=JSON.parse(A),ee=new Date;ee.setDate(ee.getDate()-1),Z===P||Z===ee.toDateString()?c(I):(c(0),localStorage.setItem("ajnabicam_streak_data",JSON.stringify({streak:0,lastDate:""})))}catch(I){console.error("Error parsing streak data:",I),c(0)}},[]);const k=async x=>{if(!y)return console.error("No authenticated user"),!1;try{return await cV(y,x),!0}catch(S){return console.error("Error adding coins:",S),!1}},w=async x=>{if(!y)return console.error("No authenticated user"),!1;try{const S=await uV(y,x);return S.success||console.warn("Failed to deduct coins:",S.message),S.success}catch(S){return console.error("Error deducting coins:",S),!1}},N=async()=>{if(r>=E){alert("❌ You've reached the daily limit of 3 ads. Come back tomorrow!");return}const x=r+1;if(s(x),localStorage.setItem("ajnabicam_ads_today",x.toString()),await k(10)){const _=E-x;_>0?alert(`🎉 You earned 10 coins! ${_} ads remaining today.`):alert("🎉 You earned 10 coins! That's all ads for today. Come back tomorrow for more!")}else alert("❌ Failed to add coins. Please try again.")},R=async()=>{if(!i||!y)return y||alert("❌ Please sign in to claim daily bonus."),!1;const x=new Date().toDateString(),S=await k(5);if(S){a(!1),localStorage.setItem("ajnabicam_last_daily_bonus",x);const _=localStorage.getItem("ajnabicam_streak_data");let A=1;if(_)try{const{streak:P,lastDate:I}=JSON.parse(_),Z=new Date;Z.setDate(Z.getDate()-1),I===Z.toDateString()&&(A=P+1)}catch(P){console.error("Error parsing streak data:",P)}if(c(A),localStorage.setItem("ajnabicam_streak_data",JSON.stringify({streak:A,lastDate:x})),A===3){const P=await k(20);alert(P?`🎉 Daily bonus claimed! +5 coins
🔥 3-day streak bonus! +20 coins
Total: +25 coins!`:`🎉 Daily bonus claimed! +5 coins
🔥 Current streak: ${A} days`)}else alert(`🎉 Daily bonus claimed! +5 coins
🔥 Current streak: ${A} days`)}else alert("❌ Failed to claim daily bonus. Please try again.");return S},M=async()=>{await k(3)&&console.log("🎉 Chat completed! You earned 3 coins!")},V=async()=>{l>=3&&l%3===0&&await k(20)&&alert(`🔥 ${l}-day streak bonus! You earned 20 coins!`)},j=async()=>{await k(25)&&alert("🎉 You earned 25 coins for referring a friend!")};return o.jsx(Tk.Provider,{value:{coins:e,addCoins:k,deductCoins:w,watchAd:N,referFriend:j,claimDailyBonus:R,completeChat:M,checkStreakBonus:V,adsWatchedToday:r,maxAdsPerDay:E,canClaimDailyBonus:i,currentStreak:l,hasCompletedOnboarding:d,isLoading:p,currentUser:y},children:t})},Sk=v.createContext(null),My=()=>{const t=v.useContext(Sk);if(!t)throw new Error("useFriends must be used within a FriendsProvider");return t},hV=({children:t})=>{const[e,n]=v.useState([]),r=3;v.useEffect(()=>{const h=localStorage.getItem("ajnabicam_friends");if(h)try{const p=JSON.parse(h).map(m=>({...m,addedAt:new Date(m.addedAt),lastSeen:m.lastSeen?new Date(m.lastSeen):void 0}));n(p)}catch(p){console.error("Error loading friends:",p),n([])}},[]),v.useEffect(()=>{e.length>=0&&localStorage.setItem("ajnabicam_friends",JSON.stringify(e))},[e]);const s=h=>{if(!(localStorage.getItem("premium_status")==="true")&&e.length>=r)return!1;if(e.some(y=>y.id===h.id))return!0;if(!h.id||!h.name)return console.error("Invalid friend data:",h),!1;const m={...h,addedAt:new Date};return n(y=>[...y,m]),!0},i=h=>{n(p=>p.filter(m=>m.id!==h))},a=(h,p)=>{n(m=>m.map(y=>y.id===h?{...y,isOnline:p,lastSeen:p?void 0:new Date}:y))},l=h=>e.find(p=>p.id===h),d=localStorage.getItem("premium_status")==="true"||e.length<r;return o.jsx(Sk.Provider,{value:{friends:e,addFriend:s,removeFriend:i,updateFriendStatus:a,canAddMoreFriends:d,maxFreeLimit:r,getFriendById:l},children:t})};class fV{constructor(){Re(this,"peer");this.initPeer()}initPeer(){try{this.peer&&this.peer.signalingState!=="closed"&&(this.peer.getTransceivers().forEach(e=>{e&&e.stop&&e.stop()}),this.peer.close())}catch(e){console.warn("Error closing existing peer connection:",e)}this.peer=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302","stun:global.stun.twilio.com:3478","stun:stun.stunprotocol.org:3478","stun:stun.voipstunt.com","stun:stun.services.mozilla.com"]}]}),this.peer.oniceconnectionstatechange=()=>{console.log("ICE connection state:",this.peer.iceConnectionState),this.peer.iceConnectionState==="failed"&&(console.warn("ICE connection failed, attempting restart"),this.peer.restartIce())},this.peer.onconnectionstatechange=()=>{console.log("Connection state:",this.peer.connectionState)}}async getOffer(){var e;try{if(this.peer&&this.peer.signalingState==="stable"){const n=await this.peer.createOffer();return await this.peer.setLocalDescription(new RTCSessionDescription(n)),this.peer.localDescription}return console.warn("Peer not in stable state for creating offer:",(e=this.peer)==null?void 0:e.signalingState),null}catch(n){return console.error("Error creating offer:",n),null}}async getAnswer(e){var n;try{if(this.peer&&(this.peer.signalingState==="stable"||this.peer.signalingState==="have-remote-offer")){await this.peer.setRemoteDescription(e);const r=await this.peer.createAnswer();return await this.peer.setLocalDescription(new RTCSessionDescription(r)),this.peer.localDescription}return console.warn("Peer not in correct state for creating answer:",(n=this.peer)==null?void 0:n.signalingState),null}catch(r){return console.error("Error creating answer:",r),null}}async setRemoteDescription(e){var n;try{this.peer&&this.peer.signalingState==="have-local-offer"?await this.peer.setRemoteDescription(new RTCSessionDescription(e)):console.warn("Peer not in correct state for setting remote description:",(n=this.peer)==null?void 0:n.signalingState)}catch(r){console.error("Error setting remote description:",r)}}}const Y=new fV,pV="modulepreload",mV=function(t){return"/"+t},qb={},tn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=mV(c),c in qb)return;qb[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":pV,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var gV=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&yV(i,n.attrs),n.text&&(i.text=""+n.text);var a="onload"in i?Wb:vV;a(i,r),i.onload||Wb(i,r),s.appendChild(i)};function yV(t,e){for(var n in e)t.setAttribute(n,e[n])}function Wb(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function vV(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var xV=function(e){return wV(e)&&!bV(e)};function wV(t){return!!t&&typeof t=="object"}function bV(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||TV(t)}var _V=typeof Symbol=="function"&&Symbol.for,EV=_V?Symbol.for("react.element"):60103;function TV(t){return t.$$typeof===EV}function SV(t){return Array.isArray(t)?[]:{}}function cc(t,e){return e.clone!==!1&&e.isMergeableObject(t)?la(SV(t),t,e):t}function kV(t,e,n){return t.concat(e).map(function(r){return cc(r,n)})}function NV(t,e){if(!e.customMerge)return la;var n=e.customMerge(t);return typeof n=="function"?n:la}function CV(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Gb(t){return Object.keys(t).concat(CV(t))}function kk(t,e){try{return e in t}catch{return!1}}function IV(t,e){return kk(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function jV(t,e,n){var r={};return n.isMergeableObject(t)&&Gb(t).forEach(function(s){r[s]=cc(t[s],n)}),Gb(e).forEach(function(s){IV(t,s)||(kk(t,s)&&n.isMergeableObject(e[s])?r[s]=NV(s,n)(t[s],e[s],n):r[s]=cc(e[s],n))}),r}function la(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||kV,n.isMergeableObject=n.isMergeableObject||xV,n.cloneUnlessOtherwiseSpecified=cc;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):jV(t,e,n):cc(e,n)}la.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return la(r,s,n)},{})};var AV=la,Nk=AV,PV=Object.create,nf=Object.defineProperty,RV=Object.getOwnPropertyDescriptor,OV=Object.getOwnPropertyNames,DV=Object.getPrototypeOf,MV=Object.prototype.hasOwnProperty,LV=(t,e)=>{for(var n in e)nf(t,n,{get:e[n],enumerable:!0})},Ck=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of OV(e))!MV.call(t,s)&&s!==n&&nf(t,s,{get:()=>e[s],enumerable:!(r=RV(e,s))||r.enumerable});return t},Ly=(t,e,n)=>(n=t!=null?PV(DV(t)):{},Ck(!t||!t.__esModule?nf(n,"default",{value:t,enumerable:!0}):n,t)),VV=t=>Ck(nf({},"__esModule",{value:!0}),t),Ik={};LV(Ik,{callPlayer:()=>eF,getConfig:()=>JV,getSDK:()=>XV,isBlobUrl:()=>nF,isMediaStream:()=>tF,lazy:()=>$V,omit:()=>ZV,parseEndTime:()=>KV,parseStartTime:()=>GV,queryString:()=>YV,randomString:()=>QV,supportsWebKitPresentationMode:()=>rF});var rf=VV(Ik),FV=Ly(v),UV=Ly(gV),zV=Ly(Nk);const $V=t=>FV.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),BV=/[?&#](?:start|t)=([0-9hms]+)/,HV=/[?&#]end=([0-9hms]+)/,dg=/(\d+)(h|m|s)/g,qV=/^\d+$/;function jk(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match(dg))return WV(r);if(qV.test(r))return parseInt(r)}}function WV(t){let e=0,n=dg.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=dg.exec(t)}return e}function GV(t){return jk(t,BV)}function KV(t){return jk(t,HV)}function QV(){return Math.random().toString(36).substr(2,5)}function YV(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function Tp(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const fo={},XV=function(e,n,r=null,s=()=>!0,i=UV.default){const a=Tp(n);return a&&s(a)?Promise.resolve(a):new Promise((l,c)=>{if(fo[e]){fo[e].push({resolve:l,reject:c});return}fo[e]=[{resolve:l,reject:c}];const d=h=>{fo[e].forEach(p=>p.resolve(h))};if(r){const h=window[r];window[r]=function(){h&&h(),d(Tp(n))}}i(e,h=>{h?(fo[e].forEach(p=>p.reject(h)),fo[e]=null):r||d(Tp(n))})})};function JV(t,e){return(0,zV.default)(e.config,t.config)}function ZV(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function eF(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c – `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function tF(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function nF(t){return/^blob:/.test(t)}function rF(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var Vy=Object.defineProperty,sF=Object.getOwnPropertyDescriptor,iF=Object.getOwnPropertyNames,oF=Object.prototype.hasOwnProperty,aF=(t,e)=>{for(var n in e)Vy(t,n,{get:e[n],enumerable:!0})},lF=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iF(e))!oF.call(t,s)&&s!==n&&Vy(t,s,{get:()=>e[s],enumerable:!(r=sF(e,s))||r.enumerable});return t},cF=t=>lF(Vy({},"__esModule",{value:!0}),t),Ak={};aF(Ak,{AUDIO_EXTENSIONS:()=>Fy,DASH_EXTENSIONS:()=>qk,FLV_EXTENSIONS:()=>Wk,HLS_EXTENSIONS:()=>zy,MATCH_URL_DAILYMOTION:()=>zk,MATCH_URL_FACEBOOK:()=>Dk,MATCH_URL_FACEBOOK_WATCH:()=>Mk,MATCH_URL_KALTURA:()=>Hk,MATCH_URL_MIXCLOUD:()=>$k,MATCH_URL_MUX:()=>Ok,MATCH_URL_SOUNDCLOUD:()=>Pk,MATCH_URL_STREAMABLE:()=>Lk,MATCH_URL_TWITCH_CHANNEL:()=>Uk,MATCH_URL_TWITCH_VIDEO:()=>Fk,MATCH_URL_VIDYARD:()=>Bk,MATCH_URL_VIMEO:()=>Rk,MATCH_URL_WISTIA:()=>Vk,MATCH_URL_YOUTUBE:()=>hg,VIDEO_EXTENSIONS:()=>Uy,canPlay:()=>dF});var uF=cF(Ak),Kb=rf;const hg=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Pk=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,Rk=/vimeo\.com\/(?!progressive_redirect).+/,Ok=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Dk=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,Mk=/^https?:\/\/fb\.watch\/.+$/,Lk=/streamable\.com\/([a-z0-9]+)$/,Vk=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,Fk=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,Uk=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,zk=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,$k=/mixcloud\.com\/([^/]+\/[^/]+)/,Bk=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,Hk=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,Fy=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Uy=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,zy=/\.(m3u8)($|\?)/i,qk=/\.(mpd)($|\?)/i,Wk=/\.(flv)($|\?)/i,fg=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&fg(e)||fg(e.src))return!0;return!1}return(0,Kb.isMediaStream)(t)||(0,Kb.isBlobUrl)(t)?!0:Fy.test(t)||Uy.test(t)||zy.test(t)||qk.test(t)||Wk.test(t)},dF={youtube:t=>t instanceof Array?t.every(e=>hg.test(e)):hg.test(t),soundcloud:t=>Pk.test(t)&&!Fy.test(t),vimeo:t=>Rk.test(t)&&!Uy.test(t)&&!zy.test(t),mux:t=>Ok.test(t),facebook:t=>Dk.test(t)||Mk.test(t),streamable:t=>Lk.test(t),wistia:t=>Vk.test(t),twitch:t=>Fk.test(t)||Uk.test(t),dailymotion:t=>zk.test(t),mixcloud:t=>$k.test(t),vidyard:t=>Bk.test(t),kaltura:t=>Hk.test(t),file:fg};var $y=Object.defineProperty,hF=Object.getOwnPropertyDescriptor,fF=Object.getOwnPropertyNames,pF=Object.prototype.hasOwnProperty,mF=(t,e)=>{for(var n in e)$y(t,n,{get:e[n],enumerable:!0})},gF=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of fF(e))!pF.call(t,s)&&s!==n&&$y(t,s,{get:()=>e[s],enumerable:!(r=hF(e,s))||r.enumerable});return t},yF=t=>gF($y({},"__esModule",{value:!0}),t),Gk={};mF(Gk,{default:()=>xF});var vF=yF(Gk),en=rf,Bt=uF,xF=[{key:"youtube",name:"YouTube",canPlay:Bt.canPlay.youtube,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./YouTube-C5PRRCti.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:Bt.canPlay.soundcloud,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./SoundCloud-DSvcaXx0.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:Bt.canPlay.vimeo,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Vimeo-DLVgFoLg.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:Bt.canPlay.mux,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Mux-CoPLDV89.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:Bt.canPlay.facebook,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Facebook-CcXuI1va.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:Bt.canPlay.streamable,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Streamable-DLQgfSw4.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:Bt.canPlay.wistia,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Wistia-tJtZ388T.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:Bt.canPlay.twitch,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Twitch-BOT5bx2a.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:Bt.canPlay.dailymotion,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./DailyMotion-C8SOBRTh.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:Bt.canPlay.mixcloud,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Mixcloud-Bwt5Kmp1.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:Bt.canPlay.vidyard,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Vidyard-CidevcPq.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:Bt.canPlay.kaltura,lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./Kaltura-BXGzNcfH.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:Bt.canPlay.file,canEnablePIP:t=>Bt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,en.supportsWebKitPresentationMode)())&&!Bt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,en.lazy)(()=>tn(()=>import("./FilePlayer-o8sNhu13.js").then(t=>t.F),[]))}],Qb=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wF(t,e){return!!(t===e||Qb(t)&&Qb(e))}function bF(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!wF(t[n],e[n]))return!1;return!0}function _F(t,e){e===void 0&&(e=bF);var n,r=[],s,i=!1;function a(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&n===this&&e(l,r)||(s=t.apply(this,l),i=!0,n=this,r=l),s}return a}const EF=Object.freeze(Object.defineProperty({__proto__:null,default:_F},Symbol.toStringTag,{value:"Module"})),TF=dC(EF);var SF=typeof Element<"u",kF=typeof Map=="function",NF=typeof Set=="function",CF=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function od(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!od(t[r],e[r]))return!1;return!0}var i;if(kF&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!od(r.value[1],e.get(r.value[0])))return!1;return!0}if(NF&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(CF&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(SF&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!od(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var By=function(e,n){try{return od(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const IF=hc(By);var Kk={exports:{}},jF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",AF=jF,PF=AF;function Qk(){}function Yk(){}Yk.resetWarningCache=Qk;var RF=function(){function t(r,s,i,a,l,c){if(c!==PF){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Yk,resetWarningCache:Qk};return n.PropTypes=n,n};Kk.exports=RF();var OF=Kk.exports,DF=Object.create,sf=Object.defineProperty,MF=Object.getOwnPropertyDescriptor,LF=Object.getOwnPropertyNames,VF=Object.getPrototypeOf,FF=Object.prototype.hasOwnProperty,UF=(t,e)=>{for(var n in e)sf(t,n,{get:e[n],enumerable:!0})},Xk=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of LF(e))!FF.call(t,s)&&s!==n&&sf(t,s,{get:()=>e[s],enumerable:!(r=MF(e,s))||r.enumerable});return t},zF=(t,e,n)=>(n=t!=null?DF(VF(t)):{},Xk(!t||!t.__esModule?sf(n,"default",{value:t,enumerable:!0}):n,t)),$F=t=>Xk(sf({},"__esModule",{value:!0}),t),Jk={};UF(Jk,{defaultProps:()=>qF,propTypes:()=>HF});var Zk=$F(Jk),BF=zF(OF);const{string:wt,bool:Ht,number:po,array:Sp,oneOfType:Ja,shape:mn,object:Ot,func:at,node:Yb}=BF.default,HF={url:Ja([wt,Sp,Ot]),playing:Ht,loop:Ht,controls:Ht,volume:po,muted:Ht,playbackRate:po,width:Ja([wt,po]),height:Ja([wt,po]),style:Ot,progressInterval:po,playsinline:Ht,pip:Ht,stopOnUnmount:Ht,light:Ja([Ht,wt,Ot]),playIcon:Yb,previewTabIndex:po,previewAriaLabel:wt,fallback:Yb,oEmbedUrl:wt,wrapper:Ja([wt,at,mn({render:at.isRequired})]),config:mn({soundcloud:mn({options:Ot}),youtube:mn({playerVars:Ot,embedOptions:Ot,onUnstarted:at}),facebook:mn({appId:wt,version:wt,playerId:wt,attributes:Ot}),dailymotion:mn({params:Ot}),vimeo:mn({playerOptions:Ot,title:wt}),mux:mn({attributes:Ot,version:wt}),file:mn({attributes:Ot,tracks:Sp,forceVideo:Ht,forceAudio:Ht,forceHLS:Ht,forceSafariHLS:Ht,forceDisableHls:Ht,forceDASH:Ht,forceFLV:Ht,hlsOptions:Ot,hlsVersion:wt,dashVersion:wt,flvVersion:wt}),wistia:mn({options:Ot,playerId:wt,customControls:Sp}),mixcloud:mn({options:Ot}),twitch:mn({options:Ot,playerId:wt}),vidyard:mn({options:Ot})}),onReady:at,onStart:at,onPlay:at,onPause:at,onBuffer:at,onBufferEnd:at,onEnded:at,onError:at,onDuration:at,onSeek:at,onPlaybackRateChange:at,onPlaybackQualityChange:at,onProgress:at,onClickPreview:at,onEnablePIP:at,onDisablePIP:at},bt=()=>{},qF={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:bt},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:bt,onStart:bt,onPlay:bt,onPause:bt,onBuffer:bt,onBufferEnd:bt,onEnded:bt,onError:bt,onDuration:bt,onSeek:bt,onPlaybackRateChange:bt,onPlaybackQualityChange:bt,onProgress:bt,onClickPreview:bt,onEnablePIP:bt,onDisablePIP:bt};var WF=Object.create,jc=Object.defineProperty,GF=Object.getOwnPropertyDescriptor,KF=Object.getOwnPropertyNames,QF=Object.getPrototypeOf,YF=Object.prototype.hasOwnProperty,XF=(t,e,n)=>e in t?jc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JF=(t,e)=>{for(var n in e)jc(t,n,{get:e[n],enumerable:!0})},eN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of KF(e))!YF.call(t,s)&&s!==n&&jc(t,s,{get:()=>e[s],enumerable:!(r=GF(e,s))||r.enumerable});return t},tN=(t,e,n)=>(n=t!=null?WF(QF(t)):{},eN(!t||!t.__esModule?jc(n,"default",{value:t,enumerable:!0}):n,t)),ZF=t=>eN(jc({},"__esModule",{value:!0}),t),Ke=(t,e,n)=>(XF(t,typeof e!="symbol"?e+"":e,n),n),nN={};JF(nN,{default:()=>of});var eU=ZF(nN),Xb=tN(v),tU=tN(By),rN=Zk,nU=rf;const rU=5e3;class of extends Xb.Component{constructor(){super(...arguments),Ke(this,"mounted",!1),Ke(this,"isReady",!1),Ke(this,"isPlaying",!1),Ke(this,"isLoading",!0),Ke(this,"loadOnReady",null),Ke(this,"startOnPlay",!0),Ke(this,"seekOnPlay",null),Ke(this,"onDurationCalled",!1),Ke(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),Ke(this,"getInternalPlayer",e=>this.player?this.player[e]:null),Ke(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Ke(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),Ke(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Ke(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),Ke(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),Ke(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),Ke(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Ke(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:a,pip:l,loop:c,activePlayer:d,disableDeferredLoading:h}=this.props;if(!(0,tU.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!h&&!(0,nU.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==a&&this.player.setPlaybackRate&&this.player.setPlaybackRate(a),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},rU));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?Xb.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Ke(of,"displayName","Player");Ke(of,"propTypes",rN.propTypes);Ke(of,"defaultProps",rN.defaultProps);var sU=Object.create,Ac=Object.defineProperty,iU=Object.getOwnPropertyDescriptor,oU=Object.getOwnPropertyNames,aU=Object.getPrototypeOf,lU=Object.prototype.hasOwnProperty,cU=(t,e,n)=>e in t?Ac(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uU=(t,e)=>{for(var n in e)Ac(t,n,{get:e[n],enumerable:!0})},sN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oU(e))!lU.call(t,s)&&s!==n&&Ac(t,s,{get:()=>e[s],enumerable:!(r=iU(e,s))||r.enumerable});return t},Pc=(t,e,n)=>(n=t!=null?sU(aU(t)):{},sN(!t||!t.__esModule?Ac(n,"default",{value:t,enumerable:!0}):n,t)),dU=t=>sN(Ac({},"__esModule",{value:!0}),t),We=(t,e,n)=>(cU(t,typeof e!="symbol"?e+"":e,n),n),iN={};uU(iN,{createReactPlayer:()=>wU});var hU=dU(iN),wo=Pc(v),fU=Pc(Nk),kp=Pc(TF),Jb=Pc(By),fl=Zk,oN=rf,pU=Pc(eU);const mU=(0,oN.lazy)(()=>tn(()=>import("./Preview-CFIAGl1y.js").then(t=>t.P),[])),gU=typeof window<"u"&&window.document&&typeof document<"u",yU=typeof jf<"u"&&jf.window&&jf.window.document,vU=Object.keys(fl.propTypes),xU=gU||yU?wo.Suspense:()=>null,Za=[],wU=(t,e)=>{var n;return n=class extends wo.Component{constructor(){super(...arguments),We(this,"state",{showPreview:!!this.props.light}),We(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),We(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),We(this,"showPreview",()=>{this.setState({showPreview:!0})}),We(this,"getDuration",()=>this.player?this.player.getDuration():null),We(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),We(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),We(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),We(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),We(this,"handleReady",()=>{this.props.onReady(this)}),We(this,"getActivePlayer",(0,kp.default)(r=>{for(const s of[...Za,...t])if(s.canPlay(r))return s;return e||null})),We(this,"getConfig",(0,kp.default)((r,s)=>{const{config:i}=this.props;return fU.default.all([fl.defaultProps.config,fl.defaultProps.config[s]||{},i,i[s]||{}])})),We(this,"getAttributes",(0,kp.default)(r=>(0,oN.omit)(this.props,vU))),We(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return wo.default.createElement(pU.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,Jb.default)(this.props,r)||!(0,Jb.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:a,oEmbedUrl:l,previewAriaLabel:c}=this.props;return wo.default.createElement(mU,{url:r,light:s,playIcon:i,previewTabIndex:a,previewAriaLabel:c,oEmbedUrl:l,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:a,fallback:l,wrapper:c}=this.props,{showPreview:d}=this.state,h=this.getAttributes(r),p=typeof c=="string"?this.references.wrapper:void 0;return wo.default.createElement(c,{ref:p,style:{...s,width:i,height:a},...h},wo.default.createElement(xU,{fallback:l},d?this.renderPreview(r):this.renderActivePlayer(r)))}},We(n,"displayName","ReactPlayer"),We(n,"propTypes",fl.propTypes),We(n,"defaultProps",fl.defaultProps),We(n,"addCustomPlayer",r=>{Za.push(r)}),We(n,"removeCustomPlayers",()=>{Za.length=0}),We(n,"canPlay",r=>{for(const s of[...Za,...t])if(s.canPlay(r))return!0;return!1}),We(n,"canEnablePIP",r=>{for(const s of[...Za,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var bU=Object.create,af=Object.defineProperty,_U=Object.getOwnPropertyDescriptor,EU=Object.getOwnPropertyNames,TU=Object.getPrototypeOf,SU=Object.prototype.hasOwnProperty,kU=(t,e)=>{for(var n in e)af(t,n,{get:e[n],enumerable:!0})},aN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of EU(e))!SU.call(t,s)&&s!==n&&af(t,s,{get:()=>e[s],enumerable:!(r=_U(e,s))||r.enumerable});return t},NU=(t,e,n)=>(n=t!=null?bU(TU(t)):{},aN(!t||!t.__esModule?af(n,"default",{value:t,enumerable:!0}):n,t)),CU=t=>aN(af({},"__esModule",{value:!0}),t),lN={};kU(lN,{default:()=>PU});var IU=CU(lN),pg=NU(vF),jU=hU;const AU=pg.default[pg.default.length-1];var PU=(0,jU.createReactPlayer)(pg.default,AU);const Zb=hc(IU);function e_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function RU(...t){return e=>{let n=!1;const r=t.map(s=>{const i=e_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():e_(t[s],null)}}}}function OU(t){const e=MU(t),n=v.forwardRef((r,s)=>{const{children:i,...a}=r,l=v.Children.toArray(i),c=l.find(VU);if(c){const d=c.props.children,h=l.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return o.jsx(e,{...a,ref:s,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var DU=OU("Slot");function MU(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const a=UU(s),l=FU(i,s.props);return s.type!==v.Fragment&&(l.ref=r?RU(r,a):a),v.cloneElement(s,l)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LU=Symbol("radix.slottable");function VU(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LU}function FU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=cN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=cN(t))&&(r&&(r+=" "),r+=e);return r}const t_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,n_=uN,zU=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return n_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],p=i==null?void 0:i[d];if(h===null)return null;const m=t_(h)||t_(p);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[p,m]=h;return m===void 0||(d[p]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:m,...y}=h;return Object.entries(y).every(b=>{let[E,C]=b;return Array.isArray(C)?C.includes({...i,...l}[E]):{...i,...l}[E]===C})?[...d,p,m]:d},[]);return n_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},Hy="-",$U=t=>{const e=HU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Hy);return l[0]===""&&l.length!==1&&l.shift(),dN(l,e)||BU(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},dN=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?dN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Hy);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},r_=/^\[(.+)\]$/,BU=t=>{if(r_.test(t)){const e=r_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},HU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return WU(Object.entries(t.classGroups),n).forEach(([i,a])=>{mg(a,r,i,e)}),r},mg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:s_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(qU(s)){mg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{mg(a,s_(e,i),n,r)})})},s_=(t,e)=>{let n=t;return e.split(Hy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qU=t=>t.isThemeGetter,WU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,GU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},hN="!",KU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,p;for(let C=0;C<l.length;C++){let k=l[C];if(d===0){if(k===s&&(r||l.slice(C,C+i)===e)){c.push(l.slice(h,C)),h=C+i;continue}if(k==="/"){p=C;continue}}k==="["?d++:k==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(hN),b=y?m.substring(1):m,E=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:a}):a},QU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},YU=t=>({cache:GU(t.cacheSize),parseClassName:KU(t),...$U(t)}),XU=/\s+/,JU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(XU);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}=n(d);let b=!!y,E=r(b?m.substring(0,y):m);if(!E){if(!b){l=d+(l.length>0?" "+l:l);continue}if(E=r(m),!E){l=d+(l.length>0?" "+l:l);continue}b=!1}const C=QU(h).join(":"),k=p?C+hN:C,w=k+E;if(i.includes(w))continue;i.push(w);const N=s(E,b);for(let R=0;R<N.length;++R){const M=N[R];i.push(k+M)}l=d+(l.length>0?" "+l:l)}return l};function ZU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=fN(e))&&(r&&(r+=" "),r+=n);return r}const fN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=fN(t[r]))&&(n&&(n+=" "),n+=e);return n};function e9(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,p)=>p(h),t());return n=YU(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=JU(c,n);return s(c,h),h}return function(){return i(ZU.apply(null,arguments))}}const Ne=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},pN=/^\[(?:([a-z-]+):)?(.+)\]$/i,t9=/^\d+\/\d+$/,n9=new Set(["px","full","screen"]),r9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,o9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,a9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sr=t=>Wo(t)||n9.has(t)||t9.test(t),rs=t=>Sa(t,"length",m9),Wo=t=>!!t&&!Number.isNaN(Number(t)),Np=t=>Sa(t,"number",Wo),el=t=>!!t&&Number.isInteger(Number(t)),l9=t=>t.endsWith("%")&&Wo(t.slice(0,-1)),ae=t=>pN.test(t),ss=t=>r9.test(t),c9=new Set(["length","size","percentage"]),u9=t=>Sa(t,c9,mN),d9=t=>Sa(t,"position",mN),h9=new Set(["image","url"]),f9=t=>Sa(t,h9,y9),p9=t=>Sa(t,"",g9),tl=()=>!0,Sa=(t,e,n)=>{const r=pN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},m9=t=>s9.test(t)&&!i9.test(t),mN=()=>!1,g9=t=>o9.test(t),y9=t=>a9.test(t),v9=()=>{const t=Ne("colors"),e=Ne("spacing"),n=Ne("blur"),r=Ne("brightness"),s=Ne("borderColor"),i=Ne("borderRadius"),a=Ne("borderSpacing"),l=Ne("borderWidth"),c=Ne("contrast"),d=Ne("grayscale"),h=Ne("hueRotate"),p=Ne("invert"),m=Ne("gap"),y=Ne("gradientColorStops"),b=Ne("gradientColorStopPositions"),E=Ne("inset"),C=Ne("margin"),k=Ne("opacity"),w=Ne("padding"),N=Ne("saturate"),R=Ne("scale"),M=Ne("sepia"),V=Ne("skew"),j=Ne("space"),x=Ne("translate"),S=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ae,e],P=()=>[ae,e],I=()=>["",Sr,rs],Z=()=>["auto",Wo,ae],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],De=()=>["solid","dashed","dotted","double","none"],Ct=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",ae],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[Wo,ae];return{cacheSize:500,separator:":",theme:{colors:[tl],spacing:[Sr,rs],blur:["none","",ss,ae],brightness:ce(),borderColor:[t],borderRadius:["none","","full",ss,ae],borderSpacing:P(),borderWidth:I(),contrast:ce(),grayscale:Q(),hueRotate:ce(),invert:Q(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[l9,rs],inset:A(),margin:A(),opacity:ce(),padding:P(),saturate:ce(),scale:ce(),sepia:Q(),skew:ce(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",ae]}],container:["container"],columns:[{columns:[ss]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),ae]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",el,ae]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ae]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",el,ae]}],"grid-cols":[{"grid-cols":[tl]}],"col-start-end":[{col:["auto",{span:["full",el,ae]},ae]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[tl]}],"row-start-end":[{row:["auto",{span:[el,ae]},ae]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ae]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ae,e]}],"min-w":[{"min-w":[ae,e,"min","max","fit"]}],"max-w":[{"max-w":[ae,e,"none","full","min","max","fit","prose",{screen:[ss]},ss]}],h:[{h:[ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ss,rs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Np]}],"font-family":[{font:[tl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ae]}],"line-clamp":[{"line-clamp":["none",Wo,Np]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Sr,ae]}],"list-image":[{"list-image":["none",ae]}],"list-style-type":[{list:["none","disc","decimal",ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...De(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Sr,rs]}],"underline-offset":[{"underline-offset":["auto",Sr,ae]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),d9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",u9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},f9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...De(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:De()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...De()]}],"outline-offset":[{"outline-offset":[Sr,ae]}],"outline-w":[{outline:[Sr,rs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Sr,rs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ss,p9]}],"shadow-color":[{shadow:[tl]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...Ct(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ct()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ss,ae]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[N]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ae]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",ae]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[el,ae]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ae]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Sr,rs,Np]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},x9=e9(v9);function si(...t){return x9(uN(t))}const w9=zU("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),F=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?DU:"button";return o.jsx(a,{className:si(w9({variant:e,size:n,className:t})),ref:i,...s})});F.displayName="Button";const be=v.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:si("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));be.displayName="Card";const mt=v.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:si("flex flex-col space-y-1.5 p-6",t),...e}));mt.displayName="CardHeader";const vn=v.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:si("text-2xl font-semibold leading-none tracking-tight",t),...e}));vn.displayName="CardTitle";const gN=v.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:si("text-sm text-muted-foreground",t),...e}));gN.displayName="CardDescription";const Vt=v.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:si("p-6 pt-0",t),...e}));Vt.displayName="CardContent";const b9=v.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:si("flex items-center p-6 pt-0",t),...e}));b9.displayName="CardFooter";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>v.createElement("svg",{ref:c,...E9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yN("lucide",s),...l},[...a.map(([d,h])=>v.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=(t,e)=>{const n=v.forwardRef(({className:r,...s},i)=>v.createElement(T9,{ref:i,iconNode:e,className:yN(`lucide-${_9(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=B("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=B("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=B("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=B("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=B("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=B("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=B("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=B("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=B("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=B("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=B("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=B("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=B("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=B("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=B("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=B("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=B("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=B("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=B("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=B("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=B("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=B("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=B("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=B("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=B("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=B("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=B("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=B("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=B("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=B("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=B("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=B("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=B("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=B("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=B("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=B("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=B("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=B("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=B("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=B("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=B("ScreenShare",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=B("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=B("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=B("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=B("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=B("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=B("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=B("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=B("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=B("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=B("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=B("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=B("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=B("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=B("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=B("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=B("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=B("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=B("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=B("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=B("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=B("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=B("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=B("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function a8({isPremium:t,isConnected:e,partnerPremium:n,onTimeUp:r,onUpgrade:s}){const[i,a]=v.useState(1800),[l,c]=v.useState(!1),d=t||n,h=d?30*60:15*60;v.useEffect(()=>{e?d?(c(!0),a(30*60)):(c(!0),a(15*60)):(c(!1),a(d?30*60:15*60))},[e,d]),v.useEffect(()=>{let y=null;return l&&i>0&&(y=setInterval(()=>{a(b=>b<=1?(c(!1),r(),0):b-1)},1e3)),()=>{y&&clearInterval(y)}},[l,i,r]);const p=y=>{const b=Math.floor(y/60),E=y%60;return`${b}:${E.toString().padStart(2,"0")}`},m=()=>{const y=i/h;return y>.5?"text-green-600":y>.25?"text-yellow-600":"text-red-600"};return e?o.jsx(be,{className:"w-full max-w-md mx-auto mb-4",children:o.jsxs(Vt,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wy,{className:"h-5 w-5 text-gray-600"}),o.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:"Chat Time"})]}),d?o.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[o.jsx("div",{className:`font-mono text-xl font-bold ${m()}`,children:p(i)}),o.jsx("span",{className:"text-sm",children:"/ 30:00"}),o.jsx(Xe,{className:"h-4 w-4 text-yellow-500"}),n&&!t&&o.jsx("span",{className:"text-xs text-green-600",children:"(Partner Premium)"})]}):o.jsx("div",{className:`font-mono text-xl font-bold ${m()}`,children:p(i)})]}),o.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${i>h*.5?"bg-green-500":i>h*.25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${i/h*100}%`}})}),!d&&i<300&&o.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"⏰ Continue this amazing conversation! Get Premium for 30-minute calls."}),o.jsxs(F,{size:"sm",onClick:s,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",children:[o.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Upgrade Now - ₹99/week"]})]}),d&&o.jsx("div",{className:"mt-2 p-2 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg text-center",children:o.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["✨ ",t?"You have":"Your partner has"," Premium - Enjoy 30-minute calls! 💕"]})})]})}):null}const l8="rzp_test_1234567890";function lf({isOpen:t,onClose:e,onPurchase:n}){var c;const[r,s]=v.useState("weekly"),i=async()=>{const d=a.find(m=>m.id===r);if(!d)return;if(typeof window.Razorpay>"u"){console.error("Razorpay SDK not loaded"),n(r);return}const h=d.id==="weekly"?9900:29900,p={key:l8,amount:h,currency:"INR",name:"AjnabiCam Premium",description:d.name,image:"/logo.png",handler:function(m){console.log("Payment successful:",m),n(r)},modal:{ondismiss:function(){console.log("Payment modal closed")}},prefill:{},theme:{color:"#a21caf"}};try{new window.Razorpay(p).open()}catch(m){console.error("Error opening Razorpay:",m),n(r)}};if(!t)return null;const a=[{id:"weekly",name:"Weekly Premium",price:"₹99",duration:"/week",savings:"",popular:!1},{id:"monthly",name:"Monthly Premium",price:"₹299",duration:"/month",savings:"Save ₹97!",popular:!0}],l=["🚫 Ad-Free Experience - No interruptions, pure chatting","🎙️ Voice-Only Mode - Audio calls without video","🚻 Gender Filter - Choose who you want to chat with","⏰ Unlimited Chat Time - No more time limits!","👑 Premium Badge - Show off your status","🎯 Priority Matching - Get connected faster"];return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(be,{className:"w-full max-w-md mx-auto bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-2 border-purple-200 dark:border-purple-700",children:[o.jsxs(mt,{className:"text-center relative",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-1",children:o.jsx(Kt,{size:20})}),o.jsx("div",{className:"flex justify-center mb-2",children:o.jsx(Xe,{className:"h-12 w-12 text-yellow-500"})}),o.jsx(vn,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Upgrade to Premium! 💎"}),o.jsx(gN,{className:"text-gray-600 dark:text-gray-300",children:"Unlock amazing features and enhance your chat experience"})]}),o.jsxs(Vt,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"What you'll get:"}),l.map((d,h)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(qy,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:d})]},h))]}),o.jsx("div",{className:"space-y-3",children:a.map(d=>o.jsxs("div",{className:`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${r===d.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-700 hover:border-purple-300"} ${d.popular?"ring-2 ring-purple-400":""}`,onClick:()=>s(d.id),children:[d.popular&&o.jsx("span",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-3 py-1 rounded-full",children:"Most Popular! 🔥"}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:d.name}),d.savings&&o.jsx("p",{className:"text-sm text-green-600 font-medium",children:d.savings})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-2xl font-bold text-purple-600",children:d.price}),o.jsx("span",{className:"text-gray-500",children:d.duration})]})]})]},d.id))}),o.jsxs(F,{onClick:i,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 rounded-lg transform hover:scale-105 transition-all duration-200",children:["🚀 Get Premium Now - ",(c=a.find(d=>d.id===r))==null?void 0:c.price]}),o.jsxs("p",{className:"text-xs text-center text-gray-500",children:["💳 Pay easily with ",o.jsx("span",{className:"font-semibold text-purple-700",children:"UPI (preselected)"}),", Cards, Wallets, or Netbanking",o.jsx("br",{}),"🔒 Secure payment • Cancel anytime • 💯 30-day money-back guarantee"]})]})]})})}const wi=class wi{constructor(){Re(this,"config");Re(this,"isInitialized",!1);Re(this,"adBlockDetected",!1);Re(this,"consentGiven",!1);Re(this,"defaultConfig",{publisherId:"ca-app-pub-1776596266948987~1234567890",adUnitIds:{banner:"ca-app-pub-1776596266948987/2770517385",interstitial:"ca-app-pub-1776596266948987/2725273599",rewarded:"ca-app-pub-1776596266948987/9705792525",native:"ca-app-pub-1776596266948987/4444444444"},testMode:!1});this.config=this.defaultConfig}static getInstance(){return wi.instance||(wi.instance=new wi),wi.instance}async initialize(e){try{e&&(this.config={...this.config,...e}),console.log("🎯 Initializing Ad Service...");try{await this.detectAdBlocker()}catch(n){console.warn("⚠️ Ad blocker detection failed, continuing...",n),this.adBlockDetected=!1}if(this.adBlockDetected)return console.warn("⚠️ Ad blocker detected - ads will not be shown"),this.isInitialized=!0,!0;try{if(await this.loadAdSenseScript(),typeof window<"u")return window.adsbygoogle=window.adsbygoogle||[],this.isInitialized=!0,console.log("✅ Ad Service initialized successfully"),!0}catch(n){return console.warn("⚠️ AdSense failed to load, continuing without ads:",n),this.isInitialized=!0,!0}return this.isInitialized=!0,!0}catch(n){return console.error("❌ Ad Service initialization error (non-critical):",n),this.isInitialized=!0,!0}}async requestConsent(){return new Promise(e=>{const n=confirm(`🎯 AjnabiCam uses ads to provide free service.

We may use cookies and collect data to show personalized ads.
You can upgrade to Premium to remove ads.

Do you consent to personalized advertisements?`);this.consentGiven=n,n&&(localStorage.setItem("ajnabicam_ad_consent","true"),localStorage.setItem("ajnabicam_ad_consent_date",new Date().toISOString())),e(n)})}hasConsent(){const e=localStorage.getItem("ajnabicam_ad_consent"),n=localStorage.getItem("ajnabicam_ad_consent_date");if(!e||!n)return!1;const r=new Date;return r.setFullYear(r.getFullYear()-1),new Date(n)>r}async loadBannerAd(e,n,r){if(!this.canShowAds())return!1;try{const s=document.getElementById(e);if(!s)throw new Error(`Container ${e} not found`);s.innerHTML="";const i=document.createElement("ins");return i.className="adsbygoogle",i.style.display="block",i.setAttribute("data-ad-client",this.config.publisherId),i.setAttribute("data-ad-slot",r||this.config.adUnitIds.banner),n.size?(i.style.width=`${n.size.width}px`,i.style.height=`${n.size.height}px`,i.setAttribute("data-ad-format","rectangle")):(i.setAttribute("data-ad-format","auto"),i.setAttribute("data-full-width-responsive","true")),s.appendChild(i),(window.adsbygoogle=window.adsbygoogle||[]).push({}),console.log("📱 Banner ad loaded:",e),!0}catch(s){return console.error("❌ Failed to load banner ad:",s),!1}}async showInterstitialAd(){if(!this.canShowAds())return!1;try{return console.log("🎬 Showing interstitial ad..."),new Promise(e=>{const n=this.createInterstitialOverlay();document.body.appendChild(n);const r=()=>{n.parentNode&&n.parentNode.removeChild(n),e(!0)};setTimeout(r,5e3),n.addEventListener("click",r)})}catch(e){return console.error("❌ Failed to show interstitial ad:",e),!1}}async showRewardedAd(){if(!this.canShowAds())return{success:!1,rewardAmount:0,rewardType:"coins",error:"Ads not available"};try{return console.log("💰 Showing rewarded ad..."),new Promise(e=>{const n=this.createRewardedAdExperience();e(n)})}catch(e){return console.error("❌ Failed to show rewarded ad:",e),{success:!1,rewardAmount:0,rewardType:"coins",error:e instanceof Error?e.message:"Unknown error"}}}async loadNativeAd(e){if(!this.canShowAds())return!1;try{const n=document.getElementById(e);if(!n)throw new Error(`Container ${e} not found`);return n.innerHTML=this.createNativeAdHTML(),console.log("📰 Native ad loaded:",e),!0}catch(n){return console.error("❌ Failed to load native ad:",n),!1}}canShowAds(){return this.isInitialized?this.adBlockDetected?(console.warn("⚠️ Ad blocker detected"),!1):this.hasConsent()?!0:(console.warn("⚠️ User consent not given"),!1):(console.warn("⚠️ Ad Service not initialized"),!1)}async detectAdBlocker(){try{const e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox",e.style.position="absolute",e.style.left="-10000px",document.body.appendChild(e),await new Promise(n=>setTimeout(n,100)),this.adBlockDetected=e.offsetHeight===0,document.body.removeChild(e)}catch(e){console.warn("Could not detect ad blocker:",e),this.adBlockDetected=!1}}loadAdSenseScript(){return new Promise((e,n)=>{if(document.querySelector('script[src*="pagead/js/adsbygoogle.js"]')){e();return}const r=document.createElement("script");r.async=!0,r.src=`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${this.config.publisherId}`,r.crossOrigin="anonymous",r.onload=()=>e(),r.onerror=()=>n(new Error("Failed to load AdSense script")),document.head.appendChild(r)})}createInterstitialOverlay(){const e=document.createElement("div");return e.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    `,e.innerHTML=`
      <div style="
        background: white;
        padding: 40px;
        border-radius: 10px;
        text-align: center;
        max-width: 400px;
        margin: 20px;
      ">
        <h2 style="color: #ff6b6b; margin-bottom: 20px;">💕 Support AjnabiCam</h2>
        <p style="margin-bottom: 20px;">Thanks for using our free service!</p>
        <div style="background: #f0f0f0; padding: 20px; margin: 20px 0; border-radius: 5px;">
          <p style="font-size: 14px; color: #666;">Advertisement</p>
          <p style="font-size: 18px; margin: 10px 0;">🎬 Sample Ad Content</p>
          <p style="font-size: 12px; color: #999;">Click anywhere to continue</p>
        </div>
        <p style="font-size: 12px; color: #999;">Ad will close automatically in 5 seconds</p>
      </div>
    `,e}createRewardedAdExperience(){return new Promise(e=>{const n=document.createElement("div");n.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
      `;let r=0;const s=3;n.innerHTML=`
        <div style="
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 40px;
          border-radius: 15px;
          text-align: center;
          max-width: 400px;
          margin: 20px;
        ">
          <h2 style="margin-bottom: 20px;">💰 Earn 10 Coins!</h2>
          <p style="margin-bottom: 20px;">Watch this ad to earn coins</p>
          <div id="ad-content" style="background: rgba(255,255,255,0.1); padding: 30px; margin: 20px 0; border-radius: 10px;">
            <p style="font-size: 18px; margin: 10px 0;">🎬 Rewarded Video Ad</p>
            <p id="countdown" style="font-size: 14px;">Watch for ${s} seconds...</p>
          </div>
          <button id="claim-reward" style="
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            opacity: 0.5;
            font-size: 16px;
          " disabled>Claim Reward</button>
        </div>
      `,document.body.appendChild(n);const i=n.querySelector("#countdown"),a=n.querySelector("#claim-reward"),l=setInterval(()=>{r++,i&&(i.textContent=`${Math.max(0,s-r)} seconds remaining...`),r>=s&&(clearInterval(l),a&&i&&(a.disabled=!1,a.style.opacity="1",i.textContent="Ready to claim!"))},1e3);a.addEventListener("click",()=>{n.parentNode&&n.parentNode.removeChild(n),clearInterval(l),e({success:!0,rewardAmount:10,rewardType:"coins"})}),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),clearInterval(l),e({success:!1,rewardAmount:0,rewardType:"coins",error:"Ad timeout"})},3e4)})}createNativeAdHTML(){return`
      <div style="
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        background: #f9f9f9;
        margin: 10px 0;
      ">
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <span style="font-size: 12px; color: #666; background: #e0e0e0; padding: 2px 6px; border-radius: 3px;">Ad</span>
        </div>
        <div style="display: flex; gap: 15px;">
          <div style="width: 80px; height: 80px; background: #ddd; border-radius: 5px; flex-shrink: 0;"></div>
          <div style="flex: 1;">
            <h4 style="margin: 0 0 5px 0; color: #333;">Sample Native Ad</h4>
            <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.4;">
              This is a native ad that blends with your content. Click to learn more!
            </p>
          </div>
        </div>
      </div>
    `}getMetrics(){return{adsShown:parseInt(localStorage.getItem("ajnabicam_ads_shown")||"0"),rewardedAdsWatched:parseInt(localStorage.getItem("ajnabicam_rewarded_ads")||"0"),adBlockerDetected:this.adBlockDetected,consentGiven:this.consentGiven,isInitialized:this.isInitialized}}trackAdEvent(e,n){if(console.log(`📊 Ad Event: ${e} - ${n}`),e==="shown"){const r=parseInt(localStorage.getItem("ajnabicam_ads_shown")||"0");localStorage.setItem("ajnabicam_ads_shown",(r+1).toString())}if(e==="rewarded"){const r=parseInt(localStorage.getItem("ajnabicam_rewarded_ads")||"0");localStorage.setItem("ajnabicam_rewarded_ads",(r+1).toString())}}};Re(wi,"instance");let _g=wi;const ha=_g.getInstance();function CN({onRewardEarned:t,disabled:e=!1,variant:n="default",className:r=""}){const[s,i]=v.useState(!1),{addCoins:a}=qi(),c={onClick:async()=>{if(!(s||e)){i(!0);try{const d=await ha.showRewardedAd();d.success?(await a(d.rewardAmount),ha.trackAdEvent("rewarded","video"),t==null||t(d.rewardAmount),alert(`🎉 You earned ${d.rewardAmount} coins! Keep watching ads to earn more.`)):alert(`❌ Could not complete ad: ${d.error||"Unknown error"}`)}catch(d){console.error("Rewarded ad error:",d),alert("❌ Failed to load ad. Please try again later.")}finally{i(!1)}}},disabled:e||s,className:`rewarded-ad-button ${r}`};return n==="compact"?o.jsx(F,{...c,size:"sm",className:`bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white ${r}`,children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Watching..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ws,{className:"w-4 h-4 mr-1"}),"+10"]})}):n==="premium"?o.jsx(F,{...c,className:`bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 hover:from-yellow-600 hover:via-orange-600 hover:to-red-600 text-white font-bold py-4 px-6 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 ${r}`,children:s?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-3"}),o.jsx("span",{children:"Watching Ad..."})]}):o.jsxs("div",{className:"flex items-center",children:[o.jsx(Oc,{className:"w-5 h-5 mr-3"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-lg",children:"Watch Ad"}),o.jsx("div",{className:"text-sm opacity-90",children:"Earn 10 Coins"})]})]})}):o.jsx(F,{...c,className:`bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 ${r}`,children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Watching..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ws,{className:"w-4 h-4 mr-2"}),"Watch Ad for 10 Coins",o.jsx(da,{className:"w-4 h-4 ml-2"})]})})}function IN({isOpen:t,onClose:e}){const{coins:n,addCoins:r,watchAd:s,claimDailyBonus:i,completeChat:a,adsWatchedToday:l,maxAdsPerDay:c,canClaimDailyBonus:d,currentStreak:h,hasCompletedOnboarding:p}=qi(),{isPremium:m}=Zs(),y=ht(),[b,E]=v.useState(!1),[C,k]=v.useState(!0),[w,N]=v.useState(3600),[R,M]=v.useState("");v.useEffect(()=>{if(t){E(!0);const _=setTimeout(()=>E(!1),1e3);return()=>clearTimeout(_)}},[t]),v.useEffect(()=>{if(w>0){const _=setTimeout(()=>N(w-1),1e3);return()=>clearTimeout(_)}},[w]),v.useEffect(()=>{const _=["⚡ Flash Sale! Don't miss out!","🔥 Limited Time Offer!","💎 Exclusive Deal Today Only!","⏰ Hurry! Sale ends soon!","🎯 Best Value Pack!"],A=_[Math.floor(Math.random()*_.length)];M(A)},[t]);const V=_=>{const A=Math.floor(_/3600),P=Math.floor(_%3600/60),I=_%60;return`${A.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`};if(!t)return null;const j=[{id:"starter",coins:100,price:"₹39",originalPrice:"₹59",popular:!1,bonus:"+20 Free!",savings:"33% OFF",tag:"STARTER",color:"from-blue-500 to-blue-600",bgGradient:"from-blue-50 to-sky-50",description:"Perfect for beginners"},{id:"popular",coins:300,price:"₹99",originalPrice:"₹149",popular:!0,bonus:"+75 FREE!",savings:"50% OFF",tag:"MOST POPULAR",color:"from-purple-500 to-pink-500",bgGradient:"from-purple-50 to-pink-50",description:"Best value for money",badge:"💖 Loved by 89% users"},{id:"mega",coins:750,price:"₹199",originalPrice:"₹299",popular:!1,bonus:"+200 FREE!",savings:"67% OFF",tag:"MEGA DEAL",color:"from-emerald-500 to-green-600",bgGradient:"from-emerald-50 to-green-50",description:"For power users",badge:"🔥 Limited time"},{id:"ultimate",coins:1500,price:"₹349",originalPrice:"₹599",popular:!1,bonus:"+500 FREE!",savings:"83% OFF",tag:"ULTIMATE",color:"from-orange-500 to-red-500",bgGradient:"from-orange-50 to-red-50",description:"Maximum value pack",badge:"💎 VIP Special",vip:!0}],x=_=>{const A=`🎉 Great choice! You're getting ${_.coins+parseInt(_.bonus.replace(/\D/g,""))} coins for just ${_.price}!

💰 That's ${_.savings} savings!

Confirm purchase?`;confirm(A)&&((async()=>{try{const I=_.coins+parseInt(_.bonus.replace(/\D/g,"")),Z=await r(I);alert(Z?`🎊 SUCCESS! ${I} coins added to your account!

✨ Enjoy your enhanced chat experience!`:"❌ Purchase failed. Please try again.")}catch(I){console.error("Error purchasing coins:",I),alert("❌ Purchase failed. Please try again.")}})(),e())},S=[{id:"daily",title:"Daily Login Bonus",coins:10,icon:C9,color:"from-peach-400 to-coral-500",bgColor:"bg-gradient-to-br from-peach-50 to-coral-50",description:"Open the app daily for rewards",action:i,available:d,buttonText:d?"🎁 Earn +10 Coins":"✅ Claimed Today",streak:h,highlight:"Earn +10"},{id:"ads",title:"Watch Rewarded Ads",coins:15,icon:ws,color:"from-blush-400 to-peach-500",bgColor:"bg-gradient-to-br from-blush-50 to-peach-50",description:"Watch ads and earn instant coins",action:s,available:l<c,buttonText:l<c?`🎯 Earn +15 Coins (${c-l} left)`:"✅ Daily Limit Reached",progress:`${l}/${c} today`,highlight:"Earn +15"}];return o.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-start justify-center z-50 p-2 overflow-y-auto",children:o.jsxs(be,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-peach-25 via-cream-25 to-blush-25 border-2 border-peach-200 shadow-3xl relative overflow-hidden my-2 min-h-fit max-h-[98vh]",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 bg-peach-200 rounded-full opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute top-12 right-8 w-6 h-6 bg-coral-200 rounded-full opacity-40 animate-bounce"}),o.jsx("div",{className:"absolute bottom-16 left-8 w-4 h-4 bg-blush-200 rounded-full opacity-25 animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute bottom-8 right-4 w-5 h-5 bg-cream-200 rounded-full opacity-30 animate-bounce",style:{animationDelay:"2s"}})]}),o.jsxs(mt,{className:"text-center relative z-10 pb-3",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-2 text-peach-500 hover:bg-peach-100 rounded-full transition-all duration-200 hover:scale-110",children:o.jsx(Kt,{size:22})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`relative ${b?"animate-bounce":""} transform hover:scale-110 transition-transform duration-300`,children:o.jsxs("div",{className:"w-24 h-24 bg-gradient-to-br from-peach-400 via-coral-500 to-blush-400 rounded-2xl relative overflow-hidden shadow-2xl border-3 border-peach-300 flex items-center justify-center",children:[o.jsx(P9,{className:"h-12 w-12 text-white drop-shadow-lg"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-black/10 rounded-2xl"}),b&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute -top-3 -left-3 text-jasmine-300 text-xl animate-ping",children:"✨"}),o.jsx("div",{className:"absolute -top-4 -right-2 text-peach-300 text-lg animate-ping",style:{animationDelay:"0.2s"},children:"💎"}),o.jsx("div",{className:"absolute -top-2 left-1/2 text-coral-300 text-lg animate-ping",style:{animationDelay:"0.4s"},children:"✨"}),o.jsx("div",{className:"absolute -bottom-1 -left-2 text-cream-400 text-sm animate-ping",style:{animationDelay:"0.6s"},children:"💫"}),o.jsx("div",{className:"absolute -bottom-2 -right-1 text-blush-400 text-sm animate-ping",style:{animationDelay:"0.8s"},children:"✨"})]})]})})}),o.jsx(vn,{className:"text-2xl font-extrabold bg-gradient-to-r from-peach-600 via-coral-600 to-blush-600 bg-clip-text text-transparent mb-2",children:"💰 Coin Store 💰"}),o.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-6 py-2 inline-block border-2 border-peach-300 shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(da,{className:"h-5 w-5 text-peach-600 animate-pulse"}),o.jsxs("span",{className:"font-extrabold text-lg text-peach-700",children:[n," Coins"]})]})}),C&&o.jsx("div",{className:"bg-gradient-to-r from-peach-500 to-coral-500 text-white rounded-full px-4 py-2 mt-2 inline-block animate-pulse",children:o.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold",children:[o.jsx(Wy,{className:"h-4 w-4"}),o.jsx("span",{children:R}),o.jsx("span",{children:V(w)})]})}),o.jsxs("div",{className:"mt-3",children:[o.jsx("button",{onClick:()=>{e(),y("/spin-wheel")},className:"bg-gradient-to-r from-peach-500 via-coral-500 to-blush-500 text-white px-6 py-3 rounded-full font-bold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",style:{animation:"bounce 1s infinite"},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bN,{className:"h-5 w-5"}),o.jsx("span",{children:"🎰 Spin & Win Coins!"}),o.jsx(xN,{className:"h-4 w-4"})]})}),o.jsx("div",{className:"text-xs text-peach-600 font-semibold mt-1 bg-peach-100 rounded-full px-3 py-1 inline-block",children:"✨ Try your luck! Watch ads to win up to 50 coins! ✨"})]})]}),o.jsxs(Vt,{className:"space-y-4 relative z-10 overflow-y-auto max-h-[calc(98vh-180px)] pb-4",children:[o.jsx("div",{className:"bg-gradient-to-r from-cream-100 to-peach-100 rounded-xl p-3 border border-peach-300",children:o.jsxs("div",{className:"flex items-center gap-2 text-center justify-center",children:[o.jsx(Kr,{className:"h-5 w-5 text-peach-600"}),o.jsxs("span",{className:"text-peach-800 font-semibold text-sm",children:["🎉 ",o.jsx("strong",{children:"2,847"})," users bought coins today!"]})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-bold text-peach-800 text-center flex items-center justify-center gap-2 text-base",children:[o.jsx("div",{className:"bg-peach-100 p-1.5 rounded-full",children:o.jsx(Xe,{className:"h-5 w-5 text-peach-600"})}),"💎 Special Coin Packs"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map((_,A)=>o.jsxs("div",{className:`relative p-3 rounded-xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-105 hover:shadow-xl ${_.popular?"border-peach-500 bg-gradient-to-br from-peach-50 to-coral-50 shadow-lg ring-2 ring-peach-200":"border-gray-300 bg-white hover:border-peach-300"}`,onClick:()=>x(_),children:[_.popular&&o.jsxs("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-peach-500 to-coral-500 text-white text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:[_.tag," 🔥"]}),_.vip&&o.jsxs("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-coral-500 to-peach-500 text-white text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:["💎 ",_.tag]}),o.jsx("div",{className:"absolute -top-1 -right-1 bg-peach-500 text-white text-xs px-2 py-1 rounded-full font-bold transform rotate-12",children:_.savings}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-bold text-peach-700 mb-1",children:_.coins}),o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"base coins"}),_.bonus&&o.jsx("div",{className:"text-xs text-cream-600 font-bold mb-2 bg-cream-100 rounded-full px-2 py-1 animate-pulse",children:_.bonus}),o.jsxs("div",{className:"mb-2",children:[o.jsx("div",{className:"text-xs text-gray-500 line-through",children:_.originalPrice}),o.jsx("div",{className:"font-bold text-lg text-gray-800",children:_.price})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:_.description}),_.badge&&o.jsx("div",{className:"text-xs text-peach-600 font-semibold bg-peach-100 rounded px-2 py-1",children:_.badge}),o.jsxs("div",{className:"text-xs text-cream-700 font-bold mt-2 bg-cream-50 rounded px-2 py-1",children:["Total:"," ",_.coins+parseInt(_.bonus.replace(/\D/g,"")||"0")," ","coins"]})]})]},_.id))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-bold text-peach-800 text-center flex items-center justify-center gap-2 text-base",children:[o.jsx("div",{className:"bg-gradient-to-r from-peach-100 to-coral-100 p-2 rounded-full shadow-md",children:o.jsx(Oc,{className:"h-6 w-6 text-peach-600"})}),"🎁 Free Coins - No Payment!"]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:S.map(_=>o.jsxs("div",{className:`${_.bgColor} rounded-xl p-4 border-2 border-peach-200 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]`,children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`bg-gradient-to-r ${_.color} p-2 rounded-full shadow-lg animate-pulse`,children:o.jsx(_.icon,{className:"h-6 w-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-base",children:_.title}),o.jsx("p",{className:"text-sm text-gray-600",children:_.description})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"bg-gradient-to-r from-peach-500 to-coral-500 text-white px-3 py-1 rounded-full font-bold text-sm shadow-md",children:_.highlight}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"coins"})]})]})}),_.progress&&o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:_.progress}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`bg-gradient-to-r ${_.color} h-2 rounded-full transition-all duration-300`,style:{width:`${l/c*100}%`}})})]}),_.id==="ads"?o.jsx(CN,{variant:"premium",disabled:!_.available,className:"w-full",onRewardEarned:A=>{console.log(`User earned ${A} coins from TreasureChest ad`)}}):o.jsx(F,{onClick:_.action,disabled:!_.available,className:`w-full font-bold py-3 rounded-xl shadow-lg transition-all duration-300 text-base transform hover:scale-105 ${_.available?`bg-gradient-to-r ${_.color} hover:shadow-xl text-white animate-pulse`:"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:_.buttonText})]},_.id))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-peach-100 to-coral-100 rounded-xl p-3 border-2 border-peach-200 text-center",children:[o.jsx("div",{className:"text-peach-800 font-bold text-sm mb-1",children:"💫 Why Buy Coins?"}),o.jsx("div",{className:"text-peach-700 text-xs",children:"• Skip waiting times • Premium features • Unlimited chats • Special filters"})]})]})]})})}const c8=["Is a creep","Spam","Nudity","Harassment","Fake profile","Other"];function i_({isOpen:t,onClose:e,onSubmit:n}){const[r,s]=v.useState(""),[i,a]=v.useState("");return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:o.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-xs flex flex-col items-center shadow-xl",children:[o.jsx("h2",{className:"text-lg font-bold text-rose-600 mb-4",children:"Report this user"}),o.jsxs("div",{className:"flex flex-col gap-2 w-full mb-4",children:[c8.map(l=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:"report-reason",value:l,checked:r===l,onChange:()=>s(l)}),o.jsx("span",{children:l})]},l)),r==="Other"&&o.jsx("textarea",{className:"w-full border rounded p-2 mt-2 text-sm",placeholder:"Describe the issue...",value:i,onChange:l=>a(l.target.value),rows:2})]}),o.jsxs("div",{className:"flex gap-2 w-full",children:[o.jsx(F,{className:"flex-1",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(F,{className:"flex-1 bg-rose-500 text-white",disabled:!r||r==="Other"&&!i.trim(),onClick:()=>{n(r==="Other"?i:r),s(""),a("")},children:"Submit"})]})]})}):null}function u8({isOpen:t,onClose:e,onBlock:n}){return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:o.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-xs flex flex-col items-center shadow-xl",children:[o.jsx("h2",{className:"text-lg font-bold text-rose-600 mb-4",children:"Block this user?"}),o.jsx("p",{className:"text-sm text-gray-700 mb-6 text-center",children:"You won't be matched with this user again."}),o.jsxs("div",{className:"flex gap-2 w-full",children:[o.jsx(F,{className:"flex-1",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(F,{className:"flex-1 bg-rose-500 text-white",onClick:n,children:"Block"})]})]})}):null}function d8({isOpen:t,onClose:e,onStayConnected:n,partnerName:r="Stranger"}){const[s,i]=v.useState(!1);if(!t)return null;const a=()=>{i(!0),n(!0)},l=()=>{n(!1),e()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(be,{className:"w-full max-w-sm mx-auto bg-white border-2 border-rose-200 shadow-2xl",children:[o.jsxs(mt,{className:"text-center relative",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-1",children:o.jsx(Kt,{size:20})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-600 p-4 rounded-full",children:o.jsx(Ms,{className:"h-8 w-8 text-white"})})}),o.jsx(vn,{className:"text-xl font-bold text-rose-700",children:"Stay Connected?"})]}),o.jsxs(Vt,{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-gray-700 mb-2",children:["Do you want to stay connected with ",o.jsx("span",{className:"font-semibold text-rose-600",children:r}),"?"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"You'll be added to each other's friends list and can video call anytime!"})]}),s?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rose-500 mx-auto mb-3"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Waiting for ",r,"'s response..."]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs(F,{onClick:a,className:"w-full bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 text-white font-semibold py-3 rounded-xl shadow-md",children:[o.jsx(Kr,{className:"h-5 w-5 mr-2"}),"Yes, Stay Connected! 💕"]}),o.jsx(F,{onClick:l,variant:"outline",className:"w-full border-2 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold py-3 rounded-xl",children:"No, Thanks"})]})]})]})})}function h8({friendName:t,onCall:e,onDismiss:n}){const[r,s]=v.useState(!0);return v.useEffect(()=>{const i=setTimeout(()=>{s(!1),n()},1e4);return()=>clearTimeout(i)},[n]),r?o.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-sm px-4",children:o.jsx(be,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-2xl border-0 animate-slide-down",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-300 rounded-full animate-pulse"}),o.jsx("span",{className:"font-semibold text-sm",children:"Friend Online"})]}),o.jsxs("p",{className:"text-white font-medium",children:[o.jsx("span",{className:"font-bold",children:t})," is online now - call them?"]})]}),o.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{s(!1),n()},className:"text-white hover:bg-white/20 p-1",children:o.jsx(Kt,{size:16})})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs(F,{onClick:()=>{s(!1),e()},className:"flex-1 bg-white text-green-600 hover:bg-gray-100 font-semibold py-2 rounded-lg",children:[o.jsx(Qy,{className:"h-4 w-4 mr-2"}),"Call Now"]}),o.jsx(F,{onClick:()=>{s(!1),n()},variant:"ghost",className:"text-white hover:bg-white/20 px-4",children:"Later"})]})]})})}):null}var f8={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function p8(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return f8[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function o_(t){var e=p8(t);return"".concat(e.value).concat(e.unit)}var m8=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var i=s.sheet,a=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return i&&i.insertRule(a,0),r},ah=function(){return ah=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ah.apply(this,arguments)},g8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n},y8=m8("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function v8(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,s=r===void 0?"#000000":r,i=t.speedMultiplier,a=i===void 0?1:i,l=t.cssOverride,c=l===void 0?{}:l,d=t.size,h=d===void 0?35:d,p=g8(t,["loading","color","speedMultiplier","cssOverride","size"]),m=ah({background:"transparent !important",width:o_(h),height:o_(h),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(y8," ").concat(.75/a,"s 0s infinite linear"),animationFillMode:"both"},c);return n?v.createElement("span",ah({style:m},p)):null}const x8={theme:"system",setTheme:()=>null},jN=v.createContext(x8);function w8({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[s,i]=v.useState(()=>localStorage.getItem(n)||e);v.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),i(l)}};return o.jsx(jN.Provider,{...r,value:a,children:t})}const b8=()=>{const t=v.useContext(jN);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};class Eg{static async createMockRemoteStream(){const e=document.createElement("canvas");e.width=640,e.height=480;const n=e.getContext("2d"),r=()=>{const a=n.createLinearGradient(0,0,e.width,e.height);a.addColorStop(0,"#ec4899"),a.addColorStop(.5,"#f43f5e"),a.addColorStop(1,"#a855f7"),n.fillStyle=a,n.fillRect(0,0,e.width,e.height);const l=Date.now()*.001;n.fillStyle="rgba(255, 255, 255, 0.3)";for(let c=0;c<5;c++){const d=(Math.sin(l+c)+1)*e.width/2,h=(Math.cos(l+c*.5)+1)*e.height/2;n.beginPath(),n.arc(d,h,20+Math.sin(l+c)*10,0,Math.PI*2),n.fill()}n.fillStyle="white",n.font="bold 24px Arial",n.textAlign="center",n.fillText("Demo Partner",e.width/2,e.height/2-50),n.font="16px Arial",n.fillText("This is a demo connection",e.width/2,e.height/2),n.fillText("🎥 Mock Video Stream",e.width/2,e.height/2+30),n.font="12px monospace",n.fillText(new Date().toLocaleTimeString(),e.width/2,e.height-20)},s=()=>{r(),requestAnimationFrame(s)};s();const i=e.captureStream(30);try{const a=new AudioContext,l=a.createOscillator(),c=a.createGain();l.connect(c),c.connect(a.destination),l.frequency.setValueAtTime(440,a.currentTime),c.gain.setValueAtTime(.01,a.currentTime),l.start();const d=a.createMediaStreamDestination();c.connect(d);const h=d.stream.getAudioTracks()[0];h&&i.addTrack(h)}catch(a){console.log("Could not create mock audio track:",a)}return i}static async simulateConnection(e){console.log("🤖 Simulating WebRTC connection..."),setTimeout(async()=>{try{const n=await this.createMockRemoteStream();console.log("🤖 Mock remote stream created"),e(n)}catch(n){console.error("Failed to create mock stream:",n)}},2e3+Math.random()*3e3)}}Re(Eg,"remoteVideoElement",null);function _8(t={}){const{isPremium:e}=Zs(),n=v.useRef(0),r=v.useRef(0),{minTimeBetweenAds:s=180,maxAdsPerSession:i=8,showOnCallEnd:a=!0,showOnAppStart:l=!1}=t,c=v.useCallback(()=>{if(e)return console.log("🔒 Premium user - skipping interstitial ad"),!1;if(r.current>=i)return console.log("📊 Max ads per session reached"),!1;const C=(Date.now()-n.current)/1e3;return C<s?(console.log(`⏰ Too soon for next ad (${Math.round(s-C)}s remaining)`),!1):!0},[e,s,i]),d=v.useCallback(async E=>{if(!c())return!1;try{return console.log(`🎬 Showing interstitial ad (trigger: ${E})`),await ha.showInterstitialAd()?(n.current=Date.now(),r.current+=1,ha.trackAdEvent("shown","interstitial"),console.log(`✅ Interstitial ad shown successfully (${r.current}/${i})`),!0):(console.log("❌ Interstitial ad failed to show"),!1)}catch(C){return console.error("🚨 Interstitial ad error:",C),!1}},[c,i]),h=v.useCallback(()=>a?d("call_end"):Promise.resolve(!1),[d,a]),p=v.useCallback(()=>l?d("app_start"):Promise.resolve(!1),[d,l]),m=v.useCallback(E=>d(`navigation_${E}`),[d]),y=v.useCallback(E=>d(`action_${E}`),[d]),b=v.useCallback(()=>({adsShownThisSession:r.current,maxAdsPerSession:i,canShowAd:c(),timeSinceLastAd:n.current?(Date.now()-n.current)/1e3:0,timeUntilNextAd:Math.max(0,s-(Date.now()-n.current)/1e3),isPremiumUser:e}),[c,i,s,e]);return{showAd:d,showOnVideoCallEnd:h,showOnAppLaunch:p,showOnNavigation:m,showOnAction:y,canShowAd:c,getAdInfo:b}}function E8(){const{socket:t,mockMatching:e,isUsingMockMode:n}=A0(),{isPremium:r,setPremium:s}=Zs(),{coins:i,isLoading:a}=qi(),{addFriend:l,canAddMoreFriends:c,friends:d}=My(),h=ya(),[p,m]=v.useState(null),[y,b]=v.useState(!1),[E,C]=v.useState(null),[k,w]=v.useState(null),[N,R]=v.useState(null),[M,V]=v.useState(!1),[j,x]=v.useState([]),[S,_]=v.useState(!1),[A,P]=v.useState(!0),[I,Z]=v.useState(!0),[ee,De]=v.useState(!1),[Ct,q]=v.useState(!1),[Q,ne]=v.useState(!1),[ce,he]=v.useState(!1),[Se,Je]=v.useState(!1),[Nn,ue]=v.useState(null),[Pe,zt]=v.useState(null),[qe,Jn]=v.useState("Stranger"),[Ze,ka]=v.useState(!1),[oi,ai]=v.useState({show:!1,friendName:"",friendId:""}),[Na,Yr]=v.useState(!1),[ff,Vc]=v.useState(!1),[Fc,no]=v.useState(!1),[Uc,zc]=v.useState(!1),[Ca,li]=v.useState(!1),[$c,ot]=v.useState(!1),{theme:yt}=b8(),Zn=ht(),{showOnVideoCallEnd:Bc,showOnNavigation:Ia}=_8({minTimeBetweenAds:120,maxAdsPerSession:6,showOnCallEnd:!0}),pf=yt==="dark"?"#D1D5DB":"#4B5563";v.useEffect(()=>{const L=h.state;L!=null&&L.friendCall?(ka(!0),Jn(L.friendName||"Friend"),setTimeout(()=>{alert("🎬 Enjoy your call! Another ad will show after the call ends.")},1e3)):L!=null&&L.isSearching&&(b(!0),t&&t.emit("find:match")),L!=null&&L.voiceOnly&&r&&(ne(!0),P(!1))},[h.state,r,t]),v.useEffect(()=>{const W=setInterval(()=>{const J=d.filter(fe=>fe.isOnline);if(J.length>0&&Math.random()<.3){const fe=J[Math.floor(Math.random()*J.length)];ai({show:!0,friendName:fe.name,friendId:fe.id})}},3e4);return()=>clearInterval(W)},[d]);const ci=v.useCallback(L=>{console.log(`Processing payment for ${L} plan`);const W=new Date,J=new Date(W);L==="weekly"?J.setDate(W.getDate()+7):J.setMonth(W.getMonth()+1),s(!0,J),De(!1),alert(`🎉 Welcome to Premium! Your ${L} subscription is now active until ${J.toLocaleDateString()}`)},[s]),{completeChat:ja}=qi(),ro=v.useCallback(()=>{p&&ja()},[p,ja]),Xt=v.useCallback(async()=>{if(!Ze&&p){ro(),Je(!0);return}p&&(ro(),setTimeout(()=>{Bc()},1e3)),Y.peer.getTransceivers().forEach(L=>{L.stop&&L.stop()}),Y.peer.getSenders().forEach(L=>{L.track&&(L.track.stop(),Y.peer.removeTrack(L))}),Y.peer.onicecandidate=null,Y.peer.ontrack=null,Y.peer.onnegotiationneeded=null,Y.peer.signalingState!=="closed"&&Y.peer.close(),Y.initPeer(),x([]),V(!1),w(null),m(null),t==null||t.emit("skip")},[t,Ze,p,ro]),mf=v.useCallback(()=>{Ze?(alert("🎬 Thanks for using AjnabiCam! Here's your post-call ad."),Xt()):Je(!0)},[Ze,Xt]),gf=v.useCallback(()=>{De(!0)},[]),Aa=v.useCallback(L=>{if(zt(L),L){if(!c){Je(!1),De(!0);return}t==null||t.emit("stay:connected:response",{targetChatToken:p,wantToStay:!0})}else t==null||t.emit("stay:connected:response",{targetChatToken:p,wantToStay:!1}),Je(!1),Xt()},[c,p,t,Xt]),Hc=L=>{var W;ai({show:!1,friendName:"",friendId:""}),Zn("/video-chat",{state:{friendCall:!0,friendId:L,friendName:((W=d.find(J=>J.id===L))==null?void 0:W.name)||"Friend"}})},ui=v.useCallback(async()=>{try{const L=await navigator.mediaDevices.getUserMedia({video:!Q,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,sampleSize:16,channelCount:2}});return C(L),L}catch(L){console.error("Error getting user media:",L);try{const W=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});return C(W),W}catch(W){throw console.error("Fallback media access also failed:",W),W}}},[Q]);v.useEffect(()=>{E||ui()},[ui,E]),v.useEffect(()=>{if(y&&!p&&!Ze){if(t&&!n)console.log("Socket connected, finding match..."),t.emit("find:match");else{console.log("Using mock matching service...");const W="user_"+Math.random().toString(36).substr(2,9);e.findMatch(W,J=>{console.log("Mock match found:",J),m(J),he(!1),b(!1),Im("match"),Yr(!0),Jn("Demo Partner"),Eg.simulateConnection(fe=>{w(fe)})})}const L=setTimeout(()=>{y&&!p&&(b(!1),alert("No matches found at the moment. Please try again!"),Zn("/"))},3e4);return()=>clearTimeout(L)}},[t,n,e,y,p,Ze,Zn]);const di=v.useCallback(async()=>{if(!r){De(!0);return}try{if(Q){const W=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];E==null||E.addTrack(W);const J=Y.peer.getSenders().find(fe=>{var Zt;return((Zt=fe.track)==null?void 0:Zt.kind)==="video"});J&&await J.replaceTrack(W),P(!0),ne(!1)}else{const L=E==null?void 0:E.getVideoTracks()[0];if(L){L.stop(),E==null||E.removeTrack(L);const W=Y.peer.getSenders().find(J=>{var fe;return((fe=J.track)==null?void 0:fe.kind)==="video"});W&&await W.replaceTrack(null)}P(!1),ne(!0)}}catch(L){console.error("Error toggling voice-only mode:",L)}},[r,Q,E]),Pa=v.useCallback(async()=>{if(E)try{const L=E.getVideoTracks()[0],W=Y.peer.getSenders().find(J=>{var fe;return((fe=J.track)==null?void 0:fe.kind)==="video"});if(A)L&&(L.stop(),E.removeTrack(L)),W&&await W.replaceTrack(null);else{const fe=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];E.addTrack(fe),W&&await W.replaceTrack(fe)}P(!A)}catch(L){console.error("Error toggling camera:",L)}},[E,A]),Ra=v.useCallback(async()=>{if(E)try{const L=E.getAudioTracks()[0],W=Y.peer.getSenders().find(J=>{var fe;return((fe=J.track)==null?void 0:fe.kind)==="audio"});if(I)L&&(L.stop(),E.removeTrack(L)),W&&await W.replaceTrack(null);else{const fe=(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0];E.addTrack(fe),W&&await W.replaceTrack(fe)}Z(!I)}catch(L){console.error("Error toggling mic:",L)}},[E,I]),Jt=v.useCallback(()=>{if(E){const L=E.getVideoTracks()[0],W=E.getAudioTracks()[0],J=Y.peer.getSenders();L&&(J.find(Zt=>Zt.track===L)||Y.peer.addTrack(L,E)),W&&(J.find(Zt=>Zt.track===W)||Y.peer.addTrack(W,E))}},[E]),qc=v.useCallback(async()=>{try{if(S){const L=E==null?void 0:E.getVideoTracks()[0],W=Y.peer.getSenders().find(J=>{var fe;return((fe=J.track)==null?void 0:fe.kind)==="video"});if(L&&W&&await W.replaceTrack(L),N==null||N.getTracks().forEach(J=>J.stop()),R(null),_(!1),Y.peer.signalingState==="stable"){const J=await Y.getOffer();t==null||t.emit("peer:nego:needed",{offer:J,targetChatToken:p})}}else{const L=await navigator.mediaDevices.getDisplayMedia({video:!0});R(L),_(!0);const W=L.getVideoTracks()[0],J=Y.peer.getSenders().find(fe=>{var Zt;return((Zt=fe.track)==null?void 0:Zt.kind)==="video"});if(J?await J.replaceTrack(W):Y.peer.addTrack(W,L),Y.peer.signalingState==="stable"){const fe=await Y.getOffer();t==null||t.emit("peer:nego:needed",{offer:fe,targetChatToken:p})}}}catch(L){console.error("Error sharing screen:",L)}},[S,E,N,p,t]),hi=L=>{const W=L.getSenders().find(J=>J.track&&J.track.kind==="audio");if(W){const J=W.getParameters();J.encodings&&J.encodings[0]&&(J.encodings[0].maxBitrate=128e3,W.setParameters(J))}},so=v.useCallback(async L=>{if(console.log("Match found:",L),m(L),he(!1),b(!1),Im("match"),Yr(!0),n||L.startsWith("bot_"))console.log("🤖 Using mock WebRTC connection"),Jn("Demo Partner"),Eg.simulateConnection(W=>{w(W)});else{const W=await Y.getOffer();t==null||t.emit("offer",{offer:W,to:L})}},[t,n]),xr=v.useCallback(async({offer:L,from:W})=>{if(m(W),await ui(),Y.peer.signalingState==="stable"){const J=await Y.getAnswer(L);hi(Y.peer),t==null||t.emit("answer",{answer:J,to:W}),Jt()}else console.warn("Cannot handle incoming offer in signaling state:",Y.peer.signalingState)},[ui,t,Jt]),io=v.useCallback(async({answer:L})=>{Y.peer.signalingState==="have-local-offer"?(await Y.setRemoteDescription(L),Jt()):console.warn("Peer not in a proper state to set remote description.")},[Jt]),vt=L=>L.replace(/a=fmtp:111 .*opus.*/,"a=fmtp:111 maxplaybackrate=48000;stereo=1;sprop-stereo=1;maxaveragebitrate=510000;useinbandfec=1"),oo=v.useCallback(async()=>{if(Y.peer.signalingState==="stable"){const L=await Y.getOffer();if(L&&L.sdp){const W=vt(L.sdp),J=new RTCSessionDescription({type:L.type,sdp:W});hi(Y.peer),t==null||t.emit("peer:nego:needed",{offer:J,targetChatToken:p})}}else console.warn("Peer is not in a stable state for negotiation.")},[p,t]),wr=v.useCallback(async({offer:L,from:W})=>{if(Y.peer.signalingState==="stable"||Y.peer.signalingState==="have-local-offer"){const J=await Y.getAnswer(L);t==null||t.emit("peer:nego:done",{answer:J,to:W})}else console.warn("Cannot handle negotiation in state:",Y.peer.signalingState)},[t]),br=v.useCallback(async({answer:L})=>{Y.peer.signalingState==="have-local-offer"||Y.peer.signalingState==="have-remote-offer"?(await Y.setRemoteDescription(L),Jt()):Y.peer.signalingState==="stable"?console.log("Connection is stable, no need for further negotiation."):console.warn("Cannot set remote description: Peer connection is in state",Y.peer.signalingState)},[Jt]);v.useEffect(()=>(M!==!0&&(Y.peer.addEventListener("negotiationneeded",oo),V(!1)),()=>{Y.peer.removeEventListener("negotiationneeded",oo)}),[M,oo]),v.useEffect(()=>{const L=W=>{const[J]=W.streams;w(J)};return Y.peer.addEventListener("track",L),()=>{Y.peer.removeEventListener("track",L)}},[]);const Xr=v.useCallback(async()=>{V(!0),Y.peer.getTransceivers().forEach(L=>{L.stop&&L.stop()}),Y.peer.getSenders().forEach(L=>{Y.peer.removeTrack(L)}),Y.peer.onicecandidate=null,Y.peer.ontrack=null,Y.peer.onnegotiationneeded=null,Y.peer.signalingState!=="closed"&&Y.peer.close(),w(null),m(null),he(!1),Y.initPeer(),x([])},[]);v.useEffect(()=>(t==null||t.on("skipped",Xr),()=>{t==null||t.off("skipped",Xr)}),[t,Xr]),v.useEffect(()=>{Y.peer.onicecandidate=L=>{L.candidate&&(t==null||t.emit("ice-candidate",{candidate:L.candidate,to:p}))}},[t,p]),v.useEffect(()=>(t==null||t.on("ice-candidate",L=>{if(L.candidate){const W=new RTCIceCandidate(L.candidate);Y.peer.addIceCandidate(W).then(()=>{console.log("Added ICE candidate:",W)}).catch(J=>{console.error("Error adding ICE candidate:",J)})}}),()=>{t==null||t.off("ice-candidate")}),[t]),v.useEffect(()=>(t==null||t.on("stay:connected:response",({wantToStay:L,from:W})=>{ue(L),Pe===!0&&L===!0?(l({id:W,name:qe,avatar:`https://images.pexels.com/photos/${Math.floor(Math.random()*1e6)}/pexels-photo.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop`,isOnline:!0})?alert(`🎉 You and ${qe} are now friends! You can find them in your Friends list.`):(alert(`❌ Couldn't add ${qe} as friend. You've reached the free limit of 3 friends. Upgrade to Premium for unlimited friends!`),De(!0)),Je(!1),Xt()):Pe!==null&&(Je(!1),Xt())}),t==null||t.on("stay:connected:request",({wantToStay:L,from:W})=>{L&&Je(!0)}),()=>{t==null||t.off("stay:connected:response"),t==null||t.off("stay:connected:request")}),[t,Pe,qe,l,Xt]),v.useEffect(()=>(t==null||t.on("user:connect",so),t==null||t.on("offer",xr),t==null||t.on("answer",io),t==null||t.on("peer:nego:needed",wr),t==null||t.on("peer:nego:final",br),t==null||t.on("partnerDisconnected",Xr),t==null||t.on("partner:premium:status",({isPremium:L})=>{he(L)}),()=>{t==null||t.off("user:connect",so),t==null||t.off("offer",xr),t==null||t.off("answer",io),t==null||t.off("peer:nego:needed",wr),t==null||t.off("peer:nego:final",br),t==null||t.off("partnerDisconnected",Xr),t==null||t.off("partner:premium:status")}),[io,xr,br,wr,so,t,Xr]),v.useEffect(()=>{p&&t&&t.emit("send:premium:status",{isPremium:r,targetChatToken:p})},[r,p,t]);const yf=v.useCallback(()=>{try{E&&(E.getTracks().forEach(L=>{L.stop()}),C(null)),N&&(N.getTracks().forEach(L=>{L.stop()}),R(null),_(!1)),k&&(k.getTracks().forEach(L=>{L.stop()}),w(null)),Y.peer&&Y.peer.signalingState!=="closed"&&(Y.peer.close(),Y.initPeer()),p&&setTimeout(()=>{Ia("home")},500)}catch(L){console.error("Error during cleanup:",L)}finally{Zn("/")}},[E,Zn,N,k,p,Ia]),_r=L=>{const W=Number(localStorage.getItem(`ajnabicam_reports_${p}`)||0)+1;localStorage.setItem(`ajnabicam_reports_${p}`,String(W)),no(!0),Yr(!1),Vc(!1),W>=20&&(localStorage.setItem("ajnabicam_suspend_until",String(Date.now()+24*60*60*1e3)),zc(!0)),W<20&&alert("You have been reported. Please follow decency guidelines or your account may be suspended."),setTimeout(()=>no(!1),2e3)},vf=()=>{if(p){let L=JSON.parse(localStorage.getItem("ajnabicam_blocked")||"[]");L.includes(p)||(L.push(p),localStorage.setItem("ajnabicam_blocked",JSON.stringify(L))),ot(!0),li(!1),setTimeout(()=>ot(!1),2e3)}};return v.useEffect(()=>{JSON.parse(localStorage.getItem("ajnabicam_blocked")||"[]").includes(p)&&(alert("You have blocked this user. You will not be matched with them again."),Xt())},[p,Xt]),v.useEffect(()=>{const L=localStorage.getItem("ajnabicam_suspend_until");L&&Date.now()<Number(L)&&zc(!0)},[]),Uc?o.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:o.jsxs("div",{className:"bg-rose-100 border border-rose-300 rounded-2xl p-8 shadow-xl flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-rose-600 mb-4",children:"Account Suspended"}),o.jsx("p",{className:"text-rose-500 text-center mb-4",children:"Your account has been suspended for 24 hours due to excessive amounts of reports."}),o.jsx("p",{className:"text-xs text-rose-400",children:"Please try again later."})]})}):o.jsxs("div",{className:"relative min-h-screen w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-4xl mx-auto bg-white flex flex-col items-center justify-between overflow-y-auto",children:[o.jsx("div",{className:"w-full bg-white shadow-sm px-3 sm:px-4 lg:px-6 py-3 sm:py-4 z-20 border-b border-pink-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(F,{variant:"ghost",className:"rounded-full p-2 hover:bg-rose-50",onClick:yf,children:o.jsx(vr,{size:22,className:"text-rose-500"})}),o.jsx("div",{className:"flex-1 flex justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"font-bold text-xl text-rose-600 tracking-wide block",children:"AjnabiCam"}),Ze&&o.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Friend Call"})]})}),o.jsxs(F,{onClick:()=>q(!0),disabled:a,className:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-semibold px-3 py-2 rounded-full shadow-md",children:[o.jsx(da,{className:"h-4 w-4 mr-1"}),a?"...":i]})]})}),!Ze&&o.jsx("div",{className:"w-full px-4 py-2",children:o.jsx(a8,{isPremium:r,isConnected:p!==null,partnerPremium:ce,onTimeUp:mf,onUpgrade:gf})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-start w-full px-2 pb-32 pt-2 relative",children:[o.jsxs("div",{className:"w-full h-[65vh] rounded-3xl shadow-2xl bg-gradient-to-br from-peach-100 via-cream-50 to-blush-100 overflow-hidden relative border-2 border-peach-200/50 flex items-center justify-center",children:[k?Q?o.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gradient-to-br from-blue-400 to-teal-400",children:[o.jsx("div",{className:"text-7xl mb-2",children:"🎙️"}),o.jsxs("p",{className:"text-white text-lg font-semibold drop-shadow",children:[qe,"'s Voice"]}),Ze&&o.jsx("div",{className:"mt-2 bg-green-500 px-3 py-1 rounded-full",children:o.jsx("span",{className:"text-white text-sm font-bold",children:"Friend"})})]}):o.jsx(Zb,{className:"w-full h-full object-cover",url:k,playing:!0,muted:!1,width:"100%",height:"100%"}):o.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gradient-to-br from-rose-100 to-pink-100",children:[o.jsx(v8,{color:pf,size:40}),o.jsx("p",{className:"text-gray-600 mt-3 text-sm font-medium",children:y?"🔍 Finding your perfect match...":Ze?`📞 Calling ${qe}...`:"��� Waiting for connection..."}),y&&o.jsxs("div",{className:"mt-4 flex flex-col items-center",children:[o.jsxs("div",{className:"flex space-x-1 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),o.jsx("p",{className:"text-xs text-gray-500 text-center px-4",children:"Finding someone special just for you..."})]})]}),E&&!Q&&o.jsx("div",{className:"absolute bottom-4 right-4 w-20 h-32 bg-gradient-to-br from-peach-200/90 via-cream-100/90 to-coral-200/90 backdrop-blur-sm rounded-xl shadow-lg border-2 border-peach-300/50 z-30 flex items-center justify-center",children:o.jsx(Zb,{className:"w-full h-full object-cover rounded-xl",url:E,playing:!0,muted:!0,width:"100%",height:"100%"})}),Ze&&k&&o.jsx("div",{className:"absolute top-4 left-4 bg-green-500 px-3 py-1 rounded-full z-30",children:o.jsx("span",{className:"text-white text-sm font-bold",children:"👥 Friend Call"})})]}),E&&Q&&o.jsxs("div",{className:"w-full h-24 rounded-3xl shadow-2xl bg-gradient-to-br from-purple-400 to-pink-400 overflow-hidden relative border border-rose-100 mt-4 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"text-4xl mb-1",children:"🎙️"}),o.jsx("p",{className:"text-white text-sm font-semibold drop-shadow",children:"Your Voice"}),r&&o.jsxs("div",{className:"flex items-center gap-1 bg-yellow-400 px-2 py-1 rounded-full text-xs font-bold text-white mt-1",children:[o.jsx(Xe,{className:"h-3 w-3"})," PREMIUM"]})]})]}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-40 flex flex-col items-center pb-4 max-w-md mx-auto",children:[o.jsxs("div",{className:"w-full flex flex-row justify-center items-center gap-2 bg-white rounded-2xl shadow-2xl px-3 py-2 border border-pink-100",children:[o.jsxs(F,{className:"flex-1 mx-1 p-3 bg-rose-500 text-white rounded-xl text-lg font-bold shadow-md",onClick:Xt,disabled:p===null,children:[o.jsx(Y9,{size:22}),o.jsx("span",{className:"ml-2",children:Ze?"End":"Skip"})]}),o.jsx(F,{className:`flex-1 mx-1 p-3 rounded-xl text-lg font-bold shadow-md flex items-center justify-center ${A?"bg-gray-200 text-rose-500":"bg-rose-500 text-white"}`,onClick:Pa,children:A?o.jsx(Qy,{size:22}):o.jsx(r8,{size:22})}),o.jsx(F,{className:`flex-1 mx-1 p-3 rounded-xl text-lg font-bold shadow-md flex items-center justify-center ${I?"bg-gray-200 text-rose-500":"bg-rose-500 text-white"}`,onClick:Ra,children:I?o.jsx(sh,{size:22}):o.jsx(z9,{size:22})}),o.jsx(F,{className:"flex-1 mx-1 p-3 bg-fuchsia-500 text-white rounded-xl text-lg font-bold shadow-md",onClick:qc,children:o.jsx(G9,{size:22})})]}),r&&p&&o.jsx("div",{className:"w-full flex justify-center mt-2",children:o.jsxs(F,{className:`px-6 py-2 rounded-xl font-semibold shadow-md ${Q?"bg-purple-500 text-white":"bg-white text-purple-500 border border-purple-300"}`,onClick:di,children:[o.jsx(wN,{className:"h-4 w-4 mr-2"}),Q?"Switch to Video":"Voice Only"]})}),!Ze&&o.jsxs("div",{className:"w-full flex flex-row justify-center gap-2 mt-2",children:[o.jsx(F,{className:"bg-gray-100 text-gray-700 font-semibold rounded-xl px-6 py-2",onClick:()=>li(!0),children:"Block"}),o.jsx(F,{className:"bg-rose-100 text-rose-700 font-semibold rounded-xl px-6 py-2",onClick:()=>Yr(!0),children:"Report"})]})]}),oi.show&&o.jsx(h8,{friendName:oi.friendName,onCall:()=>Hc(oi.friendId),onDismiss:()=>ai({show:!1,friendName:"",friendId:""})}),o.jsx(lf,{isOpen:ee,onClose:()=>De(!1),onPurchase:ci}),o.jsx(IN,{isOpen:Ct,onClose:()=>q(!1)}),o.jsx(d8,{isOpen:Se,onClose:()=>Je(!1),onStayConnected:Aa,partnerName:qe}),o.jsx(i_,{isOpen:Na,onClose:()=>Yr(!1),onSubmit:_r}),o.jsx(i_,{isOpen:ff,onClose:()=>Vc(!1),onSubmit:_r}),o.jsx(u8,{isOpen:Ca,onClose:()=>li(!1),onBlock:vf}),Fc&&o.jsx("div",{className:"fixed bottom-32 left-1/2 -translate-x-1/2 bg-green-100 text-green-700 px-4 py-2 rounded-full shadow-lg z-50",children:"Thank you for your report."}),$c&&o.jsx("div",{className:"fixed bottom-40 left-1/2 -translate-x-1/2 bg-rose-100 text-rose-700 px-4 py-2 rounded-full shadow-lg z-50",children:"User blocked. You won't be matched again."})]})}async function cf(){try{console.log("🔍 Testing Firebase Storage connection...");const t=to(yn,"connection-test/test.txt"),e=new Blob(["Firebase Storage connection test"],{type:"text/plain"});await eo(t,e),console.log("✅ Write operation successful");const n=await Gr(t);return console.log("✅ Read operation successful",n),await Dy(t),console.log("✅ Delete operation successful"),{isConnected:!0,status:"success",message:"Firebase Storage is connected and working perfectly!",details:{canRead:!0,canWrite:!0,canDelete:!0}}}catch(t){console.error("❌ Firebase Storage connection test failed:",t);let e="Firebase Storage connection failed",n={canRead:!1,canWrite:!1,canDelete:!1,error:t.message};switch(t.code){case"storage/unauthorized":e="Unauthorized: Check Firebase Storage security rules";break;case"storage/quota-exceeded":e="Storage quota exceeded";break;case"storage/unauthenticated":e="Not authenticated: User authentication required";break;case"storage/retry-limit-exceeded":e="Connection timeout: Check network and Firebase configuration";break;case"storage/invalid-url":e="Invalid storage URL: Check Firebase configuration";break;case"storage/no-default-bucket":e="No default storage bucket configured";break;default:t.message.includes("CORS")?e="CORS error: Configure CORS for your storage bucket":t.message.includes("network")&&(e="Network error: Check internet connection")}return{isConnected:!1,status:"error",message:e,details:n}}}async function T8(t=3){let e;for(let n=1;n<=t;n++){if(console.log(`🔄 Connection test attempt ${n}/${t}`),e=await cf(),e.isConnected)return e;if(n<t){const r=Math.pow(2,n)*1e3;console.log(`⏳ Waiting ${r}ms before retry...`),await new Promise(s=>setTimeout(s,r))}}return e}function S8(){try{return{bucket:yn.app.options.storageBucket,projectId:yn.app.options.projectId,apiKey:yn.app.options.apiKey?"***"+yn.app.options.apiKey.slice(-4):"Not set",authDomain:yn.app.options.authDomain}}catch(t){return{error:"Failed to get storage configuration",details:t}}}async function k8(t){try{const e=to(yn,`test-uploads/test_${Date.now()}_${t.name}`);await eo(e,t);const n=await Gr(e);return await Dy(e),{isConnected:!0,status:"success",message:`Successfully uploaded and cleaned up test file: ${t.name}`,details:{canRead:!0,canWrite:!0,canDelete:!0,url:n}}}catch(e){return{isConnected:!1,status:"error",message:`File upload test failed: ${e.message}`,details:{canRead:!1,canWrite:!1,canDelete:!1,error:e.message}}}}function N8({onComplete:t}){var i;const[e,n]=v.useState(!0);console.log("SplashScreen rendered");const[r,s]=v.useState({isTestingConnection:!1,connectionResult:null,showConnectionTest:!1});return v.useEffect(()=>{const a=setTimeout(()=>{s(c=>({...c,isTestingConnection:!0,showConnectionTest:!0})),cf().then(c=>{s(d=>({...d,isTestingConnection:!1,connectionResult:c}))}).catch(c=>{s(d=>({...d,isTestingConnection:!1,connectionResult:{isConnected:!1,status:"error",message:"Connection test failed",details:{canRead:!1,canWrite:!1,canDelete:!1,error:c.message}}}))})},1e3),l=setTimeout(()=>{console.log("SplashScreen: hiding splash after timeout"),n(!1),setTimeout(()=>{console.log("SplashScreen: calling onComplete"),t()},300)},2e3);return()=>{clearTimeout(l),clearTimeout(a)}},[t]),e?o.jsx("div",{style:{background:"linear-gradient(to bottom right, #ffd1a3, #fff0c4, #ffb3b3)",transition:"opacity 0.5s"},className:`fixed inset-0 z-50 flex items-center justify-center px-4 sm:px-6 lg:px-8 ${e?"opacity-100":"opacity-0"}`,children:o.jsxs("div",{className:"flex flex-col items-center justify-center animate-fade-in max-w-lg w-full",children:[o.jsxs("div",{className:"relative mb-4 sm:mb-6 lg:mb-8 transform hover:scale-105 transition-transform duration-300",children:[o.jsx("img",{src:"/splash-image.png",alt:"AjnabiCam Splash",className:"w-64 sm:w-72 md:w-80 lg:w-96 h-auto rounded-2xl sm:rounded-3xl shadow-2xl max-w-full"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-2xl sm:rounded-3xl"})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-4 sm:mt-6",children:[o.jsx("div",{style:{backgroundColor:"#ff9a56"},className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full animate-bounce shadow-lg"}),o.jsx("div",{style:{backgroundColor:"#ff6b6b",animationDelay:"0.1s"},className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full animate-bounce shadow-lg"}),o.jsx("div",{style:{backgroundColor:"#ff6b6b",animationDelay:"0.2s"},className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full animate-bounce shadow-lg"})]}),o.jsx("p",{style:{color:"#e55a1b"},className:"text-base sm:text-lg lg:text-xl font-medium mt-3 sm:mt-4 animate-pulse text-center px-4",children:"💕 Finding your perfect match..."}),r.showConnectionTest&&o.jsxs("div",{className:"mt-4 sm:mt-6 bg-white/90 backdrop-blur-sm rounded-xl p-3 sm:p-4 shadow-xl border border-passion-200 w-full max-w-sm mx-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(Rc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-passion-600 flex-shrink-0"}),o.jsx("span",{className:"font-semibold text-romance-800 text-sm sm:text-base",children:"Firebase Storage"}),r.isTestingConnection?o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 ml-auto",children:[o.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-passion-300 border-t-passion-600 rounded-full animate-spin"}),o.jsx("span",{className:"text-xs sm:text-sm text-romance-700",children:"Testing..."})]}):r.connectionResult?o.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 ml-auto",children:r.connectionResult.isConnected?o.jsxs(o.Fragment,{children:[o.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600"}),o.jsx(kN,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-green-700 font-medium",children:"Connected"})]}):o.jsxs(o.Fragment,{children:[o.jsx(xs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-red-700 font-medium",children:"Failed"})]})}):null]}),r.connectionResult&&o.jsx("p",{className:`text-xs sm:text-sm mt-2 ${r.connectionResult.isConnected?"text-green-600":"text-red-600"}`,children:r.connectionResult.message}),((i=r.connectionResult)==null?void 0:i.details)&&!r.isTestingConnection&&o.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 mt-2 text-xs",children:[o.jsxs("span",{className:`flex items-center gap-1 ${r.connectionResult.details.canWrite?"text-green-600":"text-red-600"}`,children:[r.connectionResult.details.canWrite?"✓":"✗"," ","Write"]}),o.jsxs("span",{className:`flex items-center gap-1 ${r.connectionResult.details.canRead?"text-green-600":"text-red-600"}`,children:[r.connectionResult.details.canRead?"✓":"✗"," ","Read"]}),o.jsxs("span",{className:`flex items-center gap-1 ${r.connectionResult.details.canDelete?"text-green-600":"text-red-600"}`,children:[r.connectionResult.details.canDelete?"✓":"✗"," ","Delete"]})]})]})]})}):null}const Mc=v.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:si("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Mc.displayName="Input";const AN=v.createContext(null),Lc=()=>{const t=v.useContext(AN);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},a_={en:{"app.name":"AjnabiCam: Love Connects","app.tagline":"Where Every Connection Sparks a Story ✨","onboarding.welcome":"Welcome to AjnabiCam","onboarding.subtitle":"Set up your profile to get started","onboarding.username":"Username","onboarding.username.placeholder":"Enter your username","onboarding.gender":"Gender","onboarding.gender.male":"Male","onboarding.gender.female":"Female","onboarding.gender.other":"Other","onboarding.language":"Language","onboarding.continue":"Continue","onboarding.skip":"Skip for now","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"Find Your Match 💕","home.features.hd":"HD Video","home.features.secure":"Safe & Private","home.features.instant":"Instant Spark","nav.home":"Home","nav.chat":"Chat","nav.friends":"Friends","nav.voice":"Voice","nav.profile":"Profile","profile.title":"Profile","profile.premium.active":"Premium Active","profile.premium.enjoying":"Enjoying all premium features! ✨","profile.premium.upgrade":"Upgrade to Premium","profile.premium.unlock":"Unlock exclusive features and enhanced experience!","profile.premium.features.gender":"✓ Gender Filter","profile.premium.features.voice":"✓ Voice Mode","profile.premium.features.unlimited":"✓ Unlimited Time","profile.username":"Username","profile.addPhoto":"Add Photo","profile.referral.title":"Referral Rewards","profile.referral.id":"Your Referral ID","profile.referral.copy":"Copy","profile.referral.reward":"🎁 Refer 1 friend successfully = 24h Premium FREE!","profile.referral.share":"Share your code and both you and your friend get premium benefits","profile.settings":"Settings","profile.settings.privacy":"Privacy Settings","profile.settings.notifications":"Notification Preferences","profile.settings.account":"Account Settings","profile.settings.language":"Language Settings","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.cancel":"Cancel","common.save":"Save","common.back":"Back"},hi:{"app.name":"अजनबीकैम","app.tagline":"अजनबियों से तुरंत जुड़ें","onboarding.welcome":"अजनबीकैम में आपका स्वागत है","onboarding.subtitle":"शुरू करने के लिए अपनी प्रोफ़ाइल सेट करें","onboarding.username":"उपयोगकर्ता नाम","onboarding.username.placeholder":"अपना उपयोगकर्ता नाम दर्ज करें","onboarding.gender":"लिंग","onboarding.gender.male":"पुरुष","onboarding.gender.female":"महिला","onboarding.gender.other":"अन्य","onboarding.language":"भाषा","onboarding.continue":"जारी रखें","onboarding.skip":"अभी छोड़ें","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"चैट शुरू करें","home.features.hd":"HD वीडियो","home.features.secure":"सुरक्षित","home.features.instant":"तुरंत","nav.home":"होम","nav.chat":"चैट","nav.friends":"दोस्त","nav.voice":"आवाज़","nav.profile":"प्रोफ़ाइल","profile.title":"प्रोफ़ाइल","profile.premium.active":"प्रीमियम सक्रिय","profile.premium.enjoying":"सभी प्रीमियम सुविधाओं का आनंद ले रहे हैं! ✨","profile.premium.upgrade":"प्रीमियम में अपग्रेड करें","profile.premium.unlock":"विशेष सुविधाओं और बेहतर अनुभव को अनलॉक करें!","profile.premium.features.gender":"✓ जेंडर फिल्टर","profile.premium.features.voice":"✓ वॉयस मोड","profile.premium.features.unlimited":"✓ असीमित समय","profile.username":"उपयोगकर्ता नाम","profile.addPhoto":"फोटो जोड़ें","profile.referral.title":"रेफरल रिवार्ड्स","profile.referral.id":"आपका रेफरल आईडी","profile.referral.copy":"कॉपी करें","profile.referral.reward":"🎁 1 दोस्त को सफलतापूर्वक रेफर करें = 24 घंटे प्रीमियम मुफ्त!","profile.referral.share":"अपना कोड शेयर करें और आप और आपके दोस्त दोनों को प्रीमियम लाभ मिलें","profile.settings":"सेटिंग्स","profile.settings.privacy":"प्राइवेसी सेटिंग्स","profile.settings.notifications":"नोटिफिकेशन प्राथमिकताएं","profile.settings.account":"खाता सेटिंग्स","profile.settings.language":"भाषा सेटिंग्स","common.loading":"लोड हो रहा है...","common.error":"त्रुटि","common.success":"सफलता","common.cancel":"रद्द करें","common.save":"सेव करें","common.back":"वापस"},es:{"app.name":"AjnabiCam","app.tagline":"Conecta con extraños al instante","onboarding.welcome":"Bienvenido a AjnabiCam","onboarding.subtitle":"Configura tu perfil para comenzar","onboarding.username":"Nombre de usuario","onboarding.username.placeholder":"Ingresa tu nombre de usuario","onboarding.gender":"Género","onboarding.gender.male":"Masculino","onboarding.gender.female":"Femenino","onboarding.gender.other":"Otro","onboarding.language":"Idioma","onboarding.continue":"Continuar","onboarding.skip":"Omitir por ahora","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"Comenzar a chatear","home.features.hd":"Video HD","home.features.secure":"Seguro","home.features.instant":"Instantáneo","nav.home":"Inicio","nav.chat":"Chat","nav.friends":"Amigos","nav.voice":"Voz","nav.profile":"Perfil","profile.title":"Perfil","profile.premium.active":"Premium Activo","profile.premium.enjoying":"¡Disfrutando de todas las funciones premium! ✨","profile.premium.upgrade":"Actualizar a Premium","profile.premium.unlock":"¡Desbloquea funciones exclusivas y una experiencia mejorada!","profile.premium.features.gender":"✓ Filtro de Género","profile.premium.features.voice":"✓ Modo de Voz","profile.premium.features.unlimited":"✓ Tiempo Ilimitado","profile.username":"Nombre de usuario","profile.addPhoto":"Agregar Foto","profile.referral.title":"Recompensas de Referidos","profile.referral.id":"Tu ID de Referido","profile.referral.copy":"Copiar","profile.referral.reward":"🎁 ¡Refiere 1 amigo exitosamente = 24h Premium GRATIS!","profile.referral.share":"Comparte tu código y tanto tú como tu amigo obtendrán beneficios premium","profile.settings":"Configuraciones","profile.settings.privacy":"Configuración de Privacidad","profile.settings.notifications":"Preferencias de Notificación","profile.settings.account":"Configuración de Cuenta","profile.settings.language":"Configuración de Idioma","common.loading":"Cargando...","common.error":"Error","common.success":"Éxito","common.cancel":"Cancelar","common.save":"Guardar","common.back":"Atrás"},fr:{"app.name":"AjnabiCam","app.tagline":"Connectez-vous instantanément avec des inconnus","onboarding.welcome":"Bienvenue sur AjnabiCam","onboarding.subtitle":"Configurez votre profil pour commencer","onboarding.username":"Nom d'utilisateur","onboarding.username.placeholder":"Entrez votre nom d'utilisateur","onboarding.gender":"Genre","onboarding.gender.male":"Masculin","onboarding.gender.female":"Féminin","onboarding.gender.other":"Autre","onboarding.language":"Langue","onboarding.continue":"Continuer","onboarding.skip":"Passer pour maintenant","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"Commencer à chatter","home.features.hd":"Vidéo HD","home.features.secure":"Sécurisé","home.features.instant":"Instantané","nav.home":"Accueil","nav.chat":"Chat","nav.friends":"Amis","nav.voice":"Voix","nav.profile":"Profil","profile.title":"Profil","profile.premium.active":"Premium Actif","profile.premium.enjoying":"Profitez de toutes les fonctionnalités premium ! ✨","profile.premium.upgrade":"Passer à Premium","profile.premium.unlock":"Débloquez des fonctionnalités exclusives et une expérience améliorée !","profile.premium.features.gender":"✓ Filtre de Genre","profile.premium.features.voice":"✓ Mode Vocal","profile.premium.features.unlimited":"✓ Temps Illimité","profile.username":"Nom d'utilisateur","profile.addPhoto":"Ajouter une Photo","profile.referral.title":"Récompenses de Parrainage","profile.referral.id":"Votre ID de Parrainage","profile.referral.copy":"Copier","profile.referral.reward":"🎁 Parrainez 1 ami avec succès = 24h Premium GRATUIT !","profile.referral.share":"Partagez votre code et vous et votre ami obtiendrez des avantages premium","profile.settings":"Paramètres","profile.settings.privacy":"Paramètres de Confidentialité","profile.settings.notifications":"Préférences de Notification","profile.settings.account":"Paramètres du Compte","profile.settings.language":"Paramètres de Langue","common.loading":"Chargement...","common.error":"Erreur","common.success":"Succès","common.cancel":"Annuler","common.save":"Sauvegarder","common.back":"Retour"},de:{"app.name":"AjnabiCam","app.tagline":"Verbinde dich sofort mit Fremden","onboarding.welcome":"Willkommen bei AjnabiCam","onboarding.subtitle":"Richte dein Profil ein, um zu beginnen","onboarding.username":"Benutzername","onboarding.username.placeholder":"Gib deinen Benutzernamen ein","onboarding.gender":"Geschlecht","onboarding.gender.male":"Männlich","onboarding.gender.female":"Weiblich","onboarding.gender.other":"Andere","onboarding.language":"Sprache","onboarding.continue":"Weiter","onboarding.skip":"Vorerst überspringen","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"Chat starten","home.features.hd":"HD Video","home.features.secure":"Sicher","home.features.instant":"Sofort","nav.home":"Startseite","nav.chat":"Chat","nav.friends":"Freunde","nav.voice":"Stimme","nav.profile":"Profil","profile.title":"Profil","profile.premium.active":"Premium Aktiv","profile.premium.enjoying":"Genieße alle Premium-Funktionen! ✨","profile.premium.upgrade":"Auf Premium upgraden","profile.premium.unlock":"Schalte exklusive Funktionen und verbesserte Erfahrung frei!","profile.premium.features.gender":"✓ Geschlechtsfilter","profile.premium.features.voice":"✓ Sprachmodus","profile.premium.features.unlimited":"✓ Unbegrenzte Zeit","profile.username":"Benutzername","profile.addPhoto":"Foto hinzufügen","profile.referral.title":"Empfehlungsbelohnungen","profile.referral.id":"Deine Empfehlungs-ID","profile.referral.copy":"Kopieren","profile.referral.reward":"🎁 Empfehle 1 Freund erfolgreich = 24h Premium KOSTENLOS!","profile.referral.share":"Teile deinen Code und sowohl du als auch dein Freund erhalten Premium-Vorteile","profile.settings":"Einstellungen","profile.settings.privacy":"Datenschutz-Einstellungen","profile.settings.notifications":"Benachrichtigungseinstellungen","profile.settings.account":"Kontoeinstellungen","profile.settings.language":"Spracheinstellungen","common.loading":"Lädt...","common.error":"Fehler","common.success":"Erfolg","common.cancel":"Abbrechen","common.save":"Speichern","common.back":"Zurück"},pt:{"app.name":"AjnabiCam","app.tagline":"Conecte-se instantaneamente com estranhos","onboarding.welcome":"Bem-vindo ao AjnabiCam","onboarding.subtitle":"Configure seu perfil para começar","onboarding.username":"Nome de usuário","onboarding.username.placeholder":"Digite seu nome de usuário","onboarding.gender":"Gênero","onboarding.gender.male":"Masculino","onboarding.gender.female":"Feminino","onboarding.gender.other":"Outro","onboarding.language":"Idioma","onboarding.continue":"Continuar","onboarding.skip":"Pular por agora","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"Começar a conversar","home.features.hd":"Vídeo HD","home.features.secure":"Seguro","home.features.instant":"Instantâneo","nav.home":"Início","nav.chat":"Chat","nav.friends":"Amigos","nav.voice":"Voz","nav.profile":"Perfil","profile.title":"Perfil","profile.premium.active":"Premium Ativo","profile.premium.enjoying":"Aproveitando todos os recursos premium! ✨","profile.premium.upgrade":"Atualizar para Premium","profile.premium.unlock":"Desbloqueie recursos exclusivos e experiência aprimorada!","profile.premium.features.gender":"✓ Filtro de Gênero","profile.premium.features.voice":"✓ Modo de Voz","profile.premium.features.unlimited":"✓ Tempo Ilimitado","profile.username":"Nome de usuário","profile.addPhoto":"Adicionar Foto","profile.referral.title":"Recompensas de Indicação","profile.referral.id":"Seu ID de Indicação","profile.referral.copy":"Copiar","profile.referral.reward":"🎁 Indique 1 amigo com sucesso = 24h Premium GRÁTIS!","profile.referral.share":"Compartilhe seu código e tanto você quanto seu amigo receberão benefícios premium","profile.settings":"Configurações","profile.settings.privacy":"Configurações de Privacidade","profile.settings.notifications":"Preferências de Notificação","profile.settings.account":"Configurações da Conta","profile.settings.language":"Configurações de Idioma","common.loading":"Carregando...","common.error":"Erro","common.success":"Sucesso","common.cancel":"Cancelar","common.save":"Salvar","common.back":"Voltar"},ar:{"app.name":"أجنبي كام","app.tagline":"تواصل مع الغرباء فوراً","onboarding.welcome":"مرحباً بك في أجنبي كام","onboarding.subtitle":"قم بإعداد ملفك الشخصي للبدء","onboarding.username":"اسم المستخدم","onboarding.username.placeholder":"أدخل اسم المستخدم","onboarding.gender":"الجنس","onboarding.gender.male":"ذكر","onboarding.gender.female":"أنثى","onboarding.gender.other":"آخر","onboarding.language":"اللغة","onboarding.continue":"متابعة","onboarding.skip":"تخطي الآن","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"بدء المحادثة","home.features.hd":"فيديو عالي الدقة","home.features.secure":"آمن","home.features.instant":"فوري","nav.home":"الرئيسية","nav.chat":"المحادثة","nav.friends":"الأصدقاء","nav.voice":"الصوت","nav.profile":"الملف الشخصي","profile.title":"الملف الشخصي","profile.premium.active":"البريميوم نشط","profile.premium.enjoying":"استمتع بجميع ميزات البريميوم! ✨","profile.premium.upgrade":"الترقية إلى البريميوم","profile.premium.unlock":"افتح الميزات الحصرية والتجربة المحسنة!","profile.premium.features.gender":"✓ فلتر الجنس","profile.premium.features.voice":"✓ وضع الصوت","profile.premium.features.unlimited":"✓ وقت غير محدود","profile.username":"اسم المستخدم","profile.addPhoto":"إضافة صورة","profile.referral.title":"مكافآت الإحالة","profile.referral.id":"معرف الإحالة الخاص بك","profile.referral.copy":"نسخ","profile.referral.reward":"🎁 أحل صديق واحد بنجاح = 24 ساعة بريميوم مجاناً!","profile.referral.share":"شارك رمزك وستحصل أنت وصديقك على مزايا البريميوم","profile.settings":"الإعدادات","profile.settings.privacy":"إعدادات الخصوصية","profile.settings.notifications":"تفضيلات الإشعارات","profile.settings.account":"إعدادات الحساب","profile.settings.language":"إعدادات اللغة","common.loading":"جاري التحميل...","common.error":"خطأ","common.success":"نجح","common.cancel":"إلغاء","common.save":"حفظ","common.back":"رجوع"},zh:{"app.name":"陌生人摄像头","app.tagline":"立即与陌生人连接","onboarding.welcome":"欢迎来到陌生人摄像头","onboarding.subtitle":"设置您的个人资料以开始","onboarding.username":"用户名","onboarding.username.placeholder":"输入您的用户名","onboarding.gender":"性别","onboarding.gender.male":"男性","onboarding.gender.female":"女性","onboarding.gender.other":"其他","onboarding.language":"语言","onboarding.continue":"继续","onboarding.skip":"暂时跳过","language.english":"English","language.hindi":"हिंदी (Hindi)","language.spanish":"Español (Spanish)","language.french":"Français (French)","language.german":"Deutsch (German)","language.portuguese":"Português (Portuguese)","language.arabic":"العربية (Arabic)","language.chinese":"中文 (Chinese)","home.start":"开始聊天","home.features.hd":"高清视频","home.features.secure":"安全","home.features.instant":"即时","nav.home":"首页","nav.chat":"聊天","nav.friends":"朋友","nav.voice":"语音","nav.profile":"个人资料","profile.title":"个人资料","profile.premium.active":"高级版已激活","profile.premium.enjoying":"享受所有高级功能！✨","profile.premium.upgrade":"升级到高级版","profile.premium.unlock":"解锁独家功能和增强体验！","profile.premium.features.gender":"✓ 性别过滤器","profile.premium.features.voice":"✓ 语音模式","profile.premium.features.unlimited":"✓ 无限时间","profile.username":"用户名","profile.addPhoto":"添加照片","profile.referral.title":"推荐奖励","profile.referral.id":"您的推荐ID","profile.referral.copy":"复制","profile.referral.reward":"🎁 成功推荐1位朋友 = 24小时高级版免费！","profile.referral.share":"分享您的代码，您和您的朋友都将获得高级版福利","profile.settings":"设置","profile.settings.privacy":"隐私设置","profile.settings.notifications":"通知偏好","profile.settings.account":"账户设置","profile.settings.language":"语言设置","common.loading":"加载中...","common.error":"错误","common.success":"成功","common.cancel":"取消","common.save":"保存","common.back":"返回"}},C8=({children:t})=>{const[e,n]=v.useState("en");v.useEffect(()=>{const i=localStorage.getItem("ajnabicam_language");i&&a_[i]&&n(i)},[]);const r=i=>{n(i),localStorage.setItem("ajnabicam_language",i)},s=i=>a_[e][i]||i;return o.jsx(AN.Provider,{value:{language:e,setLanguage:r,t:s},children:t})},Tg=[{code:"en",name:"English",flag:"🇺🇸"},{code:"hi",name:"हिंदी",flag:"🇮🇳"},{code:"es",name:"Español",flag:"🇪🇸"},{code:"fr",name:"Français",flag:"🇫🇷"},{code:"de",name:"Deutsch",flag:"🇩🇪"},{code:"pt",name:"Português",flag:"🇧🇷"},{code:"ar",name:"العربية",flag:"🇸🇦"},{code:"zh",name:"中文",flag:"🇨🇳"}];function I8(){const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(null),[a,l]=v.useState(""),[c,d]=v.useState(!1),[h,p]=v.useState(!1),[m,y]=v.useState(0),{language:b,setLanguage:E,t:C}=Lc(),k=ht(),w=Rh(Ks),N=S=>{var A;const _=(A=S.target.files)==null?void 0:A[0];if(_){if(!_.type.startsWith("image/")){alert("Please select a valid image file");return}if(_.size>5*1024*1024){alert("Image size should be less than 5MB");return}i(_);const P=new FileReader;P.onload=I=>{var Z;(Z=I.target)!=null&&Z.result&&l(I.target.result)},P.readAsDataURL(_)}},R=async(S,_)=>{try{const A=to(yn,`profile-images/${_}_${Date.now()}`),P=await eo(A,S);return await Gr(P.ref)}catch(A){return console.error("Error uploading image:",A),null}},M=async()=>{if(!t.trim()){alert("Please enter a username");return}if(!n){alert("Please select your gender");return}if(!s){alert("Please upload a profile picture");return}if(!h){p(!0),y(0);try{const S=w.currentUser;if(!S)throw new Error("No authenticated user found");y(30);const _=await R(s,S.uid);if(!_)throw new Error("Failed to upload profile image");y(70);const A=ln(Wt,"users",S.uid);await eh(A,{username:t.trim(),gender:n,profileImageUrl:_,language:b,onboardingComplete:!0,coins:100,createdAt:new Date,updatedAt:new Date},{merge:!0}),y(100),console.log("User onboarding data saved to Firestore"),setTimeout(()=>{k("/")},500)}catch(S){console.error("Error saving onboarding data:",S),alert("Error saving your information. Please try again.")}finally{p(!1),y(0)}}},V=async()=>{if(!h){p(!0);try{const S=w.currentUser;if(!S)throw new Error("No authenticated user found");const _=ln(Wt,"users",S.uid);await eh(_,{username:"User",gender:"other",profileImageUrl:"",language:b,onboardingComplete:!0,coins:100,createdAt:new Date,updatedAt:new Date},{merge:!0}),console.log("User skipped onboarding, minimal data saved to Firestore"),k("/")}catch(S){console.error("Error saving skip data:",S),alert("Error completing setup. Please try again.")}finally{p(!1)}}},j=[{value:"male",label:C("onboarding.gender.male"),emoji:"👨"},{value:"female",label:C("onboarding.gender.female"),emoji:"👩"},{value:"other",label:C("onboarding.gender.other"),emoji:"🧑"}],x=Tg.find(S=>S.code===b);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-peach-100 via-cream-50 to-blush-100 flex items-center justify-center px-4 py-8",children:o.jsxs(be,{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl p-8 relative",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"text-6xl mb-4",children:"💕"}),o.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-peach-600 to-coral-600 bg-clip-text text-transparent mb-2",children:C("onboarding.welcome")}),o.jsx("p",{className:"text-gray-600",children:C("onboarding.subtitle")})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[o.jsx(ca,{className:"h-4 w-4"}),"Profile Picture"]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"relative w-24 h-24 mb-4",children:[a?o.jsx("img",{src:a,alt:"Profile preview",className:"w-full h-full rounded-full object-cover border-4 border-peach-200 shadow-lg"}):o.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-peach-200 to-coral-200 flex items-center justify-center border-4 border-peach-200 shadow-lg",children:o.jsx(ca,{className:"h-8 w-8 text-peach-600"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer rounded-full",disabled:h})]}),o.jsxs(F,{variant:"outline",size:"sm",className:"text-peach-600 border-peach-300 hover:bg-peach-50",onClick:()=>{var S;return(S=document.querySelector('input[type="file"]'))==null?void 0:S.click()},disabled:h,children:[o.jsx(Ky,{className:"h-4 w-4 mr-2"}),"Choose Photo"]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Max 5MB • JPG, PNG, GIF"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[o.jsx(Dc,{className:"h-4 w-4"}),C("onboarding.language")]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>d(!c),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-peach-500 focus:border-transparent bg-white flex items-center justify-between hover:border-peach-300 transition-colors",disabled:h,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:x==null?void 0:x.flag}),o.jsx("span",{className:"font-medium",children:x==null?void 0:x.name})]}),o.jsx(vN,{className:`h-4 w-4 transition-transform ${c?"rotate-180":""}`})]}),c&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:Tg.map(S=>o.jsxs("button",{onClick:()=>{E(S.code),d(!1)},className:`w-full px-4 py-3 text-left hover:bg-peach-50 flex items-center gap-3 transition-colors ${b===S.code?"bg-peach-100 text-peach-700":"text-gray-700"}`,disabled:h,children:[o.jsx("span",{className:"text-xl",children:S.flag}),o.jsx("span",{className:"font-medium",children:S.name})]},S.code))})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx(Lr,{className:"h-4 w-4"}),C("onboarding.username")]}),o.jsx(Mc,{type:"text",value:t,onChange:S=>e(S.target.value),placeholder:C("onboarding.username.placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-peach-500 focus:border-transparent",maxLength:20,disabled:h})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[o.jsx(Kr,{className:"h-4 w-4"}),C("onboarding.gender")]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:j.map(S=>o.jsxs("button",{onClick:()=>r(S.value),className:`py-3 px-4 rounded-xl border-2 transition-all flex items-center gap-3 ${n===S.value?"border-peach-500 bg-peach-50 text-peach-700":"border-gray-300 text-gray-700 hover:border-peach-300 hover:bg-peach-25"}`,disabled:h,children:[o.jsx("span",{className:"text-2xl",children:S.emoji}),o.jsx("span",{className:"font-medium",children:S.label})]},S.value))})]}),h&&m>0&&o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[o.jsx("span",{children:"Uploading..."}),o.jsxs("span",{children:[m,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-peach-500 to-coral-500 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsx(F,{onClick:M,disabled:!t.trim()||!n||!s||h,className:"w-full py-3 rounded-xl bg-gradient-to-r from-peach-500 via-coral-500 to-blush-600 hover:from-peach-600 hover:via-coral-600 hover:to-blush-700 text-white font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 transition-all duration-200",children:h?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m>0?`Uploading... ${m}%`:"Saving..."]}):C("onboarding.continue")}),o.jsx(F,{onClick:V,variant:"outline",disabled:h,className:"w-full py-3 rounded-xl border-2 border-peach-300 text-peach-700 hover:bg-peach-50 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Processing...":C("onboarding.skip")})]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"🔒 Your information is kept private and secure"})})]})})}function l_(){const[t,e]=v.useState(!1),n=ht(),r=()=>{e(!0);const i=Date.now()+24*60*60*1e3;localStorage.setItem("ajnabicam_premium_trial","true"),localStorage.setItem("ajnabicam_premium_trial_expiry",i.toString()),setTimeout(()=>n("/"),2e3)};return o.jsx("main",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-br from-green-50 via-rose-100 to-rose-200 px-4 py-6",children:o.jsxs("div",{className:"w-full max-w-xs bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-rose-600 mb-4 text-center",children:"Unlock Premium for 24 Hours!"}),o.jsxs("p",{className:"text-base text-rose-500 mb-6 text-center font-semibold",children:["Refer AjnabiCam to ",o.jsx("span",{className:"text-green-600 font-bold",children:"1 friend"})," and get ",o.jsx("span",{className:"text-yellow-500 font-bold",children:"24 hours"})," of premium features for free!"]}),t?o.jsx("div",{className:"w-full text-center text-green-600 font-semibold mb-2",children:"Referral successful! Enjoy your 24h premium 🎉"}):o.jsx(F,{className:"w-full py-3 rounded-xl bg-green-500 text-white font-bold text-base mb-2",onClick:r,children:"Refer to a Friend"}),o.jsx(F,{className:"w-full py-3 rounded-xl border border-rose-300 text-rose-600 bg-white font-semibold text-base",variant:"outline",onClick:()=>n("/"),children:"Back to Home"})]})})}function j8(){return Math.random().toString(36).substring(2,8).toUpperCase()+Math.floor(Math.random()*1e3)}function A8(){const[t]=v.useState(()=>{let m=localStorage.getItem("ajnabicam_referral_code");return m||(m=j8(),localStorage.setItem("ajnabicam_referral_code",m)),m}),[e,n]=v.useState(""),[r,s]=v.useState(!1),[i,a]=v.useState(""),[l,c]=v.useState(!1),d=ht(),h=async()=>{if(!(!e.trim()||l)){if(e===t){a("You cannot use your own referral code.");return}c(!0),a("");try{const m=Ri.currentUser;if(!m)throw new Error("No authenticated user found");const y=ln(Wt,"users",m.uid);await Ai(y,{referredBy:e,updatedAt:new Date}),console.log("Referral code saved to Firestore:",e),localStorage.setItem("ajnabicam_referral_applied",e);const E=Date.now()+24*60*60*1e3;localStorage.setItem("ajnabicam_premium_trial","true"),localStorage.setItem("ajnabicam_premium_trial_expiry",E.toString()),s(!0),setTimeout(()=>d("/gender-select"),1500)}catch(m){console.error("Error applying referral code:",m),a("Error applying referral code. Please try again.")}finally{c(!1)}}},p=m=>{const y=`Join me on AjnabiCam! Use my referral code: ${t} to unlock 24h Premium. https://ajnabicam.com`;m==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(y)}`):m==="instagram"?window.open(`https://www.instagram.com/direct/new/?text=${encodeURIComponent(y)}`):m==="sms"&&window.open(`sms:?body=${encodeURIComponent(y)}`)};return o.jsx("main",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-br from-pink-50 via-rose-100 to-fuchsia-100 px-4 py-6",children:o.jsxs("div",{className:"w-full max-w-xs bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-rose-600 mb-2 text-center",children:"Invite Friends & Unlock Premium"}),o.jsxs("div",{className:"mb-4 w-full text-center",children:[o.jsx("div",{className:"text-sm text-rose-500 mb-1",children:"Your Referral Code"}),o.jsx("div",{className:"font-mono text-lg bg-rose-100 rounded-lg px-3 py-2 mb-2 select-all inline-block",children:t}),o.jsxs("div",{className:"flex gap-2 justify-center mb-2",children:[o.jsx(F,{size:"sm",onClick:()=>p("whatsapp"),disabled:l,children:"WhatsApp"}),o.jsx(F,{size:"sm",onClick:()=>p("instagram"),disabled:l,children:"Instagram"}),o.jsx(F,{size:"sm",onClick:()=>p("sms"),disabled:l,children:"Message"})]})]}),o.jsxs("div",{className:"w-full mb-4",children:[o.jsx("label",{className:"block text-xs text-rose-400 mb-1",children:"Add Referral Code (optional)"}),o.jsx("input",{type:"text",className:"w-full border border-rose-200 rounded-lg px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-rose-300 disabled:opacity-50",placeholder:"Paste or enter code",value:e,onChange:m=>n(m.target.value.toUpperCase()),disabled:r||l}),o.jsx(F,{className:"w-full py-2 rounded-lg bg-rose-500 text-white font-bold text-base disabled:opacity-50",onClick:h,disabled:r||!e.trim()||l,children:l?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Applying..."]}):r?"Applied!":"Apply Code"}),i&&o.jsx("div",{className:"text-xs text-red-500 mt-1",children:i})]}),o.jsx(F,{className:"w-full py-2 rounded-lg border border-rose-300 text-rose-600 bg-white font-semibold text-base disabled:opacity-50",variant:"outline",onClick:()=>d("/gender-select"),disabled:l,children:"Continue"})]})})}function P8(){const t=ht(),[e,n]=v.useState(!1),[r,s]=v.useState(!0);v.useEffect(()=>{(async()=>{try{const l=Ri.currentUser;if(!l){t("/onboarding");return}const c=ln(Wt,"users",l.uid),d=await Jh(c);if(d.exists()){const h=d.data();if(h.gender&&h.gender!=="other"){t("/");return}}}catch(l){console.error("Error checking gender status:",l)}finally{s(!1)}})()},[t,Ri]);const i=async a=>{if(!e){n(!0);try{const l=Ri.currentUser;if(!l)throw new Error("No authenticated user found");const c=ln(Wt,"users",l.uid);await Ai(c,{gender:a,updatedAt:new Date}),console.log("Gender updated in Firestore:",a),t("/")}catch(l){console.error("Error updating gender:",l),alert("Error saving gender selection. Please try again.")}finally{n(!1)}}};return r?o.jsx("main",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-br from-pink-50 via-rose-100 to-fuchsia-100 px-4 py-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rose-500 mx-auto mb-4"}),o.jsx("p",{className:"text-rose-600 font-medium",children:"Loading..."})]})}):o.jsx("main",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-br from-pink-50 via-rose-100 to-fuchsia-100 px-4 py-6",children:o.jsxs("div",{className:"w-full max-w-xs bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-rose-600 mb-4 text-center",children:"Select Your Gender"}),o.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[o.jsx(F,{className:"w-full py-3 rounded-xl bg-rose-500 text-white font-bold text-base disabled:opacity-50",onClick:()=>i("female"),disabled:e,children:e?"Saving...":"Female"}),o.jsx(F,{className:"w-full py-3 rounded-xl bg-blue-500 text-white font-bold text-base disabled:opacity-50",onClick:()=>i("male"),disabled:e,children:e?"Saving...":"Male"}),o.jsx(F,{className:"w-full py-3 rounded-xl bg-gray-300 text-gray-700 font-bold text-base disabled:opacity-50",onClick:()=>i("other"),disabled:e,children:e?"Saving...":"Other"})]})]})})}function ii(){const t=ht(),e=ya(),{t:n}=Lc(),r=[{label:n("nav.home"),icon:F9,path:"/"},{label:n("nav.chat"),icon:bg,path:"/chat"},{label:"AI Chat",icon:ad,path:"/ai-chatbot"},{label:n("nav.friends"),icon:Kr,path:"/friends"},{label:n("nav.profile"),icon:Lr,path:"/profile"}];return o.jsx("nav",{style:{background:"linear-gradient(to right, #fef9f0, #fffbf0, #fef7f7)",borderTop:"3px solid #f5b1b1",borderRadius:"24px 24px 0 0",boxShadow:"0 15px 35px -12px rgba(245, 177, 177, 0.3)"},className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-md flex justify-around items-center h-16 sm:h-18 lg:h-20 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-4xl mx-auto",children:r.map(s=>{const i=s.icon,a=e.pathname===s.path;return o.jsxs("button",{className:`relative flex flex-col items-center justify-center flex-1 py-2 sm:py-3 px-2 focus:outline-none transition-all duration-300 transform ${a?"scale-110 sm:scale-115":"hover:scale-105"}`,onClick:()=>t(s.path),children:[a&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-romance-200/40 via-passion-100/30 to-coral-200/40 rounded-2xl blur-sm"}),o.jsx("div",{className:`relative p-2 sm:p-2.5 rounded-xl transition-all duration-300 ${a?"bg-gradient-to-br from-romance-200 via-passion-200 to-coral-200 shadow-lg shadow-romance-200/40":"bg-gradient-to-br from-white/90 to-romance-50/80 hover:from-romance-100/90 hover:to-passion-100/80"}`,children:o.jsx(i,{size:18,style:{color:a?"#ffffff":"#e25d5d",filter:"drop-shadow(0 1px 2px rgba(226, 93, 93, 0.2))"},className:"sm:w-5 sm:h-5 lg:w-6 lg:h-6 transition-colors duration-300"})}),o.jsx("span",{style:{color:a?"#b53535":"#e25d5d",textShadow:"0 1px 2px rgba(226, 93, 93, 0.2)"},className:"text-[10px] sm:text-xs lg:text-sm font-semibold leading-none mt-1 transition-colors duration-300",children:s.label}),a&&o.jsx("div",{className:"absolute -top-1 right-1/2 transform translate-x-1/2 w-2 h-2 bg-gradient-to-r from-romance-400 to-passion-400 rounded-full shadow-sm animate-pulse"})]},s.label)})})}const c_=[{id:1,name:"Romantic Sunset",icon:Ms,gradient:"from-pink-400 via-red-400 to-yellow-400",emotion:"romantic"},{id:2,name:"Love Garden",icon:L9,gradient:"from-rose-300 via-pink-300 to-red-300",emotion:"romantic"},{id:3,name:"Dreamy Hearts",icon:Ms,gradient:"from-purple-300 via-pink-300 to-red-300",emotion:"romantic"},{id:4,name:"Sunshine Vibes",icon:Z9,gradient:"from-yellow-300 via-orange-300 to-red-300",emotion:"happy"},{id:5,name:"Rainbow Dreams",icon:cd,gradient:"from-red-300 via-yellow-300 to-green-300",emotion:"happy"},{id:6,name:"Sparkling Joy",icon:oh,gradient:"from-yellow-200 via-pink-200 to-purple-200",emotion:"happy"},{id:7,name:"Ocean Waves",icon:i8,gradient:"from-blue-300 via-cyan-300 to-teal-300",emotion:"calm"},{id:8,name:"Mountain Mist",icon:B9,gradient:"from-gray-300 via-blue-300 to-indigo-300",emotion:"calm"},{id:9,name:"Peaceful Clouds",icon:vg,gradient:"from-gray-200 via-blue-200 to-indigo-200",emotion:"calm"},{id:10,name:"Electric Storm",icon:NN,gradient:"from-indigo-400 via-purple-400 to-pink-400",emotion:"energetic"},{id:11,name:"Fire Energy",icon:M9,gradient:"from-red-400 via-orange-400 to-yellow-400",emotion:"energetic"},{id:12,name:"Neon Nights",icon:cd,gradient:"from-purple-500 via-pink-500 to-cyan-500",emotion:"energetic"},{id:13,name:"Forest Path",icon:e8,gradient:"from-green-400 via-emerald-400 to-teal-400",emotion:"nature"},{id:14,name:"Butterfly Garden",icon:N9,gradient:"from-orange-300 via-yellow-300 to-green-300",emotion:"nature"},{id:15,name:"Earth Harmony",icon:Dc,gradient:"from-green-400 via-blue-400 to-brown-400",emotion:"nature"},{id:16,name:"Midnight Moon",icon:$9,gradient:"from-indigo-600 via-purple-600 to-black",emotion:"mysterious"},{id:17,name:"Ice Crystal",icon:J9,gradient:"from-blue-400 via-cyan-400 to-white",emotion:"mysterious"},{id:18,name:"Starry Night",icon:cd,gradient:"from-indigo-500 via-purple-500 to-black",emotion:"mysterious"},{id:19,name:"Coffee Warmth",icon:j9,gradient:"from-amber-400 via-orange-400 to-brown-400",emotion:"cozy"},{id:20,name:"Sunset Café",icon:Gy,gradient:"from-orange-300 via-red-300 to-purple-300",emotion:"cozy"},{id:21,name:"Warm Embrace",icon:Ms,gradient:"from-orange-200 via-yellow-200 to-red-200",emotion:"cozy"},{id:22,name:"Music Waves",icon:H9,gradient:"from-purple-400 via-blue-400 to-cyan-400",emotion:"creative"},{id:23,name:"Creative Flow",icon:ca,gradient:"from-pink-400 via-purple-400 to-indigo-400",emotion:"creative"},{id:24,name:"Artistic Soul",icon:oh,gradient:"from-violet-400 via-pink-400 to-orange-400",emotion:"creative"},{id:25,name:"Golden Crown",icon:Xe,gradient:"from-yellow-400 via-orange-400 to-amber-400",emotion:"luxury"},{id:26,name:"Diamond Shine",icon:V9,gradient:"from-gray-300 via-blue-300 to-purple-300",emotion:"luxury"},{id:27,name:"Royal Purple",icon:Xe,gradient:"from-purple-500 via-indigo-500 to-blue-500",emotion:"luxury"},{id:28,name:"Peace Within",icon:X9,gradient:"from-green-300 via-blue-300 to-purple-300",emotion:"spiritual"},{id:29,name:"Wisdom Light",icon:k9,gradient:"from-yellow-300 via-orange-300 to-purple-300",emotion:"spiritual"},{id:30,name:"Free Spirit",icon:S9,gradient:"from-cyan-300 via-blue-300 to-indigo-300",emotion:"spiritual"}];function R8({isOpen:t,onClose:e,onSelectWallpaper:n,currentWallpaper:r}){const[s,i]=v.useState("all");if(!t)return null;const a=[{key:"all",name:"All Themes"},{key:"romantic",name:"Romantic"},{key:"happy",name:"Happy"},{key:"calm",name:"Calm"},{key:"energetic",name:"Energetic"},{key:"nature",name:"Nature"},{key:"mysterious",name:"Mysterious"},{key:"cozy",name:"Cozy"},{key:"creative",name:"Creative"},{key:"luxury",name:"Luxury"},{key:"spiritual",name:"Spiritual"}],l=s==="all"?c_:c_.filter(c=>c.emotion===s);return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white p-6 relative",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Choose Wallpaper"}),o.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(Kt,{size:20})})]}),o.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Set a unique mood for this chat"})]}),o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map(c=>o.jsx("button",{onClick:()=>i(c.key),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${s===c.key?"bg-violet-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:c.name},c.key))})}),o.jsx("div",{className:"max-h-96 overflow-y-auto p-4",children:o.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(c=>{const d=c.icon,h=(r==null?void 0:r.id)===c.id;return o.jsxs("div",{onClick:()=>n(c),className:`cursor-pointer rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all transform hover:scale-105 ${h?"ring-4 ring-violet-500":""}`,children:[o.jsxs("div",{className:`bg-gradient-to-br ${c.gradient} h-20 flex items-center justify-center relative`,children:[o.jsx(d,{size:24,className:"text-white/90 drop-shadow-lg"}),h&&o.jsx("div",{className:"absolute top-2 right-2 w-4 h-4 bg-violet-600 rounded-full flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),o.jsx("div",{className:"p-3 bg-white",children:o.jsx("p",{className:"text-xs font-medium text-gray-800 text-center leading-tight",children:c.name})})]},c.id)})})}),o.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(F,{variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),o.jsx(F,{onClick:e,className:"flex-1 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700",children:"Done"})]})})]})})}const Yy={PROFILE_IMAGES:"profile-images",CHAT_PHOTOS:"chat-photos",TEMP_PHOTOS:"temp-photos"},uf={PROFILE_IMAGE:5*1024*1024,CHAT_PHOTO:10*1024*1024},u_=["image/jpeg","image/jpg","image/png","image/webp","image/gif"];function df(t,e=uf.CHAT_PHOTO){return u_.includes(t.type)?t.size>e?{isValid:!1,error:`File size too large. Maximum size allowed: ${(e/1048576).toFixed(1)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${u_.join(", ")}`}}function Xy(t,e){const n=Date.now(),r=Math.random().toString(36).substring(2,8),s=t.split(".").pop();return`${e?`${e}_`:""}${n}_${r}.${s}`}async function PN(t,e,n){const r=df(t,uf.PROFILE_IMAGE);if(!r.isValid)throw new Error(r.error);const s=Xy(t.name,`profile_${e}`),i=`${Yy.PROFILE_IMAGES}/${e}/${s}`,a=to(yn,i);try{if(n){const l=_k(a,t);return new Promise((c,d)=>{l.on("state_changed",h=>{const p=h.bytesTransferred/h.totalBytes*100;n(p)},h=>d(h),async()=>{try{const h=await Gr(l.snapshot.ref);c({url:h,path:i})}catch(h){d(h)}})})}else{const l=await eo(a,t);return{url:await Gr(l.ref),path:i}}}catch(l){throw console.error("Error uploading profile image:",l),new Error("Failed to upload profile image")}}async function RN(t,e,n,r){const s=df(t,uf.CHAT_PHOTO);if(!s.isValid)throw new Error(s.error);const i=Xy(t.name,`chat_${e}`),a=`${Yy.CHAT_PHOTOS}/${e}/${n}/${i}`,l=to(yn,a);try{if(r){const c=_k(l,t);return new Promise((d,h)=>{c.on("state_changed",p=>{const m=p.bytesTransferred/p.totalBytes*100;r(m)},p=>h(p),async()=>{try{const p=await Gr(c.snapshot.ref);d({url:p,path:a})}catch(p){h(p)}})})}else{const c=await eo(l,t);return{url:await Gr(c.ref),path:a}}}catch(c){throw console.error("Error uploading chat photo:",c),new Error("Failed to upload chat photo")}}async function O8(t,e,n){const r=df(t,uf.CHAT_PHOTO);if(!r.isValid)throw new Error(r.error);const s=Xy(t.name,`temp_${e}`),i=`${Yy.TEMP_PHOTOS}/${e}/${s}`,a=to(yn,i),l=new Date(Date.now()+24*60*60*1e3),c={customMetadata:{expiresAt:l.toISOString(),sessionId:e,autoDelete:"true"}};try{if(!n){const d=await eo(a,t,c);return{url:await Gr(d.ref),path:i,expiresAt:l}}}catch(d){throw console.error("Error uploading temp photo:",d),new Error("Failed to upload temporary photo")}}function D8(t){switch(t==null?void 0:t.code){case"storage/unauthorized":return"You do not have permission to upload files";case"storage/canceled":return"Upload was cancelled";case"storage/quota-exceeded":return"Storage quota exceeded";case"storage/unauthenticated":return"Please log in to upload files";case"storage/retry-limit-exceeded":return"Upload failed after multiple retries. Please try again";case"storage/invalid-format":return"Invalid file format";case"storage/invalid-event-name":return"Invalid upload event";default:return(t==null?void 0:t.message)||"An unknown error occurred during upload"}}function M8({onPhotoSelected:t,onCancel:e,chatId:n="default",userId:r="anonymous"}){const[s,i]=v.useState(null),[a,l]=v.useState(""),[c,d]=v.useState(!1),[h,p]=v.useState(0),[m,y]=v.useState(""),b=v.useRef(null),E=w=>{var V;const N=(V=w.target.files)==null?void 0:V[0];if(y(""),!N)return;const R=df(N);if(!R.isValid){y(R.error||"Invalid file");return}i(N);const M=new FileReader;M.onload=j=>{var x;(x=j.target)!=null&&x.result&&l(j.target.result)},M.readAsDataURL(N)},C=async()=>{if(s){d(!0),y(""),p(0);try{const w=await RN(s,n,r,N=>p(N));t(w.url,w.path),i(null),l(""),p(0)}catch(w){console.error("Error uploading photo:",w);const N=D8(w);y(N)}finally{d(!1)}}},k=()=>{i(null),l(""),y(""),p(0),e()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"romantic-card rounded-3xl shadow-2xl max-w-md w-full overflow-hidden border border-passion-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-passion-600 to-romance-600 text-white p-6 relative",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Share Photo"}),o.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(Kt,{size:20})})]})}),o.jsx("div",{className:"p-6",children:s?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-center",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Preview & Send"})}),o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:a,alt:"Preview",className:"w-full h-64 object-cover rounded-xl shadow-lg"}),o.jsx("button",{onClick:()=>{i(null),l("")},className:"absolute top-2 right-2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:o.jsx(Kt,{size:16})})]}),o.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[o.jsxs("span",{children:["File size: ",(s.size/1024/1024).toFixed(2)," ","MB"]}),o.jsxs("span",{children:["Format: ",s.type.split("/")[1].toUpperCase()]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(F,{variant:"outline",onClick:()=>{i(null),l("")},className:"flex-1",disabled:c,children:"Change Photo"}),o.jsx(F,{onClick:C,disabled:c,className:"flex-1 bg-gradient-to-r from-passion-600 to-romance-600 hover:from-passion-700 hover:to-romance-700",children:c?o.jsxs("div",{className:"flex flex-col items-center gap-1 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}),h>0&&o.jsx("div",{className:"w-full bg-white/20 rounded-full h-1",children:o.jsx("div",{className:"bg-white h-1 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),h>0&&o.jsxs("span",{className:"text-xs text-white/80",children:[Math.round(h),"%"]})]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ky,{size:16}),"Send Photo"]})})]})]})}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📸"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Share a Special Moment"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Choose a photo to share in this conversation"})]}),o.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:E,className:"hidden"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs(F,{onClick:()=>{var w;return(w=b.current)==null?void 0:w.click()},className:"h-20 flex flex-col items-center justify-center gap-2 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:[o.jsx(Gy,{size:24}),o.jsx("span",{className:"text-sm font-medium",children:"Gallery"})]}),o.jsxs(F,{onClick:()=>{var w;(w=b.current)==null||w.click()},className:"h-20 flex flex-col items-center justify-center gap-2 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[o.jsx(ca,{size:24}),o.jsx("span",{className:"text-sm font-medium",children:"Camera"})]})]}),m&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mt-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ua,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-red-800 text-sm mb-1",children:"Upload Error"}),o.jsx("p",{className:"text-red-700 text-xs leading-relaxed",children:m})]})]})}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mt-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ua,{size:20,className:"text-orange-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-orange-800 text-sm mb-1",children:"Privacy Notice"}),o.jsxs("p",{className:"text-orange-700 text-xs leading-relaxed",children:["• Photos are automatically deleted when chat is closed",o.jsx("br",{}),"• Non-premium users cannot screenshot or download",o.jsx("br",{}),"• Only Premium users can save shared photos"]})]})]})})]})})})]})})}function L8({photoUrl:t,fromMe:e,time:n,isViewed:r=!1,onView:s,onDelete:i}){const[a,l]=v.useState(!1),[c,d]=v.useState(r),[h,p]=v.useState(!1),{isPremium:m}=Zs(),y=v.useRef(null),b=w=>{m||(w.preventDefault(),p(!0),setTimeout(()=>p(!1),3e3))};v.useEffect(()=>{const w=N=>{!m&&a&&(N.ctrlKey&&N.shiftKey&&(N.key==="S"||N.key==="s")||N.metaKey&&N.shiftKey&&(N.key==="3"||N.key==="4"||N.key==="5")||N.key==="PrintScreen")&&(N.preventDefault(),p(!0),setTimeout(()=>p(!1),3e3))};if(a)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[m,a]);const E=w=>{m||w.preventDefault()},C=()=>{l(!0),c||(d(!0),s==null||s())},k=()=>{if(!m){p(!0),setTimeout(()=>p(!1),3e3);return}const w=document.createElement("a");w.href=t,w.download=`photo_${Date.now()}.jpg`,document.body.appendChild(w),w.click(),document.body.removeChild(w)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`flex ${e?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`relative max-w-xs rounded-2xl overflow-hidden shadow-lg ${e?"bg-gradient-to-r from-violet-500 to-purple-600":"bg-white border border-gray-200"}`,children:[c?o.jsxs("div",{className:"relative",children:[o.jsx("img",{ref:y,src:t,alt:"Shared photo",className:"w-full h-48 object-cover cursor-pointer",onClick:C,onContextMenu:b,onDragStart:E,style:{userSelect:m?"auto":"none",pointerEvents:"auto"}}),o.jsx("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/20 transition-all flex items-center justify-center opacity-0 hover:opacity-100",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(F,{size:"sm",variant:"secondary",onClick:C,className:"bg-white/90 text-gray-800 hover:bg-white",children:o.jsx(wg,{size:16})}),m&&o.jsx(F,{size:"sm",variant:"secondary",onClick:k,className:"bg-white/90 text-gray-800 hover:bg-white",children:o.jsx(xg,{size:16})})]})}),m&&o.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white p-1 rounded-full",children:o.jsx(Xe,{size:12})}),!m&&o.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white p-1 rounded-full",children:o.jsx(ld,{size:12})})]}):o.jsxs("div",{className:"w-full h-48 bg-gray-100 flex flex-col items-center justify-center cursor-pointer border-2 border-dashed border-gray-300 hover:border-violet-400 transition-colors",onClick:C,children:[o.jsx(wg,{size:32,className:"text-gray-400 mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Tap to view photo"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"🔥 Photo will be deleted after closing chat"})]}),o.jsxs("div",{className:`p-3 ${e?"text-purple-100":"text-gray-600"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs",children:c?"📷 Photo":"📷 Photo (unviewed)"}),o.jsx("span",{className:"text-xs",children:n})]}),!m&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx(ld,{size:10}),o.jsx("span",{className:"text-xs opacity-75",children:"Protected content"})]})]})]})}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative max-w-full max-h-full",children:[o.jsx("img",{src:t,alt:"Shared photo",className:"max-w-full max-h-full object-contain",onContextMenu:b,onDragStart:E,style:{userSelect:m?"auto":"none"}}),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[m&&o.jsx(F,{size:"sm",onClick:k,className:"bg-white/90 text-gray-800 hover:bg-white",children:o.jsx(xg,{size:16})}),o.jsx(F,{size:"sm",onClick:()=>l(!1),className:"bg-white/90 text-gray-800 hover:bg-white",children:o.jsx(Kt,{size:16})})]}),m&&o.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-500 text-white px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Xe,{size:14}),o.jsx("span",{className:"text-sm font-medium",children:"Premium"})]}),!m&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsxs("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ld,{size:14}),o.jsx("span",{className:"text-sm font-medium",children:"Protected"})]})})]})}),h&&o.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[o.jsx(t8,{size:16}),o.jsx("span",{className:"text-sm font-medium",children:m?"Content protected":"Upgrade to Premium to save photos"})]})]})}function V8(){const t=Date.now(),e=Math.random().toString(36).substring(2,8);return`user_${t}_${e}`}function ON(){let t=localStorage.getItem("ajnabicam_user_id");return t||(t=V8(),localStorage.setItem("ajnabicam_user_id",t)),t}const d_=[{id:1,name:"Aman Kumar",lastMessage:"What's up? How are you doing today?",time:"10:24 AM",unreadCount:3,avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",isFriend:!1,lastSeen:new Date(Date.now()-2*60*1e3),isTyping:!1},{id:2,name:"Priya Sharma",lastMessage:"Haha 😂 That was so funny!",time:"Yesterday",unreadCount:0,avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",isFriend:!1,lastSeen:new Date(Date.now()-24*60*60*1e3),isTyping:!1},{id:3,name:"Stranger #314",lastMessage:"Let's connect again soon 💕",time:"Monday",unreadCount:1,avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",isFriend:!1,lastSeen:new Date(Date.now()-3*24*60*60*1e3),isTyping:!1},{id:4,name:"Rahul Singh",lastMessage:"Nice talking to you!",time:"Tuesday",unreadCount:2,avatar:"https://images.pexels.com/photos/91227/pexels-photo-91227.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",isFriend:!1,lastSeen:new Date(Date.now()-7*24*60*60*1e3),isTyping:!0}],F8=()=>{const[t,e]=v.useState(null),[n,r]=v.useState(d_),{friends:s}=My();return v.useEffect(()=>{const i=s.map(a=>({id:parseInt(a.id)||Math.random(),name:a.name,lastMessage:a.isOnline?"Online now":"Tap to start chatting",time:a.isOnline?"Online":"Offline",unreadCount:0,avatar:a.avatar,isFriend:!0,lastSeen:a.lastSeen||new Date,isTyping:!1}));r([...i,...d_])},[s]),t?o.jsx(U8,{chat:t,onBack:()=>e(null),setChats:r}):o.jsx(z8,{onChatClick:e,chats:n,setChats:r})},U8=({chat:t,onBack:e,setChats:n})=>{const[r,s]=v.useState([{fromMe:!1,text:t.lastMessage,time:t.time}]),[i,a]=v.useState(""),[l,c]=v.useState(!1),[d,h]=v.useState(!1),[p,m]=v.useState(!1),[y,b]=v.useState(t.wallpaper);v.useEffect(()=>{s([{fromMe:!1,text:t.lastMessage,time:t.time}]),n(R=>R.map(M=>M.id===t.id?{...M,unreadCount:0}:M))},[t,n]);const E=()=>{if(i.trim()){const R={fromMe:!0,text:i,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};s(V=>[...V,R]),a("");const M={...t,lastMessage:i,time:R.time,unreadCount:0};n(V=>V.map(j=>j.id===t.id?M:j))}},C=R=>{const M={fromMe:!0,photoUrl:R,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isViewed:!1};s(j=>[...j,M]),m(!1);const V={...t,lastMessage:"📷 Photo",time:M.time,unreadCount:0};n(j=>j.map(x=>x.id===t.id?V:x))},k=R=>{b(R);const M={...t,wallpaper:R};n(V=>V.map(j=>j.id===t.id?M:j)),h(!1)},w=R=>{R.key==="Enter"&&E()},N=()=>y?`bg-gradient-to-br ${y.gradient}`:"bg-gradient-to-br from-slate-50 via-white to-rose-50";return o.jsxs("div",{className:`max-w-md mx-auto h-screen shadow-xl overflow-hidden flex flex-col relative pb-20 ${N()}`,children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-passion-600 via-romance-600 to-royal-600 flex items-center shadow-lg relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-white/20 via-transparent to-transparent"}),o.jsx("button",{onClick:e,className:"mr-3 text-white hover:scale-110 transition-all duration-200 p-2 rounded-full hover:bg-white/20","aria-label":"Go back",children:o.jsx(vr,{size:24})}),o.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"w-12 h-12 rounded-full object-cover mr-3 border-3 border-white/50 shadow-lg backdrop-blur-sm"}),o.jsxs("div",{className:"flex-1 relative z-10",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-white text-lg",children:t.name}),t.isFriend&&o.jsx("span",{className:"bg-emerald-400/20 backdrop-blur-sm text-emerald-100 text-xs px-2 py-1 rounded-full font-semibold border border-emerald-300/30",children:"Friend"})]}),o.jsx("span",{className:"text-indigo-100 text-xs",children:t.isFriend&&t.time==="Online"?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Online"]}):"Last seen recently"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>c(!l),className:"text-white hover:scale-110 transition-all duration-200 p-2 rounded-full hover:bg-white/20",children:o.jsx(R9,{size:20})}),l&&o.jsxs("div",{className:"absolute right-0 top-12 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden z-20 min-w-48",children:[o.jsxs("button",{onClick:()=>{h(!0),c(!1)},className:"flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gray-50 w-full text-left transition-colors",children:[o.jsx(q9,{size:18,className:"text-violet-600"}),o.jsx("span",{className:"font-medium",children:"Set Wallpaper"})]}),o.jsx("div",{className:"border-t border-gray-100"}),o.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gray-50 w-full text-left transition-colors",children:[o.jsx(Kt,{size:18,className:"text-gray-400"}),o.jsx("span",{className:"font-medium",children:"Close"})]})]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.map((R,M)=>R.photoUrl?o.jsx(L8,{photoUrl:R.photoUrl,fromMe:R.fromMe,time:R.time,isViewed:R.isViewed,onView:()=>{s(V=>V.map((j,x)=>x===M?{...j,isViewed:!0}:j))}},M):o.jsx("div",{className:`flex ${R.fromMe?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`px-4 py-3 rounded-2xl max-w-xs shadow-sm transition-all duration-200 hover:shadow-md ${R.fromMe?"bg-gradient-to-r from-passion-500 to-romance-600 text-white":"bg-white/90 backdrop-blur-sm text-gray-800 border border-gray-100"}`,children:[o.jsx("div",{className:"leading-relaxed",children:R.text}),o.jsx("div",{className:`text-xs text-right mt-1 ${R.fromMe?"text-purple-100":"text-gray-400"}`,children:R.time})]})},M))}),o.jsxs("div",{className:"p-4 bg-white/90 backdrop-blur-sm flex items-center border-t border-gray-100 shadow-lg",children:[o.jsx("button",{onClick:()=>m(!0),className:"mr-3 p-3 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors",children:o.jsx(ca,{size:18,className:"text-gray-600"})}),o.jsx("input",{className:"flex-1 px-4 py-3 rounded-2xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent bg-gray-50/50 backdrop-blur-sm transition-all duration-200",placeholder:"Type a message...",value:i,onChange:R=>a(R.target.value),onKeyPress:w}),o.jsx(F,{className:"ml-3 px-6 py-3 bg-gradient-to-r from-passion-600 to-romance-600 hover:from-passion-700 hover:to-romance-700 text-white rounded-2xl font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",onClick:E,disabled:!i.trim(),children:o.jsx(_N,{size:16})})]}),d&&o.jsx(R8,{isOpen:d,onClose:()=>h(!1),onSelectWallpaper:k,currentWallpaper:y}),p&&o.jsx(M8,{onPhotoSelected:C,onCancel:()=>m(!1),chatId:t.id.toString(),userId:ON()}),o.jsx(ii,{})]})},z8=({onChatClick:t,chats:e,setChats:n})=>{const[r,s]=v.useState(""),[i,a]=v.useState(null),l=ht(),{isPremium:c}=Zs(),d=C=>{a(C)},h=C=>{a(null),n(k=>k.filter(w=>w.id!==C))},p=e.filter(C=>C.name.toLowerCase().includes(r.toLowerCase())||C.lastMessage.toLowerCase().includes(r.toLowerCase())),m=e.reduce((C,k)=>C+k.unreadCount,0),y=p.filter(C=>C.isFriend),b=p.filter(C=>!C.isFriend),E=C=>{const w=new Date().getTime()-C.getTime(),N=Math.floor(w/(1e3*60)),R=Math.floor(w/(1e3*60*60)),M=Math.floor(w/(1e3*60*60*24));return N<1?"Just now":N<60?`${N}m ago`:R<24?`${R}h ago`:`${M}d ago`};return o.jsxs("div",{className:"max-w-md mx-auto h-screen bg-gradient-to-br from-passion-50 via-romance-25 to-bollywood-50 shadow-xl overflow-hidden flex flex-col relative pb-20",children:[o.jsxs("div",{className:"px-6 py-6 bg-gradient-to-br from-passion-600 via-romance-600 to-royal-600 text-white shadow-xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-pink-300/20 via-transparent to-transparent"}),o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-cyan-300/10 to-blue-400/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-rose-300/10 to-pink-400/10 rounded-full blur-2xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>l("/"),className:"mr-4 hover:scale-110 transition-all duration-200 p-2 rounded-xl hover:bg-white/10 backdrop-blur-sm","aria-label":"Go to home",children:o.jsx(vr,{size:24})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(bg,{className:"h-8 w-8 text-white/90"}),o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Chats"})]})]}),m>0&&o.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-pink-600 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg border border-white/20",children:o.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),m," new"]})})]}),o.jsxs("div",{className:"relative group",children:[o.jsx(K9,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/60 h-5 w-5 group-focus-within:text-white/80 transition-colors duration-200"}),o.jsx(Mc,{type:"text",value:r,onChange:C=>s(C.target.value),placeholder:"Search conversations...",className:"w-full pl-12 pr-12 py-4 rounded-2xl border-0 bg-white/10 backdrop-blur-md text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30 focus:bg-white/20 transition-all duration-300 text-base font-medium shadow-inner"}),r&&o.jsx("button",{onClick:()=>s(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-white/10",children:o.jsx(Kt,{size:16})})]}),o.jsxs("div",{className:"flex justify-between items-center mt-4 text-white/80 text-sm",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Kr,{className:"h-4 w-4"}),e.length," conversation",e.length!==1?"s":""]}),y.length>0&&o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Ms,{className:"h-4 w-4 text-emerald-300"}),y.length," friend",y.length!==1?"s":""]})]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[y.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50/80 to-green-50/80 border-b border-emerald-100/50 backdrop-blur-sm",children:o.jsxs("h3",{className:"text-sm font-bold text-emerald-700 flex items-center gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),o.jsx(Ms,{className:"h-4 w-4"}),"Friends (",y.length,")"]})}),o.jsx("div",{className:"space-y-1",children:y.map(C=>o.jsx(h_,{chat:C,onChatClick:t,onLongPress:d,onDelete:h,longPressedChatId:i,setLongPressedChatId:a,isPremium:c,formatLastSeen:E},`friend-${C.id}`))})]}),b.length>0&&o.jsxs(o.Fragment,{children:[y.length>0&&o.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50/80 to-slate-50/80 border-b border-gray-100/50 backdrop-blur-sm",children:o.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center gap-3",children:[o.jsx(bg,{className:"h-4 w-4"}),"Recent Chats (",b.length,")"]})}),o.jsx("div",{className:"space-y-1",children:b.map(C=>o.jsx(h_,{chat:C,onChatClick:t,onLongPress:d,onDelete:h,longPressedChatId:i,setLongPressedChatId:a,isPremium:c,formatLastSeen:E},`regular-${C.id}`))})]}),p.length===0&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center px-8 py-16",children:[o.jsxs("div",{className:"relative mb-8",children:[o.jsx("div",{className:"text-8xl mb-4 transform hover:scale-110 transition-transform duration-300",children:r?"🔍":"💬"}),!r&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-violet-500 to-purple-600 rounded-full animate-ping opacity-75"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-purple-50/90 backdrop-blur-sm rounded-3xl p-8 border border-purple-100/50 shadow-xl max-w-sm",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:r?"No chats found":"Start Your Journey"}),o.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:r?`No results for "${r}". Try searching with different keywords.`:"Ready to meet amazing people? Your first conversation is just a tap away!"}),!r&&o.jsxs(F,{onClick:()=>l("/video-chat"),className:"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700 text-white font-bold px-8 py-3 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-300 hover:shadow-xl",children:[o.jsx(cd,{className:"h-4 w-4 mr-2"}),"Start Chatting"]})]})]})]}),o.jsx(ii,{})]})},h_=({chat:t,onChatClick:e,onLongPress:n,onDelete:r,longPressedChatId:s,setLongPressedChatId:i,isPremium:a,formatLastSeen:l})=>o.jsxs("div",{className:`flex items-center p-5 cursor-pointer relative transition-all duration-300 hover:bg-gradient-to-r hover:from-violet-50/60 hover:to-purple-50/60 hover:shadow-md transform hover:scale-[1.01] active:scale-[0.99] ${t.isFriend?"bg-gradient-to-r from-emerald-50/40 to-green-50/40":"bg-white/60 backdrop-blur-sm"} ${t.unreadCount>0?"bg-gradient-to-r from-violet-50/80 to-purple-50/80 border-l-4 border-violet-400 shadow-sm":"border-b border-gray-100/30"}`,onClick:()=>{s!==t.id&&e(t)},onContextMenu:c=>{c.preventDefault(),n(t.id)},children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:`w-16 h-16 rounded-full object-cover shadow-md transition-all duration-300 border-3 ${t.unreadCount>0?"border-violet-300/50":"border-white/70"}`}),t.unreadCount>0&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-violet-500 to-purple-600 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg animate-pulse border-2 border-white",children:t.unreadCount>9?"9+":t.unreadCount}),t.isFriend&&t.time==="Online"&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 border-2 border-white rounded-full shadow-sm animate-pulse"}),t.isTyping&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-sm",children:o.jsx("div",{className:"w-full h-full rounded-full bg-blue-400 animate-ping"})})]}),o.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[o.jsx("h2",{className:`truncate transition-colors duration-200 ${t.unreadCount>0?"font-bold text-violet-700":"font-semibold text-gray-800"}`,children:t.name}),t.isFriend&&o.jsx("span",{className:"bg-gradient-to-r from-emerald-100/80 to-green-100/80 text-emerald-700 text-xs px-2 py-1 rounded-full font-semibold border border-emerald-200/50 backdrop-blur-sm flex-shrink-0",children:"Friend"})]}),o.jsx("span",{className:`text-xs font-medium ml-3 flex-shrink-0 ${t.unreadCount>0?"text-violet-600 font-bold":"text-gray-500"}`,children:t.time})]}),o.jsx("div",{className:"flex items-center gap-2",children:t.isTyping?o.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce"}),o.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),o.jsx("span",{className:"text-sm font-medium",children:"typing..."})]}):o.jsx("p",{className:`text-sm truncate transition-colors duration-200 ${t.unreadCount>0?"text-gray-800 font-medium":"text-gray-600"}`,children:t.lastMessage})}),a&&t.lastSeen&&t.time!=="Online"&&!t.isTyping&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx(Wy,{className:"h-3 w-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:l(t.lastSeen)})]})]}),s===t.id&&o.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 flex gap-2 bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200/50 p-2",children:[o.jsx(F,{size:"sm",variant:"destructive",onClick:c=>{c.stopPropagation(),r(t.id)},className:"text-xs font-semibold",children:"Delete"}),o.jsx(F,{size:"sm",variant:"outline",onClick:c=>{c.stopPropagation(),i(null)},className:"text-xs font-semibold",children:"Cancel"})]})]});var $8=function(t,e,n,r,s,i,a,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,r,s,i,a,l],h=0;c=new Error(e.replace(/%s/g,function(){return d[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},B8=$8;const f_=hc(B8);var H8=function(e,n,r,s){var i=r?r.call(s,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),d=0;d<a.length;d++){var h=a[d];if(!c(h))return!1;var p=e[h],m=n[h];if(i=r?r.call(s,p,m,h):void 0,i===!1||i===void 0&&p!==m)return!1}return!0};const q8=hc(H8);var DN=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(DN||{}),Cp={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},p_=Object.values(DN),Jy={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},W8=Object.entries(Jy).reduce((t,[e,n])=>(t[n]=e,t),{}),Gn="data-rh",Go={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ko=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},G8=t=>{let e=Ko(t,"title");const n=Ko(t,Go.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Ko(t,Go.DEFAULT_TITLE);return e||r||void 0},K8=t=>Ko(t,Go.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ip=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),Q8=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let i=0;i<s.length;i+=1){const l=s[i].toLowerCase();if(t.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),Y8=t=>console&&typeof console.warn=="function"&&console.warn(t),nl=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&Y8(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const a={};i.filter(c=>{let d;const h=Object.keys(c);for(let m=0;m<h.length;m+=1){const y=h[m],b=y.toLowerCase();e.indexOf(b)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(b==="rel"&&c[b].toLowerCase()==="stylesheet")&&(d=b),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(d=y)}if(!d||!c[d])return!1;const p=c[d].toLowerCase();return r[d]||(r[d]={}),a[d]||(a[d]={}),r[d][p]?!1:(a[d][p]=!0,!0)}).reverse().forEach(c=>s.push(c));const l=Object.keys(a);for(let c=0;c<l.length;c+=1){const d=l[c],h={...r[d],...a[d]};r[d]=h}return s},[]).reverse()},X8=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},J8=t=>({baseTag:Q8(["href"],t),bodyAttributes:Ip("bodyAttributes",t),defer:Ko(t,Go.DEFER),encode:Ko(t,Go.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ip("htmlAttributes",t),linkTags:nl("link",["rel","href"],t),metaTags:nl("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:nl("noscript",["innerHTML"],t),onChangeClientState:K8(t),scriptTags:nl("script",["src","innerHTML"],t),styleTags:nl("style",["cssText"],t),title:G8(t),titleAttributes:Ip("titleAttributes",t),prioritizeSeoTags:X8(t,Go.PRIORITIZE_SEO_TAGS)}),MN=t=>Array.isArray(t)?t.join(""):t,Z8=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},jp=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(Z8(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},m_=(t,e)=>({...t,[e]:void 0}),e7=["noscript","script","style"],Sg=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),LN=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),t7=(t,e,n,r)=>{const s=LN(n),i=MN(e);return s?`<${t} ${Gn}="true" ${s}>${Sg(i,r)}</${t}>`:`<${t} ${Gn}="true">${Sg(i,r)}</${t}>`},n7=(t,e,n=!0)=>e.reduce((r,s)=>{const i=s,a=Object.keys(i).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,h)=>{const p=typeof i[h]>"u"?h:`${h}="${Sg(i[h],n)}"`;return d?`${d} ${p}`:p},""),l=i.innerHTML||i.cssText||"",c=e7.indexOf(t)===-1;return`${r}<${t} ${Gn}="true" ${a}${c?"/>":`>${l}</${t}>`}`},""),VN=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Jy[r];return n[s||r]=t[r],n},e),r7=(t,e,n)=>{const r={key:e,[Gn]:!0},s=VN(n,r);return[jr.createElement("title",s,e)]},ud=(t,e)=>e.map((n,r)=>{const s={key:r,[Gn]:!0};return Object.keys(n).forEach(i=>{const l=Jy[i]||i;if(l==="innerHTML"||l==="cssText"){const c=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[l]=n[i]}),jr.createElement(t,s)}),Cn=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>r7(t,e.title,e.titleAttributes),toString:()=>t7(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>VN(e),toString:()=>LN(e)};default:return{toComponent:()=>ud(t,e),toString:()=>n7(t,e,n)}}},s7=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=jp(t,Cp.meta),i=jp(e,Cp.link),a=jp(n,Cp.script);return{priorityMethods:{toComponent:()=>[...ud("meta",s.priority),...ud("link",i.priority),...ud("script",a.priority)],toString:()=>`${Cn("meta",s.priority,r)} ${Cn("link",i.priority,r)} ${Cn("script",a.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}},i7=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:l="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:h,metaTags:p,scriptTags:m}=t,y={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:y,linkTags:h,metaTags:p,scriptTags:m}=s7(t)),{priority:y,base:Cn("base",e,r),bodyAttributes:Cn("bodyAttributes",n,r),htmlAttributes:Cn("htmlAttributes",s,r),link:Cn("link",h,r),meta:Cn("meta",p,r),noscript:Cn("noscript",i,r),script:Cn("script",m,r),style:Cn("style",a,r),title:Cn("title",{title:l,titleAttributes:c},r)}},kg=i7,Au=[],FN=!!(typeof window<"u"&&window.document&&window.document.createElement),Ng=class{constructor(t,e){Re(this,"instances",[]);Re(this,"canUseDOM",FN);Re(this,"context");Re(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Au:this.instances,add:t=>{(this.canUseDOM?Au:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Au:this.instances).indexOf(t);(this.canUseDOM?Au:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=kg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},o7={},UN=jr.createContext(o7),Ni,zN=(Ni=class extends v.Component{constructor(n){super(n);Re(this,"helmetData");this.helmetData=new Ng(this.props.context||{},Ni.canUseDOM)}render(){return jr.createElement(UN.Provider,{value:this.helmetData.value},this.props.children)}},Re(Ni,"canUseDOM",FN),Ni),mo=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Gn}]`),s=[].slice.call(r),i=[];let a;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const h=d,p=typeof l[h]>"u"?"":l[h];c.setAttribute(d,p)}c.setAttribute(Gn,"true"),s.some((d,h)=>(a=h,c.isEqualNode(d)))?s.splice(a,1):i.push(c)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),i.forEach(l=>n.appendChild(l)),{oldTags:s,newTags:i}},Cg=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Gn),s=r?r.split(","):[],i=[...s],a=Object.keys(e);for(const l of a){const c=e[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),s.indexOf(l)===-1&&s.push(l);const d=i.indexOf(l);d!==-1&&i.splice(d,1)}for(let l=i.length-1;l>=0;l-=1)n.removeAttribute(i[l]);s.length===i.length?n.removeAttribute(Gn):n.getAttribute(Gn)!==a.join(",")&&n.setAttribute(Gn,a.join(","))},a7=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=MN(t)),Cg("title",e)},g_=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:h,title:p,titleAttributes:m}=t;Cg("body",r),Cg("html",s),a7(p,m);const y={baseTag:mo("base",n),linkTags:mo("link",i),metaTags:mo("meta",a),noscriptTags:mo("noscript",l),scriptTags:mo("script",d),styleTags:mo("style",h)},b={},E={};Object.keys(y).forEach(C=>{const{newTags:k,oldTags:w}=y[C];k.length&&(b[C]=k),w.length&&(E[C]=y[C].oldTags)}),e&&e(),c(t,b,E)},rl=null,l7=t=>{rl&&cancelAnimationFrame(rl),t.defer?rl=requestAnimationFrame(()=>{g_(t,()=>{rl=null})}):(g_(t),rl=null)},c7=l7,y_=class extends v.Component{constructor(){super(...arguments);Re(this,"rendered",!1)}shouldComponentUpdate(e){return!q8(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=J8(e.get().map(i=>{const a={...i.props};return delete a.context,a}));zN.canUseDOM?c7(s):kg&&(r=kg(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Rp,hf=(Rp=class extends v.Component{shouldComponentUpdate(t){return!IF(m_(this.props,"helmetData"),m_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return f_(p_.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${p_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),f_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return jr.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...i}=r.props,a=Object.keys(i).reduce((c,d)=>(c[W8[d]||d]=i[d],c),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,s),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,a,s);break;default:e=this.mapObjectTypeChildren(r,e,a,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Ng)){const s=r;r=new Ng(s.context,!0),delete n.helmetData}return r?jr.createElement(y_,{...n,context:r.value}):jr.createElement(UN.Consumer,null,s=>jr.createElement(y_,{...n,context:s}))}},Re(Rp,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Rp);function u7(){const t=ht(),e=()=>{t(-1)},n=()=>{t("/video-chat",{state:{voiceOnly:!0}})};return o.jsxs(o.Fragment,{children:[o.jsx(hf,{children:o.jsx("title",{children:"AjnabiCam - Voice Chat"})}),o.jsxs("main",{className:"flex flex-col items-center min-h-screen w-full max-w-md mx-auto bg-white px-2 py-4 relative pb-20",children:[o.jsxs("div",{className:"w-full flex items-center p-4 bg-gradient-to-r from-rose-500 to-pink-600 text-white font-bold text-xl rounded-t-2xl shadow-lg",children:[o.jsx("button",{onClick:e,className:"mr-3 text-white font-bold text-xl hover:scale-110 transition-transform",children:o.jsx(vr,{size:24})}),o.jsx("h1",{className:"flex-grow text-center",children:"Voice Chat"}),o.jsx(sh,{className:"h-6 w-6"})]}),o.jsx("div",{className:"w-full flex flex-col bg-white rounded-b-2xl border border-rose-100 shadow-xl mb-6 overflow-hidden",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎙️"}),o.jsx("h2",{className:"text-2xl font-bold text-rose-600 mb-2",children:"Voice-Only Mode"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Connect with people through voice conversations only. Perfect for those who prefer audio-only interactions."}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-4 mb-6 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(Xe,{className:"h-5 w-5 text-purple-600"}),o.jsx("span",{className:"font-semibold text-purple-700",children:"Premium Feature"})]}),o.jsx("p",{className:"text-sm text-purple-600",children:"Voice-only mode is available for Premium users. Upgrade to unlock this feature!"})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center bg-rose-50 p-3 rounded-lg border border-rose-200",children:[o.jsx("span",{className:"text-2xl mr-3",children:"🔊"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold text-rose-700",children:"High Quality Audio"}),o.jsx("div",{className:"text-xs text-rose-500",children:"Crystal clear voice conversations"})]})]}),o.jsxs("div",{className:"flex items-center bg-rose-50 p-3 rounded-lg border border-rose-200",children:[o.jsx("span",{className:"text-2xl mr-3",children:"🎧"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold text-rose-700",children:"Privacy Focused"}),o.jsx("div",{className:"text-xs text-rose-500",children:"No video, just voice connections"})]})]}),o.jsxs("div",{className:"flex items-center bg-rose-50 p-3 rounded-lg border border-rose-200",children:[o.jsx("span",{className:"text-2xl mr-3",children:"⚡"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold text-rose-700",children:"Low Bandwidth"}),o.jsx("div",{className:"text-xs text-rose-500",children:"Works great on slower connections"})]})]})]}),o.jsxs(F,{onClick:n,className:"w-full py-4 text-lg font-bold rounded-2xl bg-gradient-to-r from-rose-500 to-pink-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[o.jsx(sh,{className:"h-5 w-5 mr-2"}),"Start Voice Chat"]}),o.jsx("p",{className:"text-xs text-rose-400 mt-4",children:"Note: Voice-only mode requires Premium subscription"})]})}),o.jsx(ii,{})]})]})}function d7({isOpen:t,title:e,message:n,type:r="info",icon:s,actions:i=[],onClose:a,autoClose:l=!1,autoCloseDelay:c=5e3}){const[d,h]=v.useState(!1);v.useEffect(()=>{if(t&&(h(!0),l)){const E=setTimeout(()=>{p()},c);return()=>clearTimeout(E)}},[t,l,c]);const p=()=>{h(!1),setTimeout(a,300)},m=()=>{switch(r){case"success":return{container:"from-emerald-50 to-green-100 border-green-200",titleColor:"text-green-800",messageColor:"text-green-700",icon:o.jsx(qy,{className:"h-6 w-6 text-green-600"}),iconBg:"bg-green-100"};case"warning":return{container:"from-amber-50 to-yellow-100 border-yellow-200",titleColor:"text-amber-800",messageColor:"text-amber-700",icon:o.jsx(ua,{className:"h-6 w-6 text-amber-600"}),iconBg:"bg-amber-100"};case"error":return{container:"from-red-50 to-rose-100 border-red-200",titleColor:"text-red-800",messageColor:"text-red-700",icon:o.jsx(ua,{className:"h-6 w-6 text-red-600"}),iconBg:"bg-red-100"};case"bonus":return{container:"from-marigold-50 to-bollywood-100 border-marigold-200",titleColor:"text-marigold-800",messageColor:"text-bollywood-700",icon:o.jsx(Oc,{className:"h-6 w-6 text-marigold-600"}),iconBg:"bg-marigold-100"};case"premium":return{container:"from-purple-50 to-royal-100 border-purple-200",titleColor:"text-purple-800",messageColor:"text-royal-700",icon:o.jsx(Xe,{className:"h-6 w-6 text-purple-600"}),iconBg:"bg-purple-100"};default:return{container:"from-passion-50 to-romance-100 border-passion-200",titleColor:"text-passion-800",messageColor:"text-romance-700",icon:o.jsx(NN,{className:"h-6 w-6 text-passion-600"}),iconBg:"bg-passion-100"}}},y=(E="primary")=>{switch(E){case"secondary":return"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300";case"danger":return"bg-red-500 hover:bg-red-600 text-white";default:return r==="bonus"?"bg-gradient-to-r from-marigold-500 to-bollywood-600 hover:from-marigold-600 hover:to-bollywood-700 text-white":"bg-gradient-to-r from-passion-500 to-romance-600 hover:from-passion-600 hover:to-romance-700 text-white"}},b=m();return t?o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[o.jsx("div",{className:`absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${d?"opacity-100":"opacity-0"}`,onClick:p}),o.jsxs("div",{className:`relative max-w-sm w-full bg-gradient-to-br ${b.container} rounded-2xl border-2 shadow-2xl transform transition-all duration-300 ${d?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,children:[o.jsx("button",{onClick:p,className:"absolute top-3 right-3 p-1 rounded-full bg-white/80 hover:bg-white transition-all duration-200 hover:scale-110",children:o.jsx(Kt,{className:"h-4 w-4 text-gray-600"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:`p-3 rounded-full ${b.iconBg} shadow-lg`,children:s||b.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:`font-bold text-lg ${b.titleColor} mb-1`,children:e}),o.jsx("p",{className:`text-sm ${b.messageColor} leading-relaxed`,children:n})]})]}),i.length>0&&o.jsx("div",{className:"flex gap-3 mt-6",children:i.map((E,C)=>o.jsx("button",{onClick:()=>{E.onClick(),p()},className:`flex-1 px-4 py-3 rounded-xl font-semibold text-sm transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl ${y(E.variant)}`,children:E.label},C))})]}),r==="bonus"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute -top-2 -left-2 w-8 h-8 bg-marigold-400 rounded-full opacity-70 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-bollywood-400 rounded-full opacity-70 animate-pulse delay-300"}),o.jsx("div",{className:"absolute top-1/2 -left-1 w-4 h-4 bg-coral-400 rounded-full opacity-50 animate-bounce delay-500"})]}),r==="premium"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute top-4 right-8 text-yellow-400 animate-pulse",children:"✨"}),o.jsx("div",{className:"absolute bottom-4 left-8 text-purple-400 animate-bounce delay-200",children:"✨"})]})]})]}):null}function h7(){const[t,e]=v.useState({isOpen:!1,title:"",message:""}),n=a=>{e({...a,isOpen:!0})},r=()=>{e(a=>({...a,isOpen:!1}))};return{showNotification:n,hideNotification:r,showBonusNotification:(a,l,c)=>{n({title:a,message:l,type:"bonus",actions:[{label:"Claim Now",onClick:c,variant:"primary"},{label:"Later",onClick:()=>{},variant:"secondary"}]})},NotificationComponent:()=>o.jsx(d7,{isOpen:t.isOpen,title:t.title,message:t.message,type:t.type,icon:t.icon,actions:t.actions,onClose:r,autoClose:t.autoClose})}}const f7=({canClaimDailyBonus:t,currentUser:e,hasCompletedOnboarding:n,showBonusNotification:r,claimDailyBonus:s})=>{const i=v.useRef(!1),a=v.useRef(""),l=v.useRef({showBonusNotification:r,claimDailyBonus:s});v.useEffect(()=>{l.current={showBonusNotification:r,claimDailyBonus:s}},[r,s]),v.useEffect(()=>{const c=new Date().toDateString();if(a.current!==c&&(i.current=!1,a.current=c),!t||!e||!n||i.current)return;const d=`daily_bonus_shown_${c}`;if(!sessionStorage.getItem(d)){i.current=!0,sessionStorage.setItem(d,"true");const p=setTimeout(()=>{l.current.showBonusNotification("🎁 Daily Bonus Available!","Claim your 5 coins now and keep your streak going!",l.current.claimDailyBonus)},2e3);return()=>clearTimeout(p)}},[t,e,n])};function p7({isPremium:t,onGenderSelect:e,onUpgrade:n}){const[r,s]=v.useState("any"),i=[{id:"any",label:"Anyone",icon:Kr,description:"Connect with all genders",emoji:"👥",color:"from-blue-500 to-purple-600",bgColor:"bg-blue-50 hover:bg-blue-100"},{id:"male",label:"Male",icon:Lr,description:"Connect with males only",emoji:"👨",color:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50 hover:bg-cyan-100"},{id:"female",label:"Female",icon:Lr,description:"Connect with females only",emoji:"👩",color:"from-pink-500 to-rose-600",bgColor:"bg-pink-50 hover:bg-pink-100"}],a=l=>{if(!t&&l!=="any"){n();return}s(l),e(l)};return o.jsxs(be,{className:"w-full bg-white/95 backdrop-blur-sm shadow-xl border-rose-200 overflow-hidden",children:[o.jsx(mt,{className:"pb-3 bg-gradient-to-r from-rose-50 to-pink-50 rounded-t-lg px-4 py-4",children:o.jsxs(vn,{className:"text-lg flex items-center gap-2 text-rose-700",children:[o.jsx("div",{className:"p-2 bg-rose-100 rounded-full",children:o.jsx(Kr,{className:"h-5 w-5 text-rose-600"})}),"Gender Preference 💗"]})}),o.jsxs(Vt,{className:"p-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:i.map((l,c)=>{const d=!t&&l.id!=="any",h=r===l.id;return o.jsxs("div",{className:`relative group transform transition-all duration-500 hover:scale-102 ${h?"scale-105 z-10":""} animate-slide-in`,style:{animationDelay:`${c*150}ms`},children:[h&&o.jsx("div",{className:"absolute -inset-3 bg-gradient-to-r from-rose-400/30 via-pink-400/30 to-purple-400/30 rounded-3xl blur-xl animate-pulse"}),o.jsxs(F,{variant:"ghost",className:`w-full h-auto p-6 rounded-3xl transition-all duration-500 border-3 relative overflow-hidden group ${h?`bg-gradient-to-r ${l.color} text-white shadow-2xl border-white/50 animate-pulse-glow`:`${l.bgColor} border-gray-200 hover:border-gray-300 hover:shadow-xl group-hover:shadow-2xl`} ${d?"opacity-75":""}`,onClick:()=>a(l.id),children:[h&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 animate-shimmer"}),o.jsxs("div",{className:"flex items-center gap-6 w-full relative z-10",children:[o.jsxs("div",{className:"relative flex-shrink-0",children:[h&&o.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-rose-400/20 via-pink-400/20 to-purple-400/20 rounded-full blur-xl animate-pulse"}),o.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center text-5xl transition-all duration-700 relative ${h?"bg-white/25 backdrop-blur-md shadow-2xl animate-bounce scale-110":"bg-white/90 group-hover:bg-white shadow-xl group-hover:shadow-2xl group-hover:scale-105"}`,children:o.jsx("span",{className:`transition-all duration-500 ${h?"animate-pulse":""}`,children:l.emoji})}),h&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute -inset-4 border-2 border-white/30 rounded-full animate-ping"}),o.jsx("div",{className:"absolute -inset-3 border-2 border-white/50 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute -inset-2 border-3 border-white/70 rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),o.jsx("div",{className:`absolute -inset-3 border-2 rounded-full transition-all duration-500 ${h?"border-transparent":"border-transparent group-hover:border-gradient-to-r group-hover:from-gray-300 group-hover:to-gray-400"}`}),h&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-300 text-lg animate-bounce",children:"✨"}),o.jsx("div",{className:"absolute -bottom-2 -left-2 text-pink-300 text-sm animate-pulse",style:{animationDelay:"0.3s"},children:"⭐"})]})]}),o.jsxs("div",{className:"text-left flex-1",children:[o.jsx("div",{className:`text-xl font-bold mb-2 transition-all duration-300 ${h?"text-white drop-shadow-lg":"text-gray-800 group-hover:text-gray-900"}`,children:l.label}),o.jsx("div",{className:`text-sm font-medium transition-all duration-300 ${h?"text-white/90":"text-gray-600 group-hover:text-gray-700"}`,children:l.description})]}),d&&o.jsx("div",{className:"p-3 bg-yellow-100 rounded-full shadow-lg animate-bounce",children:o.jsx(Xe,{className:"h-6 w-6 text-yellow-600"})}),h&&o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:o.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-rose-500 to-pink-500 rounded-full animate-pulse"})}),o.jsx("div",{className:"text-white text-xs font-bold",children:"Selected"})]})]})]})]},l.id)})}),!t&&o.jsxs("div",{className:"mt-10 relative group animate-fade-in-up",children:[o.jsx("div",{className:"absolute -inset-8 bg-gradient-to-r from-purple-500/15 via-pink-500/15 to-orange-500/15 backdrop-blur-2xl rounded-3xl animate-pulse opacity-80"}),o.jsx("div",{className:"absolute -inset-6 bg-gradient-to-r from-purple-400/25 via-pink-400/25 to-orange-400/25 backdrop-blur-xl rounded-3xl animate-pulse",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-purple-300/35 via-pink-300/35 to-orange-300/35 backdrop-blur-lg rounded-3xl"}),o.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-purple-200/45 via-pink-200/45 to-orange-200/45 backdrop-blur-md rounded-3xl"}),o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 via-white/10 to-white/20 backdrop-blur-sm rounded-3xl"}),o.jsx("div",{className:"absolute -inset-3 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 rounded-3xl opacity-20 blur-xl animate-pulse"}),o.jsxs("div",{className:"relative bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 p-8 rounded-3xl shadow-2xl border-3 border-white/60 overflow-hidden group-hover:scale-105 transition-all duration-500",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 animate-shimmer"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-purple-500/10 animate-pulse"}),o.jsx("div",{className:"absolute -top-3 -left-3 w-6 h-6 bg-yellow-400 rounded-full animate-bounce opacity-80"}),o.jsx("div",{className:"absolute -top-2 -right-4 w-4 h-4 bg-pink-300 rounded-full animate-pulse opacity-70"}),o.jsx("div",{className:"absolute -bottom-3 -left-4 w-5 h-5 bg-orange-400 rounded-full animate-bounce opacity-75",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute -bottom-2 -right-3 w-7 h-7 bg-purple-300 rounded-full animate-pulse opacity-60",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-4 right-6 text-yellow-300 text-xl animate-bounce",children:"✨"}),o.jsx("div",{className:"absolute bottom-4 left-6 text-pink-300 text-lg animate-pulse",children:"⭐"}),o.jsxs("div",{className:"relative z-10 text-center text-white",children:[o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/25 backdrop-blur-sm px-4 py-2 rounded-full text-base font-bold shadow-lg border border-white/30",children:[o.jsx(Xe,{className:"h-5 w-5 text-yellow-300 animate-pulse"}),"Premium Feature",o.jsx(Xe,{className:"h-5 w-5 text-yellow-300 animate-pulse"})]})}),o.jsx("h3",{className:"text-2xl font-bold mb-3 drop-shadow-lg animate-pulse",children:"🎯 Unlock Gender Filtering!"}),o.jsx("p",{className:"text-white/95 text-base mb-6 leading-relaxed",children:"Choose exactly who you want to meet with premium gender preferences"}),o.jsxs("div",{className:"flex justify-center gap-4 mb-6 text-sm font-medium",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-white/20 px-3 py-1 rounded-full",children:[o.jsx("span",{children:"👨"})," Male Filter"]}),o.jsxs("div",{className:"flex items-center gap-1 bg-white/20 px-3 py-1 rounded-full",children:[o.jsx("span",{children:"👩"})," Female Filter"]})]}),o.jsxs(F,{onClick:n,className:"bg-white text-purple-700 hover:bg-yellow-100 font-bold px-8 py-4 rounded-2xl shadow-2xl transform hover:scale-110 transition-all duration-300 border-3 border-yellow-300 hover:border-yellow-400 text-lg group",children:[o.jsx(Xe,{className:"h-5 w-5 mr-2 text-yellow-600 group-hover:animate-bounce"}),"Upgrade Now ✨",o.jsx("div",{className:"ml-2 text-sm opacity-75",children:"Premium"})]})]})]})]})]})]})}const Pu={small:{width:320,height:50},medium:{width:728,height:90},large:{width:970,height:250},responsive:void 0};function $N({size:t="responsive",position:e="inline",adUnitId:n,className:r="",style:s={}}){var p;const i=v.useRef(null),[a,l]=v.useState(!1),[c,d]=v.useState(!1);if(v.useEffect(()=>{const y=setTimeout(async()=>{if(!i.current)return;const b=`banner-ad-${Math.random().toString(36).substr(2,9)}`;i.current.id=b;try{const E={id:b,type:"banner",position:e,size:Pu[t]};await ha.loadBannerAd(b,E,n)?(l(!0),ha.trackAdEvent("shown","banner")):d(!0)}catch(E){console.error("Banner ad failed to load:",E),d(!0)}},100);return()=>clearTimeout(y)},[t,e]),c)return null;const h={width:"100%",textAlign:"center",margin:"10px 0",...s};if(Pu[t]){const m=Pu[t];h.minHeight=`${m.height}px`,h.maxWidth=`${m.width}px`,h.margin="10px auto"}return o.jsx("div",{className:`banner-ad ${r}`,style:h,children:o.jsx("div",{ref:i,style:{width:"100%",height:"100%"},children:(c||!1)&&o.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"15px",borderRadius:"8px",fontSize:"14px",minHeight:((p=Pu[t])==null?void 0:p.height)||"90px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:o.jsxs("div",{children:[o.jsx("p",{style:{margin:"0 0 5px 0",fontWeight:"bold"},children:"📱 Advertisement"}),o.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:c?"Ad failed to load":"Sample ad content"})]})})})})}const Ap=["ca-app-pub-1776596266948987/2770517385","ca-app-pub-1776596266948987/7315217300","ca-app-pub-1776596266948987/2468099206"],m7=[{name:"Priya",text:"Found my perfect match here! So grateful 💕",rating:5},{name:"Arjun",text:"Every chat is a new adventure, truly amazing!",rating:5},{name:"Sneha",text:"Safe, fun, and full of romantic possibilities 🌟",rating:5}];function Pp(){const{socket:t,isUsingMockMode:e}=A0(),n=ht(),{isPremium:r,setPremium:s}=Zs(),{coins:i,claimDailyBonus:a,canClaimDailyBonus:l,isLoading:c,currentUser:d,hasCompletedOnboarding:h}=qi(),{t:p}=Lc(),[m,y]=v.useState(0),[b,E]=v.useState(0),[C,k]=v.useState(!1),[w,N]=v.useState(!1),[R,M]=v.useState(!1),[V,j]=v.useState(12847),{showBonusNotification:x,NotificationComponent:S}=h7();f7({canClaimDailyBonus:l,currentUser:d,hasCompletedOnboarding:h,showBonusNotification:x,claimDailyBonus:a}),v.useEffect(()=>{d&&!c&&!h&&n("/onboarding")},[d,h,c,n]),v.useEffect(()=>{const Z=setInterval(()=>{j(ee=>ee+Math.floor(Math.random()*10)-5)},5e3);return()=>clearInterval(Z)},[]),v.useEffect(()=>{const Z=setInterval(()=>{y(ee=>(ee+1)%Ap.length)},4e3);return()=>clearInterval(Z)},[]),v.useEffect(()=>{const Z=setInterval(()=>{E(ee=>(ee+1)%m7.length)},3e3);return()=>clearInterval(Z)},[]);const _=v.useCallback(async Z=>{Z.preventDefault(),!R&&(M(!0),Im("join"),n("/video-chat",{state:{isSearching:!0}}),M(!1))},[n,R]),A=v.useCallback(()=>{n("/voice")},[n]),P=()=>{k(!0)},I=Z=>{const ee=new Date,De=new Date(ee);Z==="weekly"?De.setDate(ee.getDate()+7):De.setMonth(ee.getMonth()+1),s(!0,De),k(!1),x("🎉 Welcome to Premium!",`Your ${Z} subscription is now active! Enjoy unlimited features.`,()=>{})};return c&&d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-peach-25 via-cream-50 to-blush-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-peach-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading your profile..."})]})}):o.jsxs(o.Fragment,{children:[o.jsx(hf,{children:o.jsxs("title",{children:[p("app.name")," - Random Video Chat - Live chat with ajnabis"]})}),o.jsxs("main",{className:"flex flex-col min-h-screen w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-4xl mx-auto bg-gradient-to-br from-peach-25 via-cream-50 to-blush-50 relative pb-16 sm:pb-20 lg:pb-24 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-6 sm:top-10 left-6 sm:left-10 w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-sindoor-300 to-henna-400 rounded-full opacity-20 animate-pulse"}),o.jsx("div",{className:"absolute top-20 sm:top-32 right-4 sm:right-8 w-10 h-10 sm:w-12 sm:h-12 lg:w-16 lg:h-16 bg-gradient-to-br from-royal-300 to-gulmohar-400 rounded-full opacity-30 animate-bounce"}),o.jsx("div",{className:"absolute bottom-32 sm:bottom-40 left-4 sm:left-6 w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-gradient-to-br from-jasmine-300 to-sindoor-400 rounded-full opacity-25 animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute bottom-48 sm:bottom-60 right-8 sm:right-12 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-passion-400 to-royal-400 rounded-full opacity-20 animate-bounce",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute top-16 sm:top-20 right-16 sm:right-20 text-sindoor-400 text-lg sm:text-xl lg:text-2xl opacity-40 animate-pulse",style:{animationDelay:"0.5s"},children:"💕"}),o.jsx("div",{className:"absolute bottom-64 sm:bottom-80 left-12 sm:left-16 text-henna-400 text-base sm:text-lg lg:text-xl opacity-35 animate-bounce",style:{animationDelay:"1.5s"},children:"🌸"}),o.jsx("div",{className:"absolute top-48 sm:top-60 left-6 sm:left-8 text-jasmine-400 text-sm sm:text-base lg:text-lg opacity-30 animate-pulse",style:{animationDelay:"2.5s"},children:"✨"}),o.jsx("div",{className:"absolute top-64 sm:top-80 right-4 sm:right-6 text-gulmohar-400 text-xs sm:text-sm lg:text-base opacity-25 animate-bounce",style:{animationDelay:"3s"},children:"🪷"})]}),o.jsxs("header",{className:"w-full bg-gradient-to-r from-peach-400 via-coral-400 to-blush-500 shadow-lg px-4 sm:px-6 lg:px-8 py-4 sm:py-5 border-b border-peach-200 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/15 via-jasmine-100/25 to-white/15 backdrop-blur-sm"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-henna-200/15 to-transparent"}),o.jsxs("div",{className:"relative z-10 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm shadow-lg",children:o.jsx(Ms,{className:"h-5 w-5 text-white"})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white tracking-tight drop-shadow-lg",children:p("app.name")})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(F,{onClick:()=>n("/profile"),className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-semibold p-2.5 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 border border-white/30",children:o.jsx(Lr,{className:"h-5 w-5"})}),o.jsxs(F,{onClick:()=>N(!0),disabled:c,className:"bg-gradient-to-r from-jasmine-500 to-gulmohar-600 hover:from-jasmine-600 hover:to-gulmohar-700 text-white font-bold px-4 py-2.5 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 text-sm",children:[o.jsx(da,{className:"h-4 w-4 mr-2"}),c?"...":i]})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-3",children:r?o.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-jasmine-400 to-gulmohar-500 px-3 py-1 rounded-full shadow-md",children:[o.jsx(Xe,{className:"h-3 w-3 text-white"}),o.jsx("span",{className:"text-white text-xs font-bold",children:"PREMIUM"})]}):o.jsx("div",{className:"text-white/80 text-xs font-medium",children:"✨ Upgrade for premium features"})}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(F,{onClick:A,className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-semibold px-3 py-1.5 rounded-full shadow-md transform hover:scale-105 transition-all duration-200 border border-white/30 text-xs",children:[o.jsx(sh,{className:"h-3 w-3 mr-1"}),"Voice Match"]})})]})]})]}),!r&&o.jsxs("div",{className:"w-full relative bg-gray-100 rounded-lg overflow-hidden shadow-sm",children:[o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{className:"flex transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${m*100}%)`},children:Ap.map((Z,ee)=>o.jsxs("div",{className:"w-full flex-shrink-0 relative",children:[o.jsx("div",{className:"h-24 sm:h-32 lg:h-40 w-full",children:o.jsx($N,{size:"responsive",position:"top",className:"h-full w-full",style:{minHeight:"96px"}},`ad-${Z}-${ee}`)}),o.jsx("div",{className:"absolute bottom-1 sm:bottom-2 left-2 sm:left-4 text-gray-600",children:o.jsxs("p",{className:"text-xs opacity-90 bg-white/80 px-2 py-1 rounded",children:["Advertisement ",ee+1]})})]},ee))})}),o.jsx("div",{className:"absolute bottom-1 right-4 flex gap-1",children:Ap.map((Z,ee)=>o.jsx("button",{onClick:()=>y(ee),className:`h-1.5 rounded-full transition-all duration-300 ${m===ee?"bg-blue-600 w-4":"bg-gray-400 w-1.5"}`},ee))})]}),o.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 lg:px-8 py-4 sm:py-6 relative z-10",children:[o.jsx("div",{className:"w-full mb-4 sm:mb-6",children:o.jsx(p7,{isPremium:r,onGenderSelect:Z=>{console.log("Selected gender:",Z)},onUpgrade:P})}),o.jsx("div",{className:"w-full mb-4 sm:mb-6",children:o.jsxs(F,{className:`w-full py-4 sm:py-6 lg:py-8 text-lg sm:text-xl lg:text-2xl font-bold rounded-2xl sm:rounded-3xl text-white shadow-2xl transform transition-all duration-300 relative overflow-hidden ${R?"bg-gradient-to-r from-coral-400 to-blush-500 scale-95":"bg-gradient-to-r from-peach-500 via-coral-500 to-blush-600 hover:scale-105 hover:shadow-3xl"}`,onClick:_,disabled:R,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-jasmine-200/40 via-white/25 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"}),o.jsx("div",{className:"relative z-10 flex items-center justify-center gap-2 sm:gap-3",children:R?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),o.jsx("span",{children:"Finding your match..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ms,{className:"h-5 w-5 sm:h-6 sm:w-6"}),o.jsx("span",{children:p("home.start")}),o.jsx(oh,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})}),o.jsxs("div",{className:"w-full grid grid-cols-2 gap-2 sm:gap-3 mb-4 sm:mb-6",children:[o.jsxs(F,{onClick:()=>n("/friends"),className:"bg-white/80 backdrop-blur-sm text-gray-700 border border-gray-200 hover:bg-white hover:shadow-lg transition-all duration-300 py-3 sm:py-4 rounded-xl sm:rounded-2xl text-sm sm:text-base",children:[o.jsx(Kr,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 text-blue-500"}),o.jsx("span",{className:"font-semibold",children:"Friends"})]}),o.jsxs(F,{onClick:()=>n("/ai-chatbot"),className:"bg-white/80 backdrop-blur-sm text-gray-700 border border-gray-200 hover:bg-white hover:shadow-lg transition-all duration-300 py-3 sm:py-4 rounded-xl sm:rounded-2xl text-sm sm:text-base",children:[o.jsx(Dc,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 text-purple-500"}),o.jsx("span",{className:"font-semibold",children:"AI Chat"})]})]}),!r&&o.jsx("div",{className:"w-full mb-4 sm:mb-6",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-4 border border-purple-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-purple-800 mb-1",children:"💰 Earn Free Coins!"}),o.jsx("p",{className:"text-xs text-purple-600",children:"Watch a short ad to earn 10 coins"})]}),o.jsx(CN,{variant:"compact",onRewardEarned:Z=>{console.log(`User earned ${Z} coins from ad`)}})]})})}),o.jsxs("div",{className:"text-xs sm:text-sm text-center text-gray-500 px-2 sm:px-4 leading-relaxed",children:["By using AjnabiCam, you agree to our Terms of Service and Privacy Policy.",o.jsx("br",{className:"hidden sm:block"}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 mt-1 sm:mt-0",children:[o.jsx("span",{className:"text-rose-600 font-medium",children:"✓ Safe & Secure"}),o.jsx("span",{className:"text-gray-400",children:"•"}),o.jsx("span",{className:"text-pink-600 font-medium",children:"24/7 Support"}),o.jsx("span",{className:"text-gray-400",children:"•"}),o.jsx("span",{className:"text-crimson-600 font-medium",children:"Find True Love"})]})]})]}),o.jsx("button",{onClick:()=>N(!0),className:"fixed bottom-20 sm:bottom-24 lg:bottom-28 right-3 sm:right-4 lg:right-6 bg-gradient-to-r from-peach-500 via-coral-500 to-blush-600 text-white p-3 sm:p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-110 transition-all duration-300 z-40 animate-pulse",children:o.jsxs("div",{className:"relative",children:[o.jsx(da,{className:"h-5 w-5 sm:h-6 sm:w-6"}),i>0&&o.jsx("div",{className:"absolute -top-1.5 sm:-top-2 -right-1.5 sm:-right-2 bg-sindoor-500 text-white text-xs font-bold rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center shadow-md",children:i>99?"99+":i})]})}),o.jsx(ii,{})]}),o.jsx(lf,{isOpen:C,onClose:()=>k(!1),onPurchase:I}),o.jsx(IN,{isOpen:w,onClose:()=>N(!1)}),o.jsx(S,{})]})}function g7({isOpen:t,onClose:e}){const{language:n,setLanguage:r,t:s}=Lc(),[i,a]=v.useState(n);if(!t)return null;const l=()=>{r(i),e()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(be,{className:"w-full max-w-md mx-auto bg-white border-2 border-purple-200 shadow-2xl max-h-[80vh] overflow-hidden",children:[o.jsxs(mt,{className:"text-center relative",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-1",children:o.jsx(Kt,{size:20})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 rounded-full",children:o.jsx(Dc,{className:"h-8 w-8 text-white"})})}),o.jsx(vn,{className:"text-xl font-bold text-purple-700",children:s("onboarding.language")})]}),o.jsxs(Vt,{className:"space-y-4 overflow-y-auto max-h-96",children:[o.jsx("div",{className:"grid grid-cols-1 gap-3",children:Tg.map(c=>o.jsx("button",{onClick:()=>a(c.code),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${i===c.code?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:c.flag}),o.jsx("div",{className:"flex-1 text-left",children:o.jsx("span",{className:"font-medium text-gray-800",children:c.name})}),i===c.code&&o.jsx(qy,{className:"h-5 w-5 text-purple-500"})]})},c.code))}),o.jsx("div",{className:"pt-4 border-t border-gray-200",children:o.jsx(F,{onClick:l,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 rounded-xl",children:s("common.save")})})]})]})})}function y7({isOpen:t,onClose:e,settingType:n}){const[r,s]=v.useState({showOnlineStatus:!0,allowDirectMessages:!0,showLastSeen:!1,allowScreenshots:!1,blockUnknownUsers:!1}),[i,a]=v.useState({newMessages:!0,friendRequests:!0,systemUpdates:!1,promotions:!0,soundEnabled:!0,vibrationEnabled:!0}),[l,c]=v.useState({twoFactorAuth:!1,loginAlerts:!0,dataDownload:!1,accountDeletion:!1});if(!t||!n)return null;const d=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ih,{className:"h-5 w-5 text-blue-600"}),o.jsx("h4",{className:"font-semibold text-blue-800",children:"Privacy Controls"})]}),o.jsx("p",{className:"text-sm text-blue-600",children:"Manage who can see your information and interact with you"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(wg,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Show Online Status"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Let others see when you're online"})]})]}),o.jsx("button",{onClick:()=>s(b=>({...b,showOnlineStatus:!b.showOnlineStatus})),className:`w-12 h-6 rounded-full transition-colors ${r.showOnlineStatus?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${r.showOnlineStatus?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Al,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Allow Direct Messages"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Receive messages from other users"})]})]}),o.jsx("button",{onClick:()=>s(b=>({...b,allowDirectMessages:!b.allowDirectMessages})),className:`w-12 h-6 rounded-full transition-colors ${r.allowDirectMessages?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${r.allowDirectMessages?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O9,{className:"h-5 w-5 text-purple-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Show Last Seen"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Display when you were last active"})]})]}),o.jsx("button",{onClick:()=>s(b=>({...b,showLastSeen:!b.showLastSeen})),className:`w-12 h-6 rounded-full transition-colors ${r.showLastSeen?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${r.showLastSeen?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(dc,{className:"h-5 w-5 text-orange-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Allow Screenshots"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Let others take screenshots during calls"})]})]}),o.jsx("button",{onClick:()=>s(b=>({...b,allowScreenshots:!b.allowScreenshots})),className:`w-12 h-6 rounded-full transition-colors ${r.allowScreenshots?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${r.allowScreenshots?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ld,{className:"h-5 w-5 text-red-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Block Unknown Users"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Only allow friends to contact you"})]})]}),o.jsx("button",{onClick:()=>s(b=>({...b,blockUnknownUsers:!b.blockUnknownUsers})),className:`w-12 h-6 rounded-full transition-colors ${r.blockUnknownUsers?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${r.blockUnknownUsers?"translate-x-6":"translate-x-0.5"}`})})]})]})]}),h=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(gg,{className:"h-5 w-5 text-purple-600"}),o.jsx("h4",{className:"font-semibold text-purple-800",children:"Notification Preferences"})]}),o.jsx("p",{className:"text-sm text-purple-600",children:"Choose what notifications you want to receive"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Al,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"New Messages"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Get notified of new chat messages"})]})]}),o.jsx("button",{onClick:()=>a(b=>({...b,newMessages:!b.newMessages})),className:`w-12 h-6 rounded-full transition-colors ${i.newMessages?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.newMessages?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lr,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Friend Requests"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Notifications for new friend requests"})]})]}),o.jsx("button",{onClick:()=>a(b=>({...b,friendRequests:!b.friendRequests})),className:`w-12 h-6 rounded-full transition-colors ${i.friendRequests?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.friendRequests?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(uc,{className:"h-5 w-5 text-gray-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"System Updates"}),o.jsx("p",{className:"text-xs text-gray-500",children:"App updates and maintenance notices"})]})]}),o.jsx("button",{onClick:()=>a(b=>({...b,systemUpdates:!b.systemUpdates})),className:`w-12 h-6 rounded-full transition-colors ${i.systemUpdates?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.systemUpdates?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Xe,{className:"h-5 w-5 text-yellow-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-800",children:"Promotions"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Special offers and premium features"})]})]}),o.jsx("button",{onClick:()=>a(b=>({...b,promotions:!b.promotions})),className:`w-12 h-6 rounded-full transition-colors ${i.promotions?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.promotions?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[o.jsx("h5",{className:"font-semibold text-gray-800 mb-3",children:"Sound & Vibration"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(s8,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sound"})]}),o.jsx("button",{onClick:()=>a(b=>({...b,soundEnabled:!b.soundEnabled})),className:`w-10 h-5 rounded-full transition-colors ${i.soundEnabled?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ${i.soundEnabled?"translate-x-5":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dc,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vibration"})]}),o.jsx("button",{onClick:()=>a(b=>({...b,vibrationEnabled:!b.vibrationEnabled})),className:`w-10 h-5 rounded-full transition-colors ${i.vibrationEnabled?"bg-green-500":"bg-gray-300"}`,children:o.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ${i.vibrationEnabled?"translate-x-5":"translate-x-0.5"}`})})]})]})]})]})]}),p=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Lr,{className:"h-5 w-5 text-red-600"}),o.jsx("h4",{className:"font-semibold text-red-800",children:"Account Security"})]}),o.jsx("p",{className:"text-sm text-red-600",children:"Manage your account security and data"})]}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-200",children:[o.jsx("h5",{className:"font-semibold text-yellow-800 mb-3",children:"Data Management"}),o.jsx("div",{className:"space-y-3",children:o.jsx(F,{onClick:()=>{confirm("⚠️ Are you sure you want to delete your account? This action cannot be undone.")&&alert("🗑️ Account deletion request submitted. Your account will be deleted in 30 days. You can cancel this by logging in before then.")},className:"w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-xl",children:"Delete Account"})})]})})]}),y=(()=>{switch(n){case"privacy":return{title:"Privacy Settings",icon:o.jsx(ih,{className:"h-6 w-6 text-blue-600"}),content:d()};case"notifications":return{title:"Notification Preferences",icon:o.jsx(gg,{className:"h-6 w-6 text-purple-600"}),content:h()};case"account":return{title:"Account Settings",icon:o.jsx(Lr,{className:"h-6 w-6 text-red-600"}),content:p()};default:return{title:"Settings",icon:o.jsx(uc,{className:"h-6 w-6 text-gray-600"}),content:o.jsx("div",{children:"Settings content"})}}})();return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto",children:o.jsxs(be,{className:"w-full max-w-md mx-auto bg-white border-2 border-gray-200 shadow-3xl relative overflow-hidden my-4 min-h-fit max-h-[95vh]",children:[o.jsxs(mt,{className:"text-center relative bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-2 text-gray-500 hover:bg-gray-200 rounded-full transition-all duration-200 hover:scale-110",children:o.jsx(Kt,{size:22})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"bg-white p-4 rounded-full shadow-lg",children:y.icon})}),o.jsx(vn,{className:"text-xl font-bold text-gray-800",children:y.title})]}),o.jsxs(Vt,{className:"p-6 overflow-y-auto max-h-[calc(95vh-200px)]",children:[y.content,o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx(F,{onClick:e,className:"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold py-3 rounded-xl",children:"Save Changes"})})]})]})})}function v7({isOpen:t,onClose:e}){const[n,r]=v.useState(null);if(!t)return null;const s=[{question:"How do I start a video chat?",answer:"Simply tap the 'Start Chatting' button on the home screen. You'll be connected with a random person instantly!"},{question:"What are the premium features?",answer:"Premium includes gender filtering, voice-only mode, unlimited chat time, priority matching, and ad-free experience."},{question:"How do I report inappropriate behavior?",answer:"During any chat, tap the 'Report' button. We take all reports seriously and review them within 24 hours."},{question:"Can I add friends on AjnabiCam?",answer:"Yes! After a great conversation, you can choose to 'Stay Connected' and add each other as friends."},{question:"How do coins work?",answer:"Coins extend your chat time. Earn them by watching ads, referring friends, or purchase coin packs in the store."},{question:"Is my data safe and private?",answer:"Absolutely! We use end-to-end encryption and never store your video calls. Your privacy is our top priority."}],i=[{icon:o.jsx(U9,{className:"h-5 w-5 text-blue-600"}),title:"Email Support",description:"Get help via email",action:"support@ajnabicam.com",color:"blue"},{icon:o.jsx(Al,{className:"h-5 w-5 text-green-600"}),title:"Live Chat",description:"Chat with our support team",action:"Start Chat",color:"green"},{icon:o.jsx(wN,{className:"h-5 w-5 text-purple-600"}),title:"Phone Support",description:"Call us for urgent issues",action:"+1-800-AJNABI",color:"purple"}];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto",children:o.jsxs(be,{className:"w-full max-w-md mx-auto bg-white border-2 border-blue-200 shadow-3xl relative overflow-hidden my-4 min-h-fit max-h-[95vh]",children:[o.jsxs(mt,{className:"text-center relative bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200",children:[o.jsx(F,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-2 top-2 p-2 text-blue-500 hover:bg-blue-100 rounded-full transition-all duration-200 hover:scale-110",children:o.jsx(Kt,{size:22})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"bg-white p-4 rounded-full shadow-lg",children:o.jsx(yg,{className:"h-8 w-8 text-blue-600"})})}),o.jsx(vn,{className:"text-2xl font-bold text-blue-800",children:"Help & Support"}),o.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"We're here to help you!"})]}),o.jsxs(Vt,{className:"p-6 overflow-y-auto max-h-[calc(95vh-200px)] space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-gray-800 text-lg mb-4 flex items-center gap-2",children:[o.jsx(Al,{className:"h-5 w-5 text-blue-600"}),"Contact Us"]}),o.jsx("div",{className:"space-y-3",children:i.map((a,l)=>o.jsx("div",{className:`p-4 rounded-xl border-2 hover:shadow-md transition-all duration-200 cursor-pointer ${a.color==="blue"?"border-blue-200 bg-blue-50":a.color==="green"?"border-green-200 bg-green-50":"border-purple-200 bg-purple-50"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-full ${a.color==="blue"?"bg-blue-100":a.color==="green"?"bg-green-100":"bg-purple-100"}`,children:a.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-semibold ${a.color==="blue"?"text-blue-800":a.color==="green"?"text-green-800":"text-purple-800"}`,children:a.title}),o.jsx("p",{className:`text-sm ${a.color==="blue"?"text-blue-600":a.color==="green"?"text-green-600":"text-purple-600"}`,children:a.description})]}),o.jsx("div",{className:`font-mono text-sm ${a.color==="blue"?"text-blue-700":a.color==="green"?"text-green-700":"text-purple-700"}`,children:a.action})]})},l))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-gray-800 text-lg mb-4 flex items-center gap-2",children:[o.jsx(yg,{className:"h-5 w-5 text-green-600"}),"Frequently Asked Questions"]}),o.jsx("div",{className:"space-y-2",children:s.map((a,l)=>o.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[o.jsxs("button",{onClick:()=>r(n===l?null:l),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-gray-800",children:a.question}),n===l?o.jsx(vN,{className:"h-4 w-4 text-gray-500"}):o.jsx(I9,{className:"h-4 w-4 text-gray-500"})]}),n===l&&o.jsx("div",{className:"px-4 pb-4 text-sm text-gray-600 bg-gray-50 border-t border-gray-200",children:a.answer})]},l))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800 text-lg mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs(F,{onClick:()=>alert("📖 User Guide opened! Check your downloads folder."),className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 rounded-xl flex items-center gap-2",children:[o.jsx(xN,{className:"h-4 w-4"}),"User Guide"]}),o.jsxs(F,{onClick:()=>alert("🐛 Bug report form opened! Describe the issue you encountered."),className:"bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-xl flex items-center gap-2",children:[o.jsx(Al,{className:"h-4 w-4"}),"Report Bug"]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"App Information"}),o.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[o.jsx("p",{children:"Version: 2.1.0"}),o.jsx("p",{children:"Last Updated: Dec 2024"}),o.jsx("p",{children:"Platform: Web App"})]})]})]})]})})}function x7(){const t=ht(),[e,n]=v.useState("Mystery Person"),[r,s]=v.useState(!1),[i,a]=v.useState(null),[l,c]=v.useState(""),[d,h]=v.useState(!0),[p,m]=v.useState(!1),[y,b]=v.useState(0),[E,C]=v.useState(!1),[k,w]=v.useState(!1),[N,R]=v.useState(null),[M,V]=v.useState(!1),[j,x]=v.useState(!1),[S,_]=v.useState(0),{isPremium:A,setPremium:P}=Zs(),{t:I}=Lc(),Z=v.useRef(null),ee=Ri.currentUser;v.useEffect(()=>{if(!ee)return;const ue=ln(Wt,"users",ee.uid),Pe=AS(ue,zt=>{if(zt.exists()){const qe=zt.data();n(qe.username||qe.name||"Mystery Person"),a(qe.profileImage||null),c(qe.referralCode||De(ee.uid)),_(qe.referralCount||0)}h(!1)});return()=>Pe()},[ee]);const De=ue=>ue.slice(0,6).toUpperCase(),Ct=()=>{s(!0)},q=async()=>{if(s(!1),ee){const ue=ln(Wt,"users",ee.uid);await Ai(ue,{username:e,updatedAt:new Date})}},Q=async ue=>{var zt;const Pe=(zt=ue.target.files)==null?void 0:zt[0];if(!(!Pe||!ee)){m(!0),b(0);try{const qe=await PN(Pe,ee.uid,Ze=>b(Ze));a(qe.url);const Jn=ln(Wt,"users",ee.uid);await Ai(Jn,{profileImage:qe.url,profileImagePath:qe.path,updatedAt:new Date}),console.log("Profile image uploaded successfully")}catch(qe){console.error("Error uploading profile image:",qe),alert("Failed to upload image. Please try again.")}finally{m(!1),b(0)}}},ne=()=>{navigator.clipboard.writeText(l),alert("Referral code copied to clipboard!")},ce=()=>{const ue=`Join me on AjnabiCam! Use my referral code: ${l} to get 12 hours of Premium FREE! Download: https://ajnabicam.com`;navigator.share?navigator.share({title:"Join AjnabiCam",text:ue,url:"https://ajnabicam.com"}):(navigator.clipboard.writeText(ue),alert("Referral message copied to clipboard! Share it with your friends."))},he=ue=>{R(ue),w(!0)},Se=ue=>{const Pe=new Date,zt=new Date(Pe);ue==="weekly"?zt.setDate(Pe.getDate()+7):zt.setMonth(Pe.getMonth()+1),P(!0,zt),x(!1),alert(`🎉 Welcome to Premium! Your ${ue} subscription is now active!`)},Je=()=>localStorage.getItem(`ajnabicam_shared_referral_${ee==null?void 0:ee.uid}`)==="true",Nn=async()=>{if(ee)try{localStorage.setItem(`ajnabicam_shared_referral_${ee.uid}`,"true");const ue=new Date,Pe=new Date(ue.getTime()+12*60*60*1e3);P(!0,Pe);const zt=ln(Wt,"users",ee.uid);await Ai(zt,{referralCount:S+1,lastReferralReward:new Date,updatedAt:new Date}),alert("🎉 Congratulations! You've earned 12 hours of Premium FREE for referring a friend!")}catch(ue){console.error("Error processing referral reward:",ue),alert("Error processing referral reward. Please try again.")}};return ee?d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-passion-50 via-romance-25 to-bollywood-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-passion-500 mx-auto mb-4"}),o.jsx("p",{className:"text-passion-600 font-medium",children:"Loading profile..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-passion-50 via-romance-25 to-bollywood-50 pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-passion-600 via-romance-600 to-royal-600 text-white p-6 shadow-xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(vr,{size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:I("profile.title")}),o.jsx("p",{className:"text-sm text-indigo-100",children:"Manage your account and preferences"})]})]})]}),o.jsxs("div",{className:"max-w-md mx-auto p-6 space-y-6",children:[A?o.jsx(be,{className:"romantic-card border-2 border-marigold-300 shadow-xl",children:o.jsxs(mt,{className:"text-center bg-gradient-to-r from-marigold-500 to-bollywood-600 text-white rounded-t-lg",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(Xe,{className:"h-6 w-6 text-yellow-300"}),o.jsx("h2",{className:"text-xl font-bold",children:I("profile.premium.active")})]}),o.jsx("p",{className:"text-marigold-100",children:I("profile.premium.enjoying")})]})}):o.jsx(be,{className:"romantic-card border-2 border-purple-300 shadow-xl",children:o.jsxs(mt,{className:"text-center bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-t-lg",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(Xe,{className:"h-6 w-6 text-yellow-300"}),o.jsx("h2",{className:"text-xl font-bold",children:I("profile.premium.upgrade")})]}),o.jsx("p",{className:"text-purple-100 mb-4",children:I("profile.premium.unlock")}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsx("p",{children:I("profile.premium.features.gender")}),o.jsx("p",{children:I("profile.premium.features.voice")}),o.jsx("p",{children:I("profile.premium.features.unlimited")})]}),o.jsxs(F,{onClick:()=>x(!0),className:"mt-4 bg-white text-purple-600 hover:bg-gray-100 font-bold",children:[o.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Upgrade Now"]})]})}),o.jsx(be,{className:"romantic-card shadow-xl",children:o.jsxs(mt,{className:"text-center",children:[o.jsxs("div",{className:"relative mx-auto mb-4",children:[o.jsx("div",{className:"jewelry-frame",children:o.jsx("img",{src:i||"https://api.dicebear.com/7.x/thumbs/svg?seed=user",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"})}),o.jsx(F,{variant:"ghost",size:"icon",className:"absolute bottom-1 right-1 bg-passion-500 hover:bg-passion-600 text-white rounded-full shadow-lg",onClick:()=>{var ue;return(ue=Z.current)==null?void 0:ue.click()},disabled:p,children:o.jsx(ca,{size:16})}),o.jsx("input",{ref:Z,type:"file",accept:"image/*",className:"hidden",onChange:Q}),p&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsxs("div",{className:"text-xs mb-1",children:[Math.round(y),"%"]}),o.jsx("div",{className:"w-16 h-1 bg-white/30 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${y}%`}})})]})})]}),o.jsxs("div",{className:"text-center",children:[r?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("input",{value:e,onChange:ue=>n(ue.target.value),className:"border-b border-passion-300 focus:outline-none focus:border-passion-500 px-2 text-lg text-center bg-transparent",autoFocus:!0,maxLength:20}),o.jsx(F,{size:"sm",onClick:q,className:"bg-passion-500 text-white",children:"Save"})]}):o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("h2",{className:"text-xl font-semibold text-passion-800",children:e}),o.jsx(F,{variant:"ghost",size:"icon",onClick:Ct,children:o.jsx(W9,{size:16,className:"text-passion-600"})})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I("profile.addPhoto")})]})]})}),o.jsxs(be,{className:"romantic-card shadow-xl border-2 border-green-300",children:[o.jsxs(mt,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-t-lg",children:[o.jsx("h3",{className:"text-lg font-bold text-center",children:I("profile.referral.title")}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 inline-block",children:o.jsxs("span",{className:"text-sm font-medium",children:["Successful Referrals: ",S]})})})]}),o.jsxs(Vt,{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:[o.jsxs("div",{className:"text-center mb-3",children:[o.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:I("profile.referral.id")}),o.jsx("div",{className:"bg-white border-2 border-green-300 rounded-lg px-4 py-3 font-mono text-lg font-bold text-green-700 select-all",children:l})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(F,{onClick:ne,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(A9,{className:"h-4 w-4 mr-2"}),I("profile.referral.copy")]}),o.jsxs(F,{onClick:ce,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[o.jsx(Q9,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-100 rounded-xl p-4 border border-orange-200",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:"🎁"}),o.jsx("h4",{className:"font-bold text-orange-800 mb-2",children:"Refer 1 Friend = 12 Hours FREE Premium!"}),o.jsx("p",{className:"text-sm text-orange-700 mb-4",children:I("profile.referral.share")}),Je()?o.jsx(F,{onClick:Nn,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-bold py-3",children:"🎉 Claim 12 Hours Premium!"}):o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-orange-600 mb-2",children:"Share your code to unlock the reward!"}),o.jsx(F,{onClick:()=>{ce(),setTimeout(()=>{localStorage.setItem(`ajnabicam_shared_referral_${ee.uid}`,"true"),alert("🎉 Referral shared! You can now claim your 12 hours of Premium!")},2e3)},className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-3",children:"📱 Share & Unlock Reward"})]})]})}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-xs text-green-600 leading-relaxed",children:["💡 ",o.jsx("strong",{children:"How it works:"})," Share your referral code with friends. When they sign up and complete their first video call, you both get premium benefits!"]})})]})]}),o.jsxs(be,{className:"romantic-card shadow-xl",children:[o.jsx(mt,{children:o.jsxs("h3",{className:"text-lg font-bold text-passion-800 text-center flex items-center justify-center gap-2",children:[o.jsx(uc,{className:"h-5 w-5"}),I("profile.settings")]})}),o.jsxs(Vt,{className:"space-y-3",children:[o.jsxs(F,{onClick:()=>he("privacy"),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(ih,{className:"h-5 w-5 mr-3 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I("profile.settings.privacy")}),o.jsx("div",{className:"text-sm text-gray-500",children:"Control who can see your information"})]})]}),o.jsxs(F,{onClick:()=>he("notifications"),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(gg,{className:"h-5 w-5 mr-3 text-purple-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I("profile.settings.notifications")}),o.jsx("div",{className:"text-sm text-gray-500",children:"Manage your notification preferences"})]})]}),o.jsxs(F,{onClick:()=>he("account"),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(Lr,{className:"h-5 w-5 mr-3 text-red-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I("profile.settings.account")}),o.jsx("div",{className:"text-sm text-gray-500",children:"Account security and data management"})]})]}),o.jsxs(F,{onClick:()=>C(!0),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(Dc,{className:"h-5 w-5 mr-3 text-green-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I("profile.settings.language")}),o.jsx("div",{className:"text-sm text-gray-500",children:"Change app language"})]})]}),o.jsxs(F,{onClick:()=>t("/storage-debug"),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(Rc,{className:"h-5 w-5 mr-3 text-indigo-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Storage Debug"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Test Firebase Storage connection"})]})]}),o.jsxs(F,{onClick:()=>t("/ad-testing"),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(EN,{className:"h-5 w-5 mr-3 text-green-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"AdMob Testing"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Test mobile ads functionality"})]})]}),o.jsxs(F,{onClick:()=>V(!0),variant:"outline",className:"w-full justify-start text-left p-4 h-auto border-passion-200 hover:bg-passion-50",children:[o.jsx(yg,{className:"h-5 w-5 mr-3 text-orange-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Help & Support"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Get help and contact support"})]})]})]})]}),!A&&o.jsx("div",{className:"mt-6",children:o.jsx($N,{size:"responsive",position:"bottom",className:"shadow-lg rounded-xl overflow-hidden"})})]}),o.jsx(g7,{isOpen:E,onClose:()=>C(!1)}),o.jsx(y7,{isOpen:k,onClose:()=>w(!1),settingType:N}),o.jsx(v7,{isOpen:M,onClose:()=>V(!1)}),o.jsx(lf,{isOpen:j,onClose:()=>x(!1),onPurchase:Se}),o.jsx(ii,{})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-passion-50 via-romance-25 to-bollywood-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-bold text-passion-600 mb-4",children:"Please log in first"}),o.jsx(F,{onClick:()=>t("/onboarding"),className:"bg-passion-600 text-white",children:"Go to Login"})]})})}function w7({showDetails:t=!0,autoTest:e=!0,className:n=""}){const[r,s]=v.useState(null),[i,a]=v.useState(!1),[l,c]=v.useState(null);v.useEffect(()=>{c(S8()),e&&d()},[e]);const d=async(m=!1)=>{a(!0);try{const y=m?await T8(3):await cf();s(y)}catch(y){s({isConnected:!1,status:"error",message:"Connection test failed unexpectedly",details:{canRead:!1,canWrite:!1,canDelete:!1,error:y instanceof Error?y.message:"Unknown error"}})}finally{a(!1)}},h=()=>{if(i)return o.jsx(Pl,{className:"w-5 h-5 animate-spin text-blue-500"});if(!r)return o.jsx(ua,{className:"w-5 h-5 text-gray-400"});switch(r.status){case"success":return o.jsx(vs,{className:"w-5 h-5 text-green-500"});case"error":return o.jsx(xs,{className:"w-5 h-5 text-red-500"});default:return o.jsx(ua,{className:"w-5 h-5 text-yellow-500"})}},p=()=>{if(i)return"border-bollywood-200 bg-bollywood-50";if(!r)return"border-gray-200 bg-gray-50";switch(r.status){case"success":return"border-passion-200 bg-passion-50";case"error":return"border-coral-200 bg-coral-50";default:return"border-marigold-200 bg-marigold-50"}};return o.jsxs("div",{className:`${n}`,children:[o.jsxs("div",{className:`border rounded-xl p-4 ${p()} transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h(),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rc,{className:"w-4 h-4 text-gray-600"}),o.jsx("span",{className:"font-semibold text-gray-800",children:"Firebase Storage"}),r!=null&&r.isConnected?o.jsx(kN,{className:"w-4 h-4 text-green-500"}):o.jsx(o8,{className:"w-4 h-4 text-red-500"})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i?"Testing connection...":(r==null?void 0:r.message)||"Click to test connection"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(F,{onClick:()=>d(!1),disabled:i,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(Pl,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Test"]}),o.jsxs(F,{onClick:()=>d(!0),disabled:i,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(Pl,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Test with Retry"]})]}),t&&r&&o.jsxs("div",{className:"mt-4 space-y-3",children:[r.details&&o.jsxs("div",{className:"bg-white/50 rounded-lg p-3",children:[o.jsxs("h4",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx(uc,{className:"w-4 h-4"}),"Connection Details"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[r.details.canWrite?o.jsx(vs,{className:"w-3 h-3 text-green-500"}):o.jsx(xs,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{children:"Write"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[r.details.canRead?o.jsx(vs,{className:"w-3 h-3 text-green-500"}):o.jsx(xs,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{children:"Read"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[r.details.canDelete?o.jsx(vs,{className:"w-3 h-3 text-green-500"}):o.jsx(xs,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{children:"Delete"})]})]}),r.details.error&&o.jsxs("div",{className:"mt-2 p-2 bg-red-100 border border-red-200 rounded text-xs text-red-700",children:[o.jsx("strong",{children:"Error:"})," ",r.details.error]})]}),l&&!l.error&&o.jsxs("div",{className:"bg-white/50 rounded-lg p-3",children:[o.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Configuration"}),o.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Bucket:"})," ",l.bucket]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Project:"})," ",l.projectId]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Domain:"})," ",l.authDomain]})]})]})]})]}),!t&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h(),o.jsx("span",{className:`font-medium ${r!=null&&r.isConnected?"text-green-600":"text-red-600"}`,children:r!=null&&r.isConnected?"Connected":"Disconnected"})]})]})}function b7(){const t=ht(),[e,n]=v.useState([]),[r,s]=v.useState(!1),i=c=>{n(d=>[...d,{...c,timestamp:new Date}])},a=()=>{n([])},l=async c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(d){s(!0);try{const p=await k8(d);i({test:"Basic File Upload",...p});const m=ON();try{const y=await PN(d,m);i({test:"Profile Image Upload",isConnected:!0,status:"success",message:"Profile image uploaded successfully",details:{url:y.url,path:y.path}})}catch(y){i({test:"Profile Image Upload",isConnected:!1,status:"error",message:y.message,details:{error:y.message}})}try{const y=await RN(d,"test-chat",m);i({test:"Chat Photo Upload",isConnected:!0,status:"success",message:"Chat photo uploaded successfully",details:{url:y.url,path:y.path}})}catch(y){i({test:"Chat Photo Upload",isConnected:!1,status:"error",message:y.message,details:{error:y.message}})}try{const y=await O8(d,"test-session");i({test:"Temporary Photo Upload",isConnected:!0,status:"success",message:"Temporary photo uploaded successfully",details:{url:y.url,path:y.path,expiresAt:y.expiresAt.toISOString()}})}catch(y){i({test:"Temporary Photo Upload",isConnected:!1,status:"error",message:y.message,details:{error:y.message}})}}finally{s(!1),c.target.value=""}}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-passion-50 via-romance-25 to-bollywood-50",children:[o.jsx("div",{className:"bg-gradient-to-r from-passion-600 via-romance-600 to-royal-600 text-white p-6 shadow-xl",children:o.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(vr,{size:24})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Rc,{className:"h-8 w-8"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:"Storage Debug"}),o.jsx("p",{className:"text-sm text-indigo-100",children:"Firebase Storage Connection Test"})]})]})]})}),o.jsxs("div",{className:"max-w-md mx-auto p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(uc,{className:"w-5 h-5"}),"Connection Status"]}),o.jsx(w7,{showDetails:!0,autoTest:!0})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Ky,{className:"w-5 h-5"}),"File Upload Tests"]}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"bg-white rounded-xl border p-4",children:[o.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"Upload Test File"}),o.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select an image to test all upload functions (profile, chat, temp)"}),o.jsx("input",{type:"file",accept:"image/*",onChange:l,disabled:r,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),r&&o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-blue-600",children:[o.jsx(Pl,{className:"w-4 h-4 animate-spin"}),"Testing uploads..."]})]})})]}),e.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[o.jsx(D9,{className:"w-5 h-5"}),"Test Results (",e.length,")"]}),o.jsxs(F,{onClick:a,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(TN,{className:"w-4 h-4"}),"Clear"]})]}),o.jsx("div",{className:"space-y-3",children:e.map((c,d)=>o.jsxs("div",{className:`bg-white rounded-xl border p-4 ${c.isConnected?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Gy,{className:"w-5 h-5 text-gray-600"}),o.jsx("h3",{className:"font-medium text-gray-800",children:c.test}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.isConnected?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c.isConnected?"Success":"Failed"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.message}),c.details&&o.jsx("div",{className:"bg-gray-50 rounded-lg p-2 text-xs",children:o.jsx("pre",{className:"whitespace-pre-wrap text-gray-700",children:JSON.stringify(c.details,null,2)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:c.timestamp.toLocaleTimeString()})]},d))})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"How to Use"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:"• Check connection status at the top"}),o.jsx("li",{children:'• Use "Test" buttons to verify connectivity'}),o.jsx("li",{children:"• Upload an image to test all upload functions"}),o.jsx("li",{children:"• View detailed results and error messages"}),o.jsx("li",{children:"• If connection fails, check Firebase Console setup"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(F,{onClick:()=>window.open("https://console.firebase.google.com/","_blank"),variant:"outline",className:"flex-1",children:"Firebase Console"}),o.jsx(F,{onClick:()=>t("/profile"),variant:"outline",className:"flex-1",children:"Test in Profile"})]})]})]})}async function _7(){const t={isConfigured:!1,auth:{working:!1},firestore:{working:!1,canRead:!1,canWrite:!1},storage:{working:!1,canUpload:!1,canDownload:!1,canDelete:!1},overall:{working:!1,message:""}};try{if(!Ks||!Wt||!yn)return t.overall={working:!1,message:"Firebase not properly configured"},t;t.isConfigured=!0,console.log("🔐 Testing Firebase Auth...");try{const n=Rh(Ks),r=await UE(n);t.auth={working:!0,userId:r.user.uid},console.log("✅ Firebase Auth working - User ID:",r.user.uid)}catch(n){t.auth={working:!1,error:n.message},console.error("❌ Firebase Auth failed:",n)}console.log("📊 Testing Firestore...");try{if(t.auth.working&&t.auth.userId){const n=ln(Wt,"users",t.auth.userId),r=await Jh(n);t.firestore.canRead=!0,await eh(n,{testTimestamp:new Date,testField:"Firebase connection test"},{merge:!0}),t.firestore.canWrite=!0,t.firestore.working=!0,console.log("✅ Firestore working - Read/Write successful")}}catch(n){t.firestore={working:!1,error:n.message,canRead:!1,canWrite:!1},console.error("❌ Firestore failed:",n)}console.log("💾 Testing Firebase Storage...");try{const n=to(yn,`test/${Date.now()}-test.txt`),r=new Blob(["Firebase test"],{type:"text/plain"});await eo(n,r),t.storage.canUpload=!0;const s=await Gr(n);t.storage.canDownload=!0,await Dy(n),t.storage.canDelete=!0,t.storage.working=!0,console.log("✅ Firebase Storage working - Upload/Download/Delete successful")}catch(n){t.storage={working:!1,error:n.message,canUpload:!1,canDownload:!1,canDelete:!1},console.error("❌ Firebase Storage failed:",n)}const e=t.auth.working&&t.firestore.working&&t.storage.working;t.overall={working:e,message:e?"🎉 All Firebase services working perfectly!":`⚠️ Issues found: ${[!t.auth.working&&"Auth",!t.firestore.working&&"Firestore",!t.storage.working&&"Storage"].filter(Boolean).join(", ")}`}}catch(e){t.overall={working:!1,message:`💥 Firebase check failed: ${e.message}`},console.error("💥 Firebase status check failed:",e)}return t}function E7(){const[t,e]=v.useState(null),[n,r]=v.useState(!1),[s,i]=v.useState(null),a=async()=>{r(!0);try{const d=await _7();e(d),i(new Date)}catch(d){console.error("Failed to check Firebase status:",d)}finally{r(!1)}},l=async()=>{try{const d=await cf();console.log("Storage test result:",d),alert(`Storage Test: ${d.isConnected?"✅ Success":"❌ Failed"}
${d.message}`)}catch(d){alert(`Storage Test Failed: ${d.message}`)}};v.useEffect(()=>{a()},[]);const c=({working:d})=>d?o.jsx(vs,{className:"w-5 h-5 text-green-600"}):o.jsx(xs,{className:"w-5 h-5 text-red-600"});return o.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Firebase Debug Dashboard"}),o.jsx("p",{className:"text-gray-600",children:"Monitor and test Firebase service connections"})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-6",children:[o.jsxs(F,{onClick:a,disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white p-4 h-auto flex items-center gap-2",children:[o.jsx(Pl,{className:`w-5 h-5 ${n?"animate-spin":""}`}),n?"Checking...":"Run Status Check"]}),o.jsxs(F,{onClick:l,className:"bg-purple-600 hover:bg-purple-700 text-white p-4 h-auto flex items-center gap-2",children:[o.jsx(vg,{className:"w-5 h-5"}),"Test Storage"]}),o.jsx("div",{className:"text-sm text-gray-500 flex items-center",children:s&&o.jsxs("span",{children:["Last checked: ",s.toLocaleTimeString()]})})]}),t&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs(be,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(c,{working:t.overall.working}),o.jsx("h2",{className:"text-xl font-semibold",children:"Overall Status"})]}),o.jsx("p",{className:`text-lg ${t.overall.working?"text-green-700":"text-red-700"}`,children:t.overall.message})]}),o.jsxs(be,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(c,{working:t.isConfigured}),o.jsx("h2",{className:"text-xl font-semibold",children:"Configuration"})]}),o.jsxs("p",{className:"text-gray-600",children:["Firebase app is ",t.isConfigured?"properly configured":"not configured"]})]}),o.jsxs(be,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(ih,{className:"w-5 h-5 text-blue-600"}),o.jsx(c,{working:t.auth.working}),o.jsx("h2",{className:"text-xl font-semibold",children:"Authentication"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:`${t.auth.working?"text-green-700":"text-red-700"}`,children:["Status: ",t.auth.working?"Working":"Failed"]}),t.auth.userId&&o.jsxs("p",{className:"text-sm text-gray-600 font-mono",children:["User ID: ",t.auth.userId]}),t.auth.error&&o.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Error: ",t.auth.error]})]})]}),o.jsxs(be,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Rc,{className:"w-5 h-5 text-orange-600"}),o.jsx(c,{working:t.firestore.working}),o.jsx("h2",{className:"text-xl font-semibold",children:"Firestore"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(c,{working:t.firestore.canRead}),o.jsx("span",{children:"Read Operations"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(c,{working:t.firestore.canWrite}),o.jsx("span",{children:"Write Operations"})]})]}),t.firestore.error&&o.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Error: ",t.firestore.error]})]})]}),o.jsxs(be,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(vg,{className:"w-5 h-5 text-purple-600"}),o.jsx(c,{working:t.storage.working}),o.jsx("h2",{className:"text-xl font-semibold",children:"Storage"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(c,{working:t.storage.canUpload}),o.jsx("span",{children:"Upload"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(c,{working:t.storage.canDownload}),o.jsx("span",{children:"Download"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(c,{working:t.storage.canDelete}),o.jsx("span",{children:"Delete"})]})]}),t.storage.error&&o.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Error: ",t.storage.error]})]})]}),o.jsxs(be,{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Configuration Details"}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded font-mono text-sm space-y-1",children:[o.jsx("div",{children:"Project ID: ajnabicam"}),o.jsx("div",{children:"Auth Domain: ajnabicam.firebaseapp.com"}),o.jsx("div",{children:"Storage Bucket: ajnabicam.appspot.com"}),o.jsx("div",{children:"Region: us-central1 (default)"})]})]})]}),!t&&!n&&o.jsx(be,{className:"p-8 text-center",children:o.jsx("p",{className:"text-gray-500",children:'Click "Run Status Check" to test Firebase services'})})]})})}function T7(){const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(null),[a,l]=v.useState(null),c=ht(),d=m=>{var b;const y=(b=m.target.files)==null?void 0:b[0];if(y){i(y);const E=new FileReader;E.onload=C=>{var k;l((k=C.target)==null?void 0:k.result)},E.readAsDataURL(y)}},h=()=>{if(t&&n){const m={name:t,gender:n,hasPhoto:!!s,setupComplete:!0};localStorage.setItem("ajnabicam_user_data",JSON.stringify(m)),c("/premium-trial")}},p=()=>{if(t&&n){const m={name:t,gender:n,hasPhoto:!!s,setupComplete:!0};localStorage.setItem("ajnabicam_user_data",JSON.stringify(m)),c("/")}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center px-4",children:o.jsxs(be,{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-purple-800 mb-2",children:"AjnabiCam"}),o.jsx("p",{className:"text-gray-600",children:"Setup your profile to get started"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[a?o.jsx("img",{src:a,alt:"Profile preview",className:"w-full h-full rounded-full object-cover border-4 border-purple-200"}):o.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 flex items-center justify-center border-4 border-purple-200",children:o.jsx("span",{className:"text-gray-500 text-3xl",children:"📷"})}),o.jsxs("label",{className:"absolute bottom-0 right-0 bg-purple-600 text-white rounded-full w-8 h-8 flex items-center justify-center cursor-pointer hover:bg-purple-700 transition-colors",children:[o.jsx("span",{className:"text-sm",children:"+"}),o.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Add your photo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),o.jsx(Mc,{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gender"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:()=>r("male"),className:`py-3 px-4 rounded-xl border-2 transition-all ${n==="male"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700 hover:border-purple-300"}`,children:"👨 Male"}),o.jsx("button",{onClick:()=>r("female"),className:`py-3 px-4 rounded-xl border-2 transition-all ${n==="female"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700 hover:border-purple-300"}`,children:"👩 Female"})]})]}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsx(F,{onClick:h,disabled:!t||!n,className:"w-full py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"👑 Start Free Trial"}),o.jsx(F,{onClick:p,disabled:!t||!n,variant:"outline",className:"w-full py-3 rounded-xl border-2 border-purple-300 text-purple-700 hover:bg-purple-50 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue for Free"})]})]})]})})}const S7=()=>{const{userId:t}=pA(),e=A0(),n=e.socket||e,[r,s]=v.useState([]),[i,a]=v.useState(""),l=v.useRef(null);v.useEffect(()=>{if(n)return n.on("receive-message",d=>{s(h=>[...h,d])}),()=>n.off("receive-message")},[n]);const c=()=>{i.trim()!==""&&(n.emit("send-message",{to:t,text:i}),s(d=>[...d,i]),a(""))};return v.useEffect(()=>{var d;(d=l.current)==null||d.scrollIntoView({behavior:"smooth"})},[r]),o.jsxs("div",{className:"flex flex-col h-screen bg-[#f0f0f0]",children:[o.jsxs("div",{className:"p-4 bg-[#ececec] shadow flex items-center",children:[o.jsx(UA,{to:"/chat-page",className:"text-blue-600",children:"← Back"}),o.jsxs("h2",{className:"ml-4 font-semibold",children:["Chat with User ",t]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[r.map((d,h)=>o.jsx("div",{className:"bg-white rounded-xl px-4 py-2 shadow w-fit self-end",children:d},h)),o.jsx("div",{ref:l})]}),o.jsxs("div",{className:"p-4 bg-white flex items-center border-t",children:[o.jsx("input",{type:"text",placeholder:"Type a message",className:"flex-1 border rounded-lg px-4 py-2 mr-2",value:i,onChange:d=>a(d.target.value),onKeyDown:d=>d.key==="Enter"&&c()}),o.jsx("button",{onClick:c,className:"bg-pink-500 text-white px-4 py-2 rounded-lg",children:"Send"})]})]})},k7=()=>{const t=ht(),{friends:e,removeFriend:n,canAddMoreFriends:r,maxFreeLimit:s}=My(),{isPremium:i,setPremium:a}=Zs(),[l,c]=v.useState(!1),d=()=>{t(-1)},h=(E,C)=>{alert("🎬 Watch this ad to start your call with "+C),t("/video-chat",{state:{friendCall:!0,friendId:E,friendName:C}})},p=(E,C)=>{confirm(`Remove ${C} from your friends list?`)&&n(E)},m=()=>{c(!0)},y=E=>{const C=new Date,k=new Date(C);E==="weekly"?k.setDate(C.getDate()+7):k.setMonth(C.getMonth()+1),a(!0,k),c(!1),alert("🎉 Welcome to Premium! You can now add unlimited friends!")},b=E=>{if(!E)return"";const k=new Date().getTime()-E.getTime(),w=Math.floor(k/(1e3*60)),N=Math.floor(k/(1e3*60*60)),R=Math.floor(k/(1e3*60*60*24));return w<1?"Just now":w<60?`${w}m ago`:N<24?`${N}h ago`:`${R}d ago`};return o.jsxs(o.Fragment,{children:[o.jsx(hf,{children:o.jsx("title",{children:"AjnabiCam - Friends"})}),o.jsxs("main",{className:"flex flex-col items-center min-h-screen w-full max-w-md mx-auto bg-white px-2 py-4 relative pb-20",children:[o.jsxs("div",{className:"w-full flex items-center p-4 bg-gradient-to-r from-rose-500 to-pink-600 text-white font-bold text-xl rounded-t-2xl shadow-lg",children:[o.jsx("button",{onClick:d,className:"mr-3 text-white font-bold text-xl hover:scale-110 transition-transform",children:o.jsx(vr,{size:24})}),o.jsx("h1",{className:"flex-grow text-center",children:"Friends"}),o.jsx(Kr,{className:"h-6 w-6"})]}),o.jsxs("div",{className:"w-full flex flex-col bg-white rounded-b-2xl border border-pink-100 shadow-xl mb-6 overflow-hidden",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-rose-50 border-b border-pink-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-rose-800",children:"Your Friends"}),o.jsx("p",{className:"text-sm text-rose-600",children:i?`${e.length} friends (Unlimited)`:`${e.length}/${s} friends (Free)`})]}),!i&&o.jsxs(F,{onClick:m,size:"sm",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",children:[o.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Upgrade"]})]}),!r&&o.jsx("div",{className:"mt-3 p-3 bg-orange-100 rounded-lg border border-orange-200",children:o.jsxs("p",{className:"text-sm text-orange-700 font-medium",children:["🚫 You've reached the free limit of ",s," friends. Upgrade to Premium for unlimited friends!"]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:e.length>0?e.map(E=>o.jsxs("div",{className:"flex items-center p-4 border-b border-pink-100 hover:bg-pink-50 transition-colors",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:E.avatar,alt:`${E.name} avatar`,className:"w-12 h-12 rounded-full object-cover border-2 border-pink-200"}),E.isOnline&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:E.name}),E.isOnline&&o.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Online"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:E.isOnline?"Active now":`Last seen ${b(E.lastSeen)}`})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{onClick:()=>h(E.id,E.name),size:"sm",className:"bg-green-500 hover:bg-green-600 text-white p-2",disabled:!E.isOnline,children:o.jsx(Qy,{className:"h-4 w-4"})}),o.jsx(F,{onClick:()=>p(E.id,E.name),size:"sm",variant:"outline",className:"text-red-500 hover:bg-red-50 p-2 border-red-200",children:o.jsx(TN,{className:"h-4 w-4"})})]})]},E.id)):o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"👥"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Friends Yet"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Make friends by staying connected after video calls!"}),o.jsxs(F,{onClick:()=>t("/video-chat"),className:"bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 text-white",children:[o.jsx(n8,{className:"h-4 w-4 mr-2"}),"Start Meeting People"]})]})}),e.length>0&&r&&o.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-t border-green-100",children:o.jsxs("p",{className:"text-sm text-green-700 text-center",children:["💡 ",o.jsx("strong",{children:"Tip:"}),' After video calls, choose "Stay Connected" to add them as friends!']})})]}),o.jsx(ii,{})]}),o.jsx(lf,{isOpen:l,onClose:()=>c(!1),onPurchase:y})]})},N7=()=>{const t=ht(),[e,n]=v.useState([{text:"Hello! I'm your AI assistant. How can I help you today?",isUser:!1,timestamp:new Date}]),[r,s]=v.useState(""),[i,a]=v.useState(!1),l=()=>{t(-1)},c=async()=>{if(!r.trim())return;const p={text:r,isUser:!0,timestamp:new Date};n(m=>[...m,p]),s(""),a(!0),setTimeout(()=>{const m={text:`I'm a placeholder AI response. This feature is coming soon! Your message was: "`+r+'"',isUser:!1,timestamp:new Date};n(y=>[...y,m]),a(!1)},1500)},d=p=>{p.key==="Enter"&&c()},h=p=>p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return o.jsxs(o.Fragment,{children:[o.jsx(hf,{children:o.jsx("title",{children:"AjnabiCam - AI Chat Assistant"})}),o.jsxs("main",{className:"flex flex-col items-center min-h-screen w-full max-w-md mx-auto bg-white px-2 py-4 relative pb-20",children:[o.jsxs("div",{className:"w-full flex items-center p-4 bg-gradient-to-r from-purple-500 to-blue-600 text-white font-bold text-xl rounded-t-2xl shadow-lg",children:[o.jsx("button",{onClick:l,className:"mr-3 text-white font-bold text-xl hover:scale-110 transition-transform",children:o.jsx(vr,{size:24})}),o.jsx("h1",{className:"flex-grow text-center",children:"AI Chat Assistant"}),o.jsx(ad,{className:"h-6 w-6"})]}),o.jsxs("div",{className:"w-full flex flex-col bg-white rounded-b-2xl border border-purple-100 shadow-xl mb-6 overflow-hidden flex-1",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 max-h-[60vh]",children:[e.map((p,m)=>o.jsx("div",{className:`flex ${p.isUser?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-md ${p.isUser?"bg-gradient-to-r from-purple-500 to-blue-600 text-white":"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border border-gray-300"}`,children:[!p.isUser&&o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ad,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"AI Assistant"})]}),o.jsx("div",{className:"leading-relaxed",children:p.text}),o.jsx("div",{className:`text-xs text-right mt-2 ${p.isUser?"text-purple-100":"text-gray-500"}`,children:h(p.timestamp)})]})},m)),i&&o.jsx("div",{className:"flex justify-start",children:o.jsxs("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border border-gray-300 max-w-xs px-4 py-3 rounded-2xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ad,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"AI Assistant"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-blue-50 border-t border-purple-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(oh,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{className:"text-sm font-semibold text-purple-700",children:"Coming Soon!"})]}),o.jsx("p",{className:"text-xs text-purple-600",children:"AI Chat Assistant is currently in development. This is a placeholder interface to demonstrate the feature."})]}),o.jsx("div",{className:"p-4 bg-white border-t border-purple-100",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Mc,{type:"text",value:r,onChange:p=>s(p.target.value),onKeyPress:d,placeholder:"Type your message to AI...",className:"flex-1 px-4 py-3 rounded-full border border-purple-300 focus:ring-2 focus:ring-purple-400 bg-purple-50",disabled:i}),o.jsx(F,{onClick:c,disabled:!r.trim()||i,className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white px-6 py-3 rounded-full font-semibold shadow-md transform hover:scale-105 transition-all duration-200",children:o.jsx(_N,{size:16})})]})})]}),o.jsx(ii,{})]})]})},bi=class bi{constructor(){Re(this,"config");Re(this,"isInitialized",!1);this.config={appId:"ca-app-pub-1776596266948987~1234567890",bannerAdUnitId:"ca-app-pub-1776596266948987/2770517385",interstitialAdUnitId:"ca-app-pub-1776596266948987/2725273599",rewardedAdUnitId:"ca-app-pub-1776596266948987/9705792525",testMode:!1}}static getInstance(){return bi.instance||(bi.instance=new bi),bi.instance}async initialize(){try{return console.log("🎯 Initializing Mobile AdMob Service..."),console.log("📱 App ID:",this.config.appId),console.log("🧪 Test Mode:",this.config.testMode),this.isMobileEnvironment()?(console.log("📱 Mobile environment detected"),await this.simulateMobileAdInit(),this.isInitialized=!0,console.log("✅ Mobile AdMob initialized successfully"),!0):(console.log("🌐 Web environment - using web ad service"),!1)}catch(e){return console.error("❌ Mobile AdMob initialization failed:",e),!1}}isMobileEnvironment(){return!!window.Capacitor}async simulateMobileAdInit(){return new Promise(e=>{setTimeout(()=>{console.log("📱 AdMob SDK initialized"),console.log("🎯 Ad units configured:"),console.log("  - Banner:",this.config.bannerAdUnitId),console.log("  - Interstitial:",this.config.interstitialAdUnitId),console.log("  - Rewarded:",this.config.rewardedAdUnitId),e()},1e3)})}async showBannerAd(){if(!this.isInitialized)return console.warn("⚠️ AdMob not initialized"),!1;try{return console.log("📱 Showing mobile banner ad..."),this.isMobileEnvironment()?(this.simulateBannerAd(),!0):!1}catch(e){return console.error("❌ Failed to show banner ad:",e),!1}}async showInterstitialAd(){if(!this.isInitialized)return console.warn("⚠️ AdMob not initialized"),!1;try{return console.log("🎬 Showing mobile interstitial ad..."),this.isMobileEnvironment()?await this.simulateInterstitialAd():!1}catch(e){return console.error("❌ Failed to show interstitial ad:",e),!1}}async showRewardedAd(){if(!this.isInitialized)return console.warn("⚠️ AdMob not initialized"),{success:!1,reward:0};try{return console.log("💰 Showing mobile rewarded ad..."),this.isMobileEnvironment()?await this.simulateRewardedAd():{success:!1,reward:0}}catch(e){return console.error("❌ Failed to show rewarded ad:",e),{success:!1,reward:0}}}simulateBannerAd(){const e=document.createElement("div");e.id="mobile-banner-ad",e.style.cssText=`
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    `,e.innerHTML="📱 Mobile AdMob Banner - Tap to close",e.onclick=()=>e.remove(),document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},1e4)}simulateInterstitialAd(){return new Promise(e=>{const n=document.createElement("div");n.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      `,n.innerHTML=`
        <div style="
          background: white;
          padding: 40px;
          border-radius: 15px;
          text-align: center;
          max-width: 350px;
          margin: 20px;
        ">
          <h2 style="color: #4285f4; margin-bottom: 20px;">📱 Mobile AdMob</h2>
          <p style="margin-bottom: 20px;">Interstitial Ad Test</p>
          <div style="background: #f0f0f0; padding: 30px; margin: 20px 0; border-radius: 10px;">
            <p style="font-size: 18px; margin: 10px 0;">🎯 Native Mobile Ad</p>
            <p style="font-size: 12px; color: #999;">Running on Android/iOS</p>
          </div>
          <p style="font-size: 12px; color: #999;">Tap anywhere to continue</p>
        </div>
      `,document.body.appendChild(n);const r=()=>{n.parentNode&&n.parentNode.removeChild(n),e(!0)};setTimeout(r,5e3),n.addEventListener("click",r)})}simulateRewardedAd(){return new Promise(e=>{const n=document.createElement("div");n.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
      `;let r=0;const s=5;n.innerHTML=`
        <div style="
          background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
          color: white;
          padding: 40px;
          border-radius: 15px;
          text-align: center;
          max-width: 350px;
          margin: 20px;
        ">
          <h2 style="margin-bottom: 20px;">💰 Mobile Rewarded Ad</h2>
          <p style="margin-bottom: 20px;">Watch to earn 15 coins!</p>
          <div style="background: rgba(255,255,255,0.1); padding: 30px; margin: 20px 0; border-radius: 10px;">
            <p style="font-size: 18px; margin: 10px 0;">📱 Native Mobile Video</p>
            <p id="mobile-countdown" style="font-size: 14px;">Watch for ${s} seconds...</p>
          </div>
          <button id="mobile-claim-reward" style="
            background: #34a853;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            opacity: 0.5;
            font-size: 16px;
          " disabled>Claim 15 Coins</button>
        </div>
      `,document.body.appendChild(n);const i=n.querySelector("#mobile-countdown"),a=n.querySelector("#mobile-claim-reward"),l=setInterval(()=>{r++,i&&(i.textContent=`${Math.max(0,s-r)} seconds remaining...`),r>=s&&(clearInterval(l),a&&i&&(a.disabled=!1,a.style.opacity="1",i.textContent="Ready to claim!"))},1e3);a.addEventListener("click",()=>{n.parentNode&&n.parentNode.removeChild(n),clearInterval(l),e({success:!0,reward:15})}),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),clearInterval(l),e({success:!1,reward:0})},3e4)})}getConfig(){return{...this.config}}isAvailable(){return this.isInitialized&&this.isMobileEnvironment()}};Re(bi,"instance");let Ig=bi;const kr=Ig.getInstance();function C7(){const[t,e]=v.useState(!1),[n,r]=v.useState([]),[s,i]=v.useState(!1),{addCoins:a}=qi();v.useEffect(()=>{l()},[]);const l=async()=>{i(!0);try{const b=await kr.initialize();e(b),c("Initialization",b,b?"AdMob initialized successfully":"Failed to initialize AdMob")}catch(b){c("Initialization",!1,`Error: ${b}`)}finally{i(!1)}},c=(b,E,C)=>{r(k=>[...k,{test:b,success:E,message:C,timestamp:new Date().toLocaleTimeString()}])},d=async()=>{i(!0);try{const b=await kr.showBannerAd();c("Banner Ad",b,b?"Banner ad displayed":"Banner ad failed to load")}catch(b){c("Banner Ad",!1,`Error: ${b}`)}finally{i(!1)}},h=async()=>{i(!0);try{const b=await kr.showInterstitialAd();c("Interstitial Ad",b,b?"Interstitial ad displayed":"Interstitial ad failed to load")}catch(b){c("Interstitial Ad",!1,`Error: ${b}`)}finally{i(!1)}},p=async()=>{i(!0);try{const b=await kr.showRewardedAd();b.success?(await a(b.reward),c("Rewarded Ad",!0,`Rewarded ad completed! Earned ${b.reward} coins`)):c("Rewarded Ad",!1,"Rewarded ad failed to complete")}catch(b){c("Rewarded Ad",!1,`Error: ${b}`)}finally{i(!1)}},m=()=>{r([])},y=!!window.Capacitor;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(be,{className:"border-2 border-blue-200",children:[o.jsx(mt,{children:o.jsxs(vn,{className:"flex items-center gap-2",children:[o.jsx(dc,{className:"h-5 w-5 text-blue-600"}),"Mobile Environment Detection"]})}),o.jsxs(Vt,{children:[o.jsx("div",{className:"flex items-center gap-3",children:y?o.jsxs(o.Fragment,{children:[o.jsx(vs,{className:"h-5 w-5 text-green-600"}),o.jsx("span",{className:"text-green-700 font-medium",children:"Running on Mobile (Capacitor detected)"})]}):o.jsxs(o.Fragment,{children:[o.jsx(xs,{className:"h-5 w-5 text-orange-600"}),o.jsx("span",{className:"text-orange-700 font-medium",children:"Running on Web (Mobile simulation mode)"})]})}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:y?"Perfect! You can test real mobile ads.":"Build the APK to test real mobile ads. Current tests will simulate mobile behavior."})]})]}),o.jsxs(be,{className:"border-2 border-purple-200",children:[o.jsx(mt,{children:o.jsxs(vn,{className:"flex items-center gap-2",children:[o.jsx(SN,{className:"h-5 w-5 text-purple-600"}),"AdMob Configuration"]})}),o.jsx(Vt,{children:o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"App ID:"})," ",kr.getConfig().appId]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Banner ID:"})," ",kr.getConfig().bannerAdUnitId]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Interstitial ID:"})," ",kr.getConfig().interstitialAdUnitId]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Rewarded ID:"})," ",kr.getConfig().rewardedAdUnitId]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Test Mode:"})," ",kr.getConfig().testMode?"Yes":"No"]})]})})]}),o.jsxs(be,{className:"border-2 border-green-200",children:[o.jsx(mt,{children:o.jsx(vn,{children:"Ad Testing Controls"})}),o.jsxs(Vt,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs(F,{onClick:d,disabled:!t||s,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[o.jsx(dc,{className:"h-4 w-4 mr-2"}),"Test Banner Ad"]}),o.jsxs(F,{onClick:h,disabled:!t||s,className:"bg-purple-600 hover:bg-purple-700 text-white",children:[o.jsx(ws,{className:"h-4 w-4 mr-2"}),"Test Interstitial"]}),o.jsxs(F,{onClick:p,disabled:!t||s,className:"bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Test Rewarded Ad"]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(F,{onClick:l,disabled:s,variant:"outline",className:"flex-1",children:s?"Initializing...":"Reinitialize AdMob"}),o.jsx(F,{onClick:m,variant:"outline",className:"flex-1",children:"Clear Results"})]})]})]}),n.length>0&&o.jsxs(be,{className:"border-2 border-gray-200",children:[o.jsx(mt,{children:o.jsxs(vn,{children:["Test Results (",n.length,")"]})}),o.jsx(Vt,{children:o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.map((b,E)=>o.jsxs("div",{className:`p-3 rounded-lg border ${b.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.success?o.jsx(vs,{className:"h-4 w-4 text-green-600"}):o.jsx(xs,{className:"h-4 w-4 text-red-600"}),o.jsx("span",{className:"font-medium",children:b.test}),o.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:b.timestamp})]}),o.jsx("p",{className:"text-sm text-gray-700",children:b.message})]},E))})})]}),o.jsxs(be,{className:"border-2 border-yellow-200 bg-yellow-50",children:[o.jsx(mt,{children:o.jsx(vn,{className:"text-yellow-800",children:"📱 Mobile Testing Instructions"})}),o.jsx(Vt,{className:"text-yellow-700",children:o.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[o.jsxs("li",{children:["Build the APK using: ",o.jsx("code",{className:"bg-yellow-200 px-1 rounded",children:"npm run mobile:build"})]}),o.jsx("li",{children:"Install the APK on your Android device"}),o.jsx("li",{children:"Open the app and navigate to this testing page"}),o.jsx("li",{children:"Test each ad type and verify they display correctly"}),o.jsx("li",{children:"Check your AdMob dashboard for impressions and earnings"}),o.jsx("li",{children:"Monitor app performance and user experience"})]})})]})]})}function I7(){const t=ht();return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white p-6 shadow-xl",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(vr,{size:24})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(EN,{className:"h-8 w-8"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"AdMob Testing"}),o.jsx("p",{className:"text-sm text-blue-100",children:"Test your mobile ads before going live"})]})]})]})}),o.jsx("div",{className:"max-w-4xl mx-auto p-6 pb-24",children:o.jsx(C7,{})}),o.jsx(ii,{})]})}const j7=()=>{const t=ht(),e=qi(),{coins:n=0,addCoins:r,watchAd:s,adsWatchedToday:i=0,maxAdsPerDay:a=5}=e||{},l=v.useRef(null),[c,d]=v.useState(!1),[h,p]=v.useState(null),[m,y]=v.useState(!1),[b,E]=v.useState(!1),[C,k]=v.useState(0),[w,N]=v.useState([]),R=3,M=[{coins:10,color:"from-emerald-400 to-emerald-600",bgColor:"#10B981",label:"10 Coins",probability:50,icon:"💎",pattern:"dots"},{coins:0,color:"from-gray-400 to-gray-600",bgColor:"#6B7280",label:"Try Again",probability:25,icon:"🔄",pattern:"stripes"},{coins:20,color:"from-amber-400 to-orange-500",bgColor:"#F59E0B",label:"20 Coins",probability:15,icon:"⭐",pattern:"zigzag"},{coins:0,color:"from-slate-400 to-slate-600",bgColor:"#64748B",label:"Better Luck",probability:7,icon:"🍀",pattern:"waves"},{coins:50,color:"from-red-400 to-pink-500",bgColor:"#EF4444",label:"JACKPOT!",probability:3,icon:"🎰",pattern:"stars"}];v.useEffect(()=>{const _=new Date().toDateString(),A=localStorage.getItem("lastSpinDate"),P=parseInt(localStorage.getItem("spinsToday")||"0");A===_?(k(P),E(P>=R)):(k(0),E(!1),localStorage.setItem("lastSpinDate",_),localStorage.setItem("spinsToday","0"))},[]),v.useEffect(()=>{if(c){const _=setInterval(()=>{N(A=>[...A,{id:Date.now()+Math.random(),x:Math.random()*100,y:Math.random()*100}].slice(-20))},200);return()=>clearInterval(_)}else N([])},[c]);const V=()=>{const _=Math.random()*100;let A=0;for(const P of M)if(A+=P.probability,_<=A)return P.coins===0?{coins:0,message:"Better luck next time! 🍀",requiresAd:!1,color:P.bgColor,icon:P.icon}:{coins:P.coins,message:P.coins===50?`🎉 JACKPOT! You won ${P.coins} coins! 🎉`:`Congratulations! You won ${P.coins} coins! 🎉`,requiresAd:!0,color:P.bgColor,icon:P.icon};return{coins:0,message:"Better luck next time! 🍀",requiresAd:!1,color:"#6B7280",icon:"🔄"}},j=()=>{if(c||b)return;d(!0),y(!1),p(null);const _=1440+Math.random()*1440;l.current&&(l.current.style.transition="transform 4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",l.current.style.transform=`rotate(${_}deg)`),setTimeout(()=>{const A=V();p(A),y(!0),d(!1);const P=C+1;k(P),localStorage.setItem("spinsToday",P.toString()),P>=R&&E(!0)},4e3)},x=async()=>{if(h){if(h.requiresAd&&h.coins>0){if(i>=a){alert("You've reached your daily ad limit. Come back tomorrow!");return}try{await s(),await r(h.coins),alert(`🎉 Amazing! You watched an ad and earned ${h.coins} coins!`),y(!1),p(null)}catch{alert("Failed to watch ad. Please try again.")}}else if(h.coins===0)if(confirm("Watch an ad and win 10 coins instantly?")){if(i>=a){alert("You've reached your daily ad limit. Come back tomorrow!");return}try{await s(),await r(10),alert("🎉 You watched an ad and earned 10 coins!"),y(!1),p(null)}catch{alert("Failed to watch ad. Please try again.")}}else y(!1),p(null)}},S=()=>{k(0),E(!1),localStorage.setItem("spinsToday","0")};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 w-full",children:[o.jsx("div",{className:"sticky top-0 z-50 bg-black/60 backdrop-blur-lg border-b border-white/20",children:o.jsxs("div",{className:"flex items-center justify-between px-4 py-4 max-w-sm mx-auto",children:[o.jsx("button",{onClick:()=>{console.log("Back button clicked - navigating to home"),t("/")},className:"flex items-center justify-center w-12 h-12 text-white hover:text-yellow-300 transition-all duration-300 bg-white/30 hover:bg-white/50 backdrop-blur-sm rounded-full touch-manipulation active:scale-95 border-2 border-white/40 shadow-lg",title:"Go back",children:o.jsx(vr,{className:"h-7 w-7 text-white drop-shadow-lg",strokeWidth:3})}),o.jsx("h1",{className:"text-white font-bold text-xl",children:"Spin & Win"}),o.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full px-4 py-2 shadow-lg",children:[o.jsx(da,{className:"h-5 w-5 text-white"}),o.jsx("span",{className:"font-bold text-white",children:n})]})]})}),o.jsxs("div",{className:"max-w-sm mx-auto relative min-h-screen",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full animate-pulse"}),o.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-br from-pink-500/20 to-red-500/20 rounded-full animate-pulse",style:{animationDelay:"1s"}}),w.map(_=>o.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full opacity-60 animate-ping",style:{left:`${_.x}%`,top:`${_.y}%`,animationDuration:"2s"}},_.id))]}),o.jsxs("div",{className:"relative z-10 p-4",children:[o.jsxs("div",{className:"text-center py-6",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"text-6xl animate-bounce",children:"🎰"}),o.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-ping",children:"✨"}),o.jsx("div",{className:"absolute -bottom-2 -left-2 text-xl animate-ping",style:{animationDelay:"0.5s"},children:"⭐"})]})}),o.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2 drop-shadow-lg",children:"Spin & Win Fortune!"}),o.jsx("p",{className:"text-white/90 font-medium text-lg drop-shadow-md",children:"🎲 Test your luck and win rewards! 🎲"}),o.jsx("div",{className:"mt-6 bg-white/20 backdrop-blur-lg rounded-2xl px-6 py-4 border border-white/30",children:o.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[o.jsx("div",{className:"bg-white/30 p-2 rounded-full",children:o.jsx(SN,{className:"h-5 w-5 text-white"})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-white font-bold text-lg",children:["Daily Spins: ",C,"/",R]}),o.jsxs("div",{className:"text-white/80 text-sm font-medium",children:[R-C," spins remaining"]})]})]})})]}),o.jsx("div",{className:"flex flex-col justify-center items-center py-8",children:o.jsxs("div",{className:"relative mb-8",children:[o.jsx("div",{className:"absolute -inset-6 bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 rounded-full opacity-50 blur-xl animate-pulse"}),o.jsxs("div",{ref:l,className:"relative w-72 h-72 rounded-full border-8 border-white shadow-2xl overflow-hidden",style:{background:`conic-gradient(
                    from 0deg,
                    #10B981 0deg 72deg,
                    #6B7280 72deg 144deg,
                    #F59E0B 144deg 216deg,
                    #64748B 216deg 288deg,
                    #EF4444 288deg 360deg
                  )`},children:[[0,72,144,216,288].map((_,A)=>o.jsx("div",{className:"absolute w-full h-0.5 bg-white/50 origin-left top-1/2",style:{transform:`rotate(${_}deg)`,transformOrigin:"50% 50%"}},A)),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-full w-20 h-20 flex items-center justify-center shadow-xl border-4 border-yellow-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 animate-pulse",children:"SPIN"}),o.jsx("div",{className:"text-xs font-bold text-gray-600",children:"WIN!"})]})})}),o.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 text-center",children:[o.jsx("div",{className:"text-2xl",children:"💎"}),o.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:"10"})]}),o.jsxs("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2 text-center",children:[o.jsx("div",{className:"text-2xl",children:"🔄"}),o.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:"Try"})]}),o.jsxs("div",{className:"absolute bottom-10 right-10 text-center",children:[o.jsx("div",{className:"text-2xl",children:"⭐"}),o.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:"20"})]}),o.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:[o.jsx("div",{className:"text-2xl",children:"🍀"}),o.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:"Luck"})]}),o.jsxs("div",{className:"absolute bottom-10 left-10 text-center",children:[o.jsx("div",{className:"text-3xl animate-pulse",children:"🎰"}),o.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:"50!"})]})]}),o.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 z-20",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-0 h-0 border-l-6 border-r-6 border-b-12 border-l-transparent border-r-transparent border-b-yellow-400 drop-shadow-2xl"}),o.jsx("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 w-3 h-3 bg-yellow-400 rounded-full shadow-lg"})]})})]})}),o.jsxs("div",{className:"pb-8",children:[b?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-lg text-white font-bold py-6 px-8 rounded-2xl shadow-lg border border-white/30 text-center",children:[o.jsx("div",{className:"text-xl mb-2",children:"🎯 Daily Limit Reached!"}),o.jsx("div",{className:"text-sm opacity-90",children:"Come back tomorrow for more spins!"})]}),o.jsx("button",{onClick:S,className:"w-full text-sm text-white/70 underline hover:text-white transition-colors",children:"🔧 Reset for testing"})]}):o.jsx(F,{onClick:j,disabled:c,className:`w-full py-6 rounded-2xl font-extrabold text-xl shadow-2xl transition-all duration-300 transform border-4 touch-manipulation ${c?"bg-gray-400 cursor-not-allowed border-gray-500 scale-95":"bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 hover:from-purple-600 hover:via-pink-600 hover:to-red-600 hover:shadow-3xl hover:scale-105 border-white active:scale-95"}`,children:c?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(bN,{className:"h-7 w-7 animate-spin"}),o.jsx("span",{children:"🌟 Spinning Magic... 🌟"})]}):o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(ws,{className:"h-7 w-7"}),o.jsx("span",{children:"🚀 SPIN THE WHEEL! 🚀"})]})}),o.jsxs("div",{className:"text-center mt-6 bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-white font-bold text-lg mb-2",children:"🎪 Every spin is a chance to win! 🎪"}),o.jsx("div",{className:"text-white/80 text-sm",children:"Watch ads to claim your rewards! 📺✨"})]})]})]})]}),m&&h&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:o.jsxs("div",{className:"relative w-full max-w-sm",children:[h.coins>0&&o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(30)].map((_,A)=>o.jsx("div",{className:"absolute w-3 h-3 bg-yellow-400 animate-bounce opacity-80 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${1+Math.random()}s`}},A))}),o.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border-4 border-white shadow-3xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 animate-pulse",style:{backgroundColor:h.color}}),o.jsxs("div",{className:"text-center relative z-10 p-8",children:[o.jsx("div",{className:"flex justify-center mb-6",children:h.coins>0?o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"text-8xl animate-bounce",children:h.icon}),o.jsx("div",{className:"absolute -top-4 -right-4 text-4xl animate-ping",children:"🎉"}),o.jsx("div",{className:"absolute -bottom-4 -left-4 text-3xl animate-ping",style:{animationDelay:"0.5s"},children:"✨"})]}):o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"text-6xl",children:h.icon}),o.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-pulse",children:"💫"})]})}),o.jsx("h2",{className:"text-2xl font-extrabold mb-4",children:h.coins>0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-3xl bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"🎊 WINNER! 🎊"}),o.jsxs("div",{className:"text-lg text-gray-700",children:["You won"," ",o.jsxs("span",{className:"text-green-600 font-extrabold",children:[h.coins," coins!"]})]})]}):o.jsx("div",{className:"text-gray-600",children:"Better Luck Next Time! 🍀"})}),o.jsx("p",{className:"text-gray-600 font-medium mb-8",children:h.message}),o.jsx("div",{className:"space-y-4",children:h.requiresAd&&h.coins>0?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-2xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(ws,{className:"h-6 w-6 text-blue-600"}),o.jsxs("p",{className:"text-blue-800 font-bold",children:["🎬 Watch a quick ad to claim your ",h.coins," ","coins!"]})]}),o.jsx("p",{className:"text-blue-600 text-sm",children:"Supporting ads keeps the app free! 💙"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(F,{onClick:x,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 py-4 font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 rounded-2xl",children:[o.jsx(ws,{className:"h-5 w-5 mr-2"}),"Watch Ad & Claim! 🎉"]}),o.jsx(F,{onClick:()=>y(!1),variant:"outline",className:"w-full py-4 font-bold border-2 hover:bg-gray-50 rounded-2xl",children:"Maybe Later"})]})]}):h.coins===0?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border-2 border-orange-200 rounded-2xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(Oc,{className:"h-6 w-6 text-orange-600"}),o.jsx("p",{className:"text-orange-800 font-bold",children:"🎁 Don't give up! Watch an ad and get 10 coins!"})]}),o.jsx("p",{className:"text-orange-600 text-sm",children:"Turn your luck around! 🌟"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(F,{onClick:x,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 py-4 font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 rounded-2xl",children:[o.jsx(ws,{className:"h-5 w-5 mr-2"}),"Watch Ad & Get 10 Coins! 🪙"]}),o.jsx(F,{onClick:()=>y(!1),variant:"outline",className:"w-full py-4 font-bold border-2 hover:bg-gray-50 rounded-2xl",children:"Close"})]})]}):o.jsx(F,{onClick:()=>y(!1),className:"w-full py-4 font-bold text-lg bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 rounded-2xl",children:"Try Again Tomorrow! 🌅"})})]})]})]})})]})},A7=()=>{const[t,e]=v.useState(null),[n,r]=v.useState(!1),[s,i]=v.useState(!1);v.useEffect(()=>{const c=window.matchMedia("(display-mode: standalone)").matches,d=window.navigator.standalone===!0,h=document.referrer.includes("android-app://");if(c||d||h){i(!0);return}const p=y=>{y.preventDefault(),e(y),setTimeout(()=>{r(!0)},3e3)},m=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",m),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",m)}},[]);const a=async()=>{if(t)try{await t.prompt();const{outcome:c}=await t.userChoice;console.log(c==="accepted"?"User accepted the install prompt":"User dismissed the install prompt")}catch(c){console.error("Error showing install prompt:",c)}finally{e(null),r(!1)}},l=()=>{r(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return s||!n||sessionStorage.getItem("pwa-prompt-dismissed")?null:o.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-50 md:left-auto md:right-4 md:w-80",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-pink-100 p-4 transform animate-slide-up",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center",children:o.jsx(dc,{className:"w-6 h-6 text-white"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Install AjnabiCam"}),o.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:"Get the full app experience! Install AjnabiCam on your device for faster access and better performance."}),o.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[o.jsxs(F,{onClick:a,size:"sm",className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white text-xs px-3 py-1.5 h-auto",children:[o.jsx(xg,{className:"w-3 h-3 mr-1"}),"Install"]}),o.jsx(F,{onClick:l,variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700 text-xs px-2 py-1.5 h-auto",children:o.jsx(Kt,{className:"w-3 h-3"})})]})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"text-pink-500 font-semibold",children:"📱"}),o.jsx("div",{children:"Native Feel"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"text-pink-500 font-semibold",children:"⚡"}),o.jsx("div",{children:"Faster"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"text-pink-500 font-semibold",children:"📳"}),o.jsx("div",{children:"Notifications"})]})]})})]})})};function P7(){const[t,e]=v.useState(!0),[n,r]=v.useState(!1);ht(),v.useEffect(()=>{const i=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(i)},[]),v.useEffect(()=>{const i=$E(Ri,async a=>{if(a)await Ek(a.uid);else try{await UE(Ri),console.log("✅ User signed in anonymously")}catch(l){console.error("❌ Error signing in anonymously:",l)}r(!0)});return()=>i()},[]);const s=()=>{e(!1)};return t?o.jsx(N8,{onComplete:s}):n?o.jsxs("div",{children:[o.jsxs(jA,{children:[o.jsx(Ge,{path:"/",element:o.jsx(Pp,{})}),o.jsx(Ge,{path:"/onboarding",element:o.jsx(I8,{})}),o.jsx(Ge,{path:"/user-setup",element:o.jsx(T7,{})}),o.jsx(Ge,{path:"/premium-trial",element:o.jsx(l_,{})}),o.jsx(Ge,{path:"/home",element:o.jsx(Pp,{})}),o.jsx(Ge,{path:"/gender-select",element:o.jsx(P8,{})}),o.jsx(Ge,{path:"/video-chat",element:o.jsx(E8,{})}),o.jsx(Ge,{path:"/voice",element:o.jsx(u7,{})}),o.jsx(Ge,{path:"/personal-chat",element:o.jsx(S7,{})}),o.jsx(Ge,{path:"/chat",element:o.jsx(F8,{})}),o.jsx(Ge,{path:"/friends",element:o.jsx(k7,{})}),o.jsx(Ge,{path:"/profile",element:o.jsx(x7,{})}),o.jsx(Ge,{path:"/refer",element:o.jsx(l_,{})}),o.jsx(Ge,{path:"/referral-code",element:o.jsx(A8,{})}),o.jsx(Ge,{path:"/ai-chatbot",element:o.jsx(N7,{})}),o.jsx(Ge,{path:"/spin-wheel",element:o.jsx(j7,{})}),o.jsx(Ge,{path:"/storage-debug",element:o.jsx(b7,{})}),o.jsx(Ge,{path:"/firebase-debug",element:o.jsx(E7,{})}),o.jsx(Ge,{path:"/ad-testing",element:o.jsx(I7,{})}),o.jsx(Ge,{path:"*",element:o.jsx(Pp,{})})]}),o.jsx(A7,{})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-peach-25 via-cream-50 to-blush-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-peach-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Initializing..."})]})})}$A();j2(document.getElementById("root")).render(o.jsx(v.StrictMode,{children:o.jsx(zN,{children:o.jsx(C8,{children:o.jsx(w8,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:o.jsx(LP,{children:o.jsx(dV,{children:o.jsx(hV,{children:o.jsx(LA,{children:o.jsx(MP,{children:o.jsx(P7,{})})})})})})})})})}));export{tn as _,hc as g,uF as p,v as r,rf as u};
